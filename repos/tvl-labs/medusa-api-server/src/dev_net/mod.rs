mod bin;
mod chain;
mod deploy;

use std::process::Command;
use std::str::FromStr;

use alloy::providers::{Provider, WalletProvider};
use alloy::signers::local::LocalSigner;
use alloy::transports::http::{Client, Http};
use alloy::{
    network::EthereumWallet,
    node_bindings::{Anvil, AnvilInstance},
    providers::ProviderBuilder,
    signers::local::PrivateKeySigner,
    sol,
};
use anyhow::Result;

use crate::dev_net::ArcadiaIntentBook::ArcadiaIntentBookInstance;

pub const ANVIL_PKEYS: [&str; 3] = [
    "0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",
    "0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d",
    "0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a",
];
/*
The devnet does the following things:
1. Spin up an Anvil node. Reserve one of Anvil's default addresses as Medusa
2. Spin up two other Anvil nodes, representing DIFFERENT networks (different chain IDs)
3. Spin up a chain service for each of these
3. Deploy hyperlane mailbox to all three nodes
4. Deploy ERC20 tokens to the two spoke chain nodes
5. Deploy asset reserves to the spoke chains
6. Whitelist the test tokens on the asset reserves
7. Deploy event publisher to all chains
8. Deploy event verifier to all chains
9. Deploy Arcadia contracts to arcadia
10. Start the Medusa server
*/
sol! {
    #[sol(rpc, bytecode = "0x608080604052600436101561001357600080fd5b600090813560e01c90816302cc250d14611ef05750806314e0320814611ec75780632ff71a6914611e875780633ce30eba1461194c578063518f60e41461191e578063715018a6146118c4578063763f323d1461185b5780637cb2b79c1461181b5780637d744cb0146108cb5780638982c74a146108885780638da5cb5b146108615780638fd57b92146108205780639f33dd0c146107f7578063ab97d59d146107ce578063ae61c5ae14610768578063b4257b9a1461072f578063d55f960d1461067f578063d73a52ef1461065c578063dc94809a146105b5578063dcc8fe7d14610361578063ec58f4b81461031b578063f13c46aa146102e3578063f2fde38b1461021d5763f568559e1461012957600080fd5b3461021a57602090602060031936011261021a576004356001600160401b0381116102165761015c903690600401612268565b90610165612c74565b805b82518110156102125761017a8184612902565b51610183612c74565b808352600680865260ff60408520541660078110156101fe576001036101e557818452855260408320805460ff19166002179055600191907f876816f4c1785d4fe0a5fb2c173e1a1189f08dbf5664ff14a550993d28f46c648480a201610167565b604051631e4f9a8f60e01b815260048101839052602490fd5b634e487b7160e01b85526021600452602485fd5b5080f35b5080fd5b80fd5b503461021a57602036600319011261021a57610237611f2c565b61023f612c74565b6001600160a01b0390811690811561028f57600054826001600160601b0360a01b821617600055167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a380f35b60405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608490fd5b503461021a57602036600319011261021a57610317610303600435612a7f565b604051918291602083526020830190612641565b0390f35b503461021a57602036600319011261021a57610335611f2c565b61033d612c74565b6001600160a01b031681526001602081905260408220805460ff1916909117905580f35b503461021a576020806003193601126102165760608160405161038381611f7f565b61038b61288a565b815201526004358252600581526040822091604051926103aa84611f7f565b604051906103b782611f9a565b60018060a01b039182825416815260019283830154868301526002830154604083015280600384015416606083015260048301546080830152600583016040519161040183611fb5565b604051809283918a82549182815201918a528a8a20938a905b8a8d84841061059a57505050505061043492500382611feb565b815260068301604051808289829454938481520190895289892092895b898c838310610585575050505061046a92500382611feb565b86820152600783015460ff8116600381101561057157604083015260081c60ff16600481101561055d57906008939291606082015260a082015286520190604051928391818454946104bb86612813565b958686528884821691826000146105395750506001146104fd575b5050506104e592500382611feb565b8183015261031760405192828493845283019061276c565b879350819291528282205b8583106105215750506104e593508201013880806104d6565b80548388018501528694508793909201918101610508565b9350945050506104e594915060ff191682840152151560051b8201013880806104d6565b634e487b7160e01b86526021600452602486fd5b634e487b7160e01b87526021600452602487fd5b86548552958101958795509093019201610451565b8754831686529681019688965090940193919091019061041a565b503461021a57602036600319011261021a576004356105d2612c74565b808252600660205260ff60408320541660078110156106485760010361063057808252600660205260408220805460ff191660021790557f876816f4c1785d4fe0a5fb2c173e1a1189f08dbf5664ff14a550993d28f46c648280a280f35b60249060405190631e4f9a8f60e01b82526004820152fd5b634e487b7160e01b83526021600452602483fd5b503461021a576020610675610670366121ab565b6129f7565b6040519015158152f35b503461021a57602036600319011261021a57600435808252600660205260ff60408320541660078110156106485760010361071d576001600160a01b036106c582612a7f565b5116330361070b57808252600660205260408220600660ff198254161790557fc08eb64db16a39d2848960af04e3f16fb404d9d436a9f0e9d7d0d4854715c9dc8280a280f35b604051636bc0a3c960e01b8152600490fd5b6040516375a7c91d60e11b8152600490fd5b503461021a57602036600319011261021a576004358152600660205260ff60408220541660405190600781101561064857602092508152f35b503461021a57602036600319011261021a57610782611f2c565b61078a612c74565b6001600160a01b0316808252600260205260408220805460ff191690557fb0c9717c142f93dbbd96f88763e6914c713a8d2b1fd97afe1a4407cb9414b33b8280a280f35b503461021a578060031936011261021a576007546040516001600160a01b039091168152602090f35b503461021a578060031936011261021a576009546040516001600160a01b039091168152602090f35b503461021a57602036600319011261021a5761083a611f2c565b610842612c74565b6001600160a01b03168152600160205260408120805460ff1916905580f35b503461021a578060031936011261021a57546040516001600160a01b039091168152602090f35b503461021a57602036600319011261021a57600435906001600160401b03821161021a5760206108c36108be3660048601612023565b612ce6565b604051908152f35b503461021a576108da366122dc565b6108e381612916565b8151906108ee612c74565b835b825181101561099c576109038184612902565b5161090c612c74565b8086526006602081815260ff60408920541660078110156109885760010361096f578288525260408620805460ff19166002179055600191907f876816f4c1785d4fe0a5fb2c173e1a1189f08dbf5664ff14a550993d28f46c648780a2016108f0565b604051631e4f9a8f60e01b815260048101849052602490fd5b634e487b7160e01b89526021600452602489fd5b5091906020820151936040830151916080606085015194015186511580611812575b6117aa5780516109d18851865190612ccc565b03610a79578651801561180a5760001981019081116117f657915b865195610a116109fb8861200c565b97610a09604051998a611feb565b80895261200c565b601f1901366020890137845b8351811015610af357610a308185612902565b51908a51801515808091610ae9575b15610a8b575050806001600160401b0360208401511603610a79576001610a726001600160401b0382945b51168b612902565b5201610a1d565b60405163aaf674fd60e01b8152600490fd5b15610ad557610aa7906001600160401b03602085015116612cd9565b88511115610ac3576001610a726001600160401b038294610a6a565b60405163f64cd3fd60e01b8152600490fd5b506001600160401b03602083015116610aa7565b5087831115610a3f565b868884848d8d898c805b8751811015610b3057610b108189612902565b5115610b1e57600101610afd565b604051635ed813b560e11b8152600490fd5b5087835194610b3e8661200c565b95610b4c6040519788611feb565b808752610b5b601f199161200c565b0136602088013782968390849585995b88518b1015610ba557610b9d8b6001928c610b976080610b8c8f8690612902565b510151938492612902565b52612ccc565b9a0199610b6b565b9899508a97959697875b8351811015610d5d57610bc28185612902565b51906001600160401b03825116918951831015610d4b578d8391610be6838d612902565b5191610bf86040830151968792612902565b5110610d4b576020810151516002811015610d37571580610d2d575b15610cb757610c356001600160401b0360208060609401510151168b612902565b5191015160608201516001600160a01b03918216911603610ca55760808491015110610c935780610c688f9d8590612ccc565b9e600194610c7c610c8993610c8293612902565b51612cd9565b918d612902565b52019a989a610baf565b604051633fa1c54160e11b8152600490fd5b604051632e5c119560e01b8152600490fd5b9c9e9c610cd96001600160401b036020806060949c989c01510151168c612902565b5191015181516001600160a01b03918216911603610ca55760208891015110610d1b57610c89610c8288610c7c8f9a610d158691600199612ccc565b9b612902565b60405163612109a960e11b8152600490fd5b5089511515610c14565b634e487b7160e01b8e52602160045260248efd5b604051630ad3f26d60e31b8152600490fd5b50918a919596949799610d70858b612ccc565b116117e457899485805b8a518d1015610da757610d9f60019160808f610d96908f612902565b51015190612ccc565b9c019b610d7a565b908b8b939203610c935780975b8a51891015610dd757610dcf6001916020610d968c8f612902565b980197610db4565b9089888c949303610d1b57815b8751811015610e2557610df78189612902565b51610e05575b600101610de4565b98610e1d600191610e168c8b612902565b5190612ccc565b999050610dfd565b508451889080156117db5760001981019081116117c557925b865115806117bc575b6117aa5790949587906000975b845189101561127757610e678986612902565b519660a0610e7f6001600160401b038a511683612902565b51019760408951015160038110156111a357611265578351801515808061124e575b15610eb85760405163162ed6e760e01b8152600490fd5b1561123b576001600160401b036020610ed393015116612cd9565b825181101561122957610ee69083612902565b5196600096879a885b8b51518051821015611215576001600160a01b03908190610f11908490612902565b5116908c511614610f2457600101610eef565b9197959b50959b9399929891975060015b156111b957610f476060845101612806565b60048110156111a3576110895782516020810151519060018203610fe757505050602080610f7a920151925101516128df565b5103610f92576001905b019791969092939495610e54565b60405162461bcd60e51b815260206004820152602760248201527f496e636f727265637420616d6f756e74207573656420746f2066756c66696c6c604482015266081a5b9d195b9d60ca1b6064820152608490fd5b51510361100e5760208061100093015193510151612902565b5103610f9257600190610f84565b60405162461bcd60e51b815260206004820152604760248201527f4f7574636f6d6520616d6f756e7473206d75737420656974686572206265206f60448201527f66206c656e6774682031206f72206c656e677468206f66206f7574636f6d65206064820152666d546f6b656e7360c81b608482015260a490fd5b6110966060845101612806565b60048110156111a357600190810361115e578351602081015151918203611145575050506020806110cc920151925101516128df565b51116110da57600190610f84565b60405162461bcd60e51b815260206004820152603b60248201527f416d6f756e7420646f6573206e6f74206d65657420746865206d696e696d756d60448201527f20726571756972656420746f2066756c66696c6c20696e74656e7400000000006064820152608490fd5b51510361100e576020806110cc93015193510151612902565b60405162461bcd60e51b815260206004820152601a60248201527f556e737570706f727465642066696c6c207374727563747572650000000000006044820152606490fd5b634e487b7160e01b600052602160045260246000fd5b60405162461bcd60e51b815260206004820152602e60248201527f496e76616c696420696e74656e742066756c66696c6c6d656e743a20696e766160448201526d1b1a59081d1bdad95b881d5cd95960921b6064820152608490fd5b5050959b9399929891979a9096949a610f35565b604051633c5919af60e01b8152600490fd5b50602001516001600160401b0316610ed3565b50896001600160401b036020850151161115610ea1565b604051639628cee160e01b8152600490fd5b95939294509085516114c3575b845b87518110156112b9578061129c6001928a612902565b518752600660205260408720805460ff1916600317905501611286565b5086949395845b875181101561130957806112df6112d96001938b612902565b51612ce6565b7f31b5ebb8813dfc009ad417462c629df216481a8e5da76bda54d56293480fa2918880a2016112c0565b50908491866040519460c0860160a060208801528251809152602060e08801930190865b8181106114ad57505050858203601f1901604087015261134d919061270f565b601f1985820301606086015260208083519283815201920190845b81811061146357505050601f198482030160808501526020808351928381520192019083905b80821061140b57505050601f198382030160a0840152602080855192838152019401915b8181106113dd576020846113cf818803601f198101835282611feb565b818151910120604051908152f35b825180516001600160401b0390811687526020918201511681870152604090950194909201916001016113b2565b9091939284516001600160401b038151168252602081015180516002811015610571579260406020936001600160401b038560809560019882870152015116828401520151606082015201950192019093929361138e565b825180516001600160a01b03908116865260208281015181880152604080840151909216918701919091526060918201519186019190915260809094019390920191600101611368565b825185526020948501949092019160010161132d565b949293959190865b845181101561179e57876114df8287612902565b516114ea8389612902565b51600854604083015183516020808601519495946001600160a01b03938416949193909291811691168761151d88612ce6565b604051630ce007e360e21b81526001600160a01b0397881660048201529690921660248701526044860193909352606485015283918290816084810103925af1908115611742578491611769575b50600754606084015160208401516001600160a01b039182169392909116803b156117655760405163d2cccc6b60e01b815260048101939093526001600160a01b0393909316602483015260448201529084908290606490829084905af190811561174257849161174d575b50506115ed906020608084015191015190612cd9565b806115fe575b5050506001016114cb565b600854825160608401516001600160a01b039182169392602092849291811691168761162988612ce6565b604051630ce007e360e21b81526001600160a01b0398891660048201529790921660248801526044870193909352606486015284918290816084810103925af1918215611742578492611706575b506007546060909301516001600160a01b039081169316803b156117025760405163d2cccc6b60e01b815260048101939093526001600160a01b0393909316602483015260448201529082908290606490829084905af180156116f7576116df575b806115f3565b6116e890611f56565b6116f35787896116d9565b8780fd5b6040513d84823e3d90fd5b8480fd5b935090506020833d60201161173a575b8161172360209383611feb565b81010312611735578a9251908c611677565b600080fd5b3d9150611716565b6040513d86823e3d90fd5b61175690611f56565b61176157828c6115d7565b8280fd5b8680fd5b9350506020833d602011611796575b8161178560209383611feb565b81010312611735578a92518c61156b565b3d9150611778565b50909195939294611284565b604051632a9e6ccb60e01b8152600490fd5b50855115610e47565b634e487b7160e01b600052601160045260246000fd5b50600092610e3e565b604051632e20ca4560e01b8152600490fd5b634e487b7160e01b84526011600452602484fd5b5082916109ec565b508351156109be565b503461021a57602036600319011261021a57611835611f2c565b61183d612c74565b60018060a01b03166001600160601b0360a01b600754161760075580f35b503461021a57602036600319011261021a57611875611f2c565b61187d612c74565b6001600160a01b0316808252600260205260408220805460ff191660011790557fbe76910e8b2c281b0804711394e090e9264ed06046f0067f20b2fdeb93d9110e8280a280f35b503461021a578060031936011261021a576118dd612c74565b600080546001600160a01b0319811682556001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b503461021a57610317611938611933366122dc565b612916565b60405191829160208352602083019061270f565b503461021a5761195b366121ab565b8051338352600260205260ff60408420541615611e755780516001600160a01b03168352600360205260408084205490820180519093911015611e635760208201514211611e51576119ac816129f7565b15611e3f576119ba82612ce6565b92838552600660205260ff604086205416600781101561055d57611e26576007546001600160a01b0316803b15611e225785604051809263bcbfb49160e01b825287600483015260406024830152818381611a18604482018a61276c565b03925af18015611e1757611e04575b505160018060a01b03835116855260036020526040852055828452600560205260408420815160018060a01b038151166001600160601b0360a01b90818454161783556020820151600184015560408201516002840155600383019060018060a01b03606084015116908254161790556080810151600483015560a060058301910151908151908151916001600160401b038311611df057600160401b8311611df057602090611adc848454818655856127e1565b0190885260208820885b838110611dd3575050505060208101518051906001600160401b038211611dbf57600160401b8211611dbf5760068401805483825560209291611b2a9185916127e1565b0160068401885260208820885b838110611dab5750505050604081015190600382101561057157606060078401549101516004811015611d9757916020939160ff61ff00600895861b1692169061ffff191617176007820155019101518051906001600160401b038211611d83578190611ba48454612813565b601f8111611d48575b50602090601f8311600114611ce4578792611cd9575b50508160011b916000199060031b1c19161790555b818352600660209081526040808520805460ff1916600117905582516001600160a01b0316855260049091528320805490600160401b821015611cc55760018201808255821015611cb15790602085859382975220015560018060a01b03815116827ffd3c2aec7f598e494994754ba295217e1c73731df3f9d877adadc3a3b7c087c660018060a01b036060850151169360a0608082015191015190611ca6888351930151611c98604051948594855260608c860152606085019061284d565b9083820360408501526125f3565b0390a4604051908152f35b634e487b7160e01b85526032600452602485fd5b634e487b7160e01b85526041600452602485fd5b015190503880611bc3565b848852602088209250601f198416885b818110611d305750908460019594939210611d17575b505050811b019055611bd8565b015160001960f88460031b161c19169055388080611d0a565b92936020600181928786015181550195019301611cf4565b611d739085895260208920601f850160051c81019160208610611d79575b601f0160051c01906127ca565b38611bad565b9091508190611d66565b634e487b7160e01b86526041600452602486fd5b634e487b7160e01b88526021600452602488fd5b600190602084519401938184015501611b37565b634e487b7160e01b88526041600452602488fd5b82516001600160a01b031681830155602090920191600101611ae6565b634e487b7160e01b89526041600452602489fd5b611e1090959195611f56565b9338611a27565b6040513d88823e3d90fd5b8580fd5b60405163f2cbd35160e01b815260048101859052602490fd5b604051635d0d35d960e11b8152600490fd5b604051636d0f7cf160e01b8152600490fd5b604051630aa0fa6560e31b8152600490fd5b604051631c5a614360e11b8152600490fd5b503461021a57602036600319011261021a57611ea1611f2c565b611ea9612c74565b60018060a01b03166001600160601b0360a01b600854161760085580f35b503461021a578060031936011261021a576008546040516001600160a01b039091168152602090f35b9050346102165760203660031901126102165760209160ff906040906001600160a01b03611f1c611f2c565b1681526001855220541615158152f35b600435906001600160a01b038216820361173557565b35906001600160a01b038216820361173557565b6001600160401b038111611f6957604052565b634e487b7160e01b600052604160045260246000fd5b604081019081106001600160401b03821117611f6957604052565b60c081019081106001600160401b03821117611f6957604052565b608081019081106001600160401b03821117611f6957604052565b60a081019081106001600160401b03821117611f6957604052565b90601f801991011681019081106001600160401b03821117611f6957604052565b6001600160401b038111611f695760051b60200190565b91909160c08184031261173557604080519061203e82611f9a565b819461204984611f42565b83526020908185013582850152828501358385015261206a60608601611f42565b60608501526080850135608085015260a08501356001600160401b0395868211611735570191608083830312611735578351956120a687611fb5565b833581811161173557840183601f82011215611735578035906120c88261200c565b916120d588519384611feb565b808352848084019160051b830101918683116117355785809101915b83831061219357505050508752818401359081116117355783019180601f840112156117355782356121228161200c565b9361212f87519586611feb565b818552838086019260051b8201019283116117355783809101915b83831061218357505050508501528181013560038110156117355760609285015201359060048210156117355760a09160608401520152565b823581529181019184910161214a565b819061219e84611f42565b81520191019085906120f1565b6003199060208183011261173557600435916001600160401b039081841161173557604090848403011261173557604051926121e684611f7f565b80600401358281116117355783600461220192840101612023565b8452602481013590828211611735570182602382011215611735576004810135918211611f695760405192612240601f8401601f191660200185611feb565b8284526024838301011161173557816000926024602093018386013783010152602082015290565b9080601f830112156117355760209082356122828161200c565b936122906040519586611feb565b81855260208086019260051b82010192831161173557602001905b8282106122b9575050505090565b813581529083019083016122ab565b35906001600160401b038216820361173557565b60206003199181838201126117355760048035926001600160401b03948585116117355760a09085850301126117355760409283519561231b87611fd0565b8584013581811161173557828561233492890101612268565b8752602495868101358281116117355781018360238201121561173557858101359061235f8261200c565b9161236c89519384611feb565b808352898784019160051b83010191868311611735578a8101915b8383106125ce5750505050848901526044810135828111611735578101836023820112156117355785810135906123bd8261200c565b916123ca89519384611feb565b808352898784019160071b83010191868311611735578a01905b82821061257e57505050868901526064810135828111611735578101836023820112156117355785810135906124198261200c565b9161242689519384611feb565b808352898784019160071b83010191868311611735578a01905b8282106124ec57505050606089015260848101359182116117355701928160238501121561173557830135906124758261200c565b9561248286519788611feb565b828752808488019360061b860101948286116117355701915b8483106124b057505050505050608082015290565b85838303126117355783869182516124c781611f7f565b6124d0866122c8565b81526124dd8387016122c8565b8382015281520192019161249b565b81870360808112611735578a51916060918284018481108a821117612569578d528c90612518866122c8565b8552601f190112611735578b519261252f84611f7f565b8a850135926002841015611735578461254f8f8e966080985288016122c8565b85820152848301528501358d820152815201910190612440565b634e487b7160e01b600090815260418e528f90fd5b60808288031261173557876080918b5161259781611fb5565b6125a085611f42565b815282850135838201526125b58d8601611f42565b8d820152606080860135908201528152019101906123e4565b82358781116117355789916125e88a8f8594870101612023565b815201920191612387565b90815180825260208080930193019160005b828110612613575050505090565b835185529381019392810192600101612605565b9060038210156111a35752565b9060048210156111a35752565b9060018060a01b0380835116825260a06020938481015185850152604081015160408501528260608201511660608501526080810151608085015201519260c060a0840152610140830191845192608060c086015283518091528261016086019401916000905b8282106126f6575050505060606126d56126f394936101209387015160bf198683030160e08701526125f3565b946126e96040820151610100860190612627565b0151910190612634565b90565b83518116865294840194928401926001909101906126a8565b90808251908181526020809101926020808460051b8301019501936000915b84831061273e5750505050505090565b909192939495848061275c600193601f198682030187528a51612641565b980193019301919493929061272e565b906127808251604083526040830190612641565b9060208093015190838184039101528051908183528360005b8381106127b65750600091508284010152601f8019910116010190565b818184010151828287010152018490612799565b8181106127d5575050565b600081556001016127ca565b918181106127ee57505050565b61280492600052602060002091820191016127ca565b565b5160048110156111a35790565b90600182811c92168015612843575b602083101461282d57565b634e487b7160e01b600052602260045260246000fd5b91607f1691612822565b90815180825260208080930193019160005b82811061286d575050505090565b83516001600160a01b03168552938101939281019260010161285f565b6040519061289782611f9a565b8160a0600091828152826020820152826040820152826060820152826080820152604051926128c584611fb5565b606084526060602085015280604085015260608401520152565b8051156128ec5760200190565b634e487b7160e01b600052603260045260246000fd5b80518210156128ec5760209160051b010190565b8051516129228161200c565b926040916129336040519586611feb565b808552612942601f199161200c565b0160005b8181106129e057505060005b835180518210156129d8578161296791612902565b5161297181612a7f565b80519091906001600160a01b0316156129c15750436020820151106129b0579060019161299e8288612902565b526129a98187612902565b5001612952565b8351636d0f7cf160e01b8152600490fd5b602490855190630694b4cd60e01b82526004820152fd5b509092505050565b6020906129eb61288a565b82828901015201612946565b60208151910190604182515103612a3a57612a20612a2892612a1883612ce6565b905190612eb9565b929092612ef1565b516001600160a01b0391821691161490565b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606490fd5b612a8761288a565b5060009081526020906005825260409182822092805193612aa785611f7f565b815190612ab382611f9a565b80546001600160a01b039081168352600182810154868501526002830154858501526003830154821660608501526004830154608085015284519093916005840190612afe83611fb5565b8651809283918a82549182815201918c528a8c20938c905b8a8d848410612c59575050505050612b3092500382611feb565b81526006830185518082898294549384815201908b52898b20928b5b898c838310612c445750505050612b6592500382611feb565b86820152600783015460ff81166003811015610988578287015260081c60ff166004811015611d9757906008939291606082015260a0820152875201915193849181845494612bb386612813565b95868652878482169182600014612c20575050600114612be4575b505050612bdd92500383611feb565b8201525190565b869350819291528282205b858310612c08575050612bdd9350820101388080612bce565b80548389018501528794508693909201918101612bef565b935094505050612bdd94915060ff191682840152151560051b820101388080612bce565b86548552958101958795509093019201612b4c565b87548316865296810196889650909401939190910190612b16565b6000546001600160a01b03163303612c8857565b606460405162461bcd60e51b815260206004820152602060248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152fd5b919082018092116117c557565b919082039182116117c557565b6040908151602081017fc2f8787176b8ac6bf7215b4adcc1e069bf4ab82d9ab1df05a57a91d425935b6e81527fcc666ac7a1ca8af23b2634c33ecbdff8f3eb4852645b1d202a934fe06fb40e24848301527f06c015bd22b4c69690933c1058878ebdfef31f9aaae40bbe86d8a09fe1b2972c60608301526080914683820152828152612d7181611fd0565b5190209260018060a01b0391828451169360208101519383820151906060830151169060a084840151930180518051918760208301519201519160038310156111a3578793612dec93612e138b93612e0a612dff612dd56060612e1f995101612806565b928751998a97602089019c8d5260a089019061284d565b90601f19988989840301908901526125f3565b936060860190612627565b8b840190612634565b03908101835282611feb565b5190209385519660208801987f7aac4fcb675e298cee0ad89f8a61fc9a0b76be089c7ef7219b1b017eca9e2abc8a5287890152606088015286015260a085015260c084015260e083015260e082526101008201928284106001600160401b03851117611f6957836101429252825190209161012081019461190160f01b8652610122820152015260428152612eb381611fb5565b51902090565b906041815114600014612ee757612ee3916020820151906060604084015193015160001a90612ff5565b9091565b5050600090600290565b60058110156111a35780612f025750565b60018103612f4f5760405162461bcd60e51b815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152606490fd5b60028103612f9c5760405162461bcd60e51b815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606490fd5b600314612fa557565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c604482015261756560f01b6064820152608490fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a083116130785791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa1561306b5781516001600160a01b03811615613065579190565b50600190565b50604051903d90823e3d90fd5b5050505060009060039056fea26469706673582212202cbe539ed136fa1ffda8d17003814addf18eeaed8d9cf2e994019bfdf1b8e93664736f6c63430008190033")]
    contract ArcadiaIntentBook {}

    #[sol(rpc, bytecode = "0x608080604052600436101561001357600080fd5b60003560e01c90816306fdde031461120457508063095ea7b3146111de57806315e724cd146111c457806318160ddd146111a657806323b872dd1461116e5780632b1250651461113b578063313ce5671461111f57806339509351146110ce5780633e7ed2d41461106c57806340c10f191461101657806342966c6814610f145780634be7bde214610ee85780635db323b614610e8357806363de154614610e5757806370a0823114610e13578063715018a614610db657806379cc679014610c965780637aab7a3c14610c4a5780638aad976914610be65780638da5cb5b14610bbd578063933851e814610b8957806395d89b4114610a82578063a42c99c614610461578063a457c2d7146103ba578063a9059cbb14610394578063dd62ed3e14610343578063e2f3d881146102de578063f2fde38b1461021a578063fb7ff618146101a25763fba153051461016957600080fd5b3461019d57602036600319011261019d576004356000526009602052602060018060a01b0360406000205416604051908152f35b600080fd5b3461019d5761020f6101b33661134a565b9180600052600a6020526101d560018060a01b03604060002054163314611474565b8060005260086020526101ef8360406000205410156113ac565b600052600860205260406000206102078382546113f8565b90553061161a565b602060405160018152f35b3461019d57602036600319011261019d5761023361130a565b61023b6115c2565b6001600160a01b0390811690811561028a57600554826001600160601b0360a01b821617600555167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3005b60405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608490fd5b3461019d57604036600319011261019d576004356102fa611320565b9080600052600960205260018060a01b039061031e8260406000205416331461141b565b6000526009602052604060002091166001600160601b0360a01b825416179055600080f35b3461019d57604036600319011261019d5761035c61130a565b610364611320565b9060018060a01b038091166000526001602052604060002091166000526020526020604060002054604051908152f35b3461019d57604036600319011261019d5761020f6103b061130a565b602435903361161a565b3461019d57604036600319011261019d576103d361130a565b60243590336000526001602052604060002060018060a01b0382166000526020526040600020549180831061040e5761020f920390336114c0565b60405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b6064820152608490fd5b3461019d5760031960603682011261019d5761047b611320565b906001600160401b036044351161019d576040816044353603011261019d57604051908160408101106001600160401b036040840111176109ea57604435600401356001600160401b03811161019d576044350160c082823603011261019d5761010083016040840181106001600160401b038211176109ea5760405261050460048201611336565b6040840152602481013560608401526044810135608084015261052960648201611336565b60a0840152608481013560c084015260a4810135916001600160401b03831161019d576080908383013603011261019d5760405191608083018381106001600160401b038211176109ea57604052600481830101356001600160401b03811161019d57818301013660238201121561019d5760048101356105a981611395565b916105b76040519384611374565b81835260208301903660248460051b8301011161019d579060248201915b60248460051b8201018310610a6657505050508352602481830101356001600160401b03811161019d57366023828486010101121561019d5760048183850101013561062081611395565b9161062e6040519384611374565b81835260208301903660248460051b83888a010101011161019d57906024828688010101915b60248460051b82888a010101018310610a51575050505060208401526044818301013591600383101561019d576064926040850152010135600481101561019d57606082015260e0820152604081018152602460443501356001600160401b03811161019d57604435013660238201121561019d5760048101356001600160401b0381116109ea57604051916106f4601f8301601f191660200184611374565b818352366024838301011161019d578160009260246020930183860137830101526020820152805190604051602081017fc2f8787176b8ac6bf7215b4adcc1e069bf4ab82d9ab1df05a57a91d425935b6e81527fcc666ac7a1ca8af23b2634c33ecbdff8f3eb4852645b1d202a934fe06fb40e2460408301527f06c015bd22b4c69690933c1058878ebdfef31f9aaae40bbe86d8a09fe1b2972c6060830152466080830152608082528160a08101106001600160401b0360a0840111176109ea5760a08201604052815190209160018060a01b038451166020850151604086015160018060a01b0360608801511660808801519060a089015196875197604060208201519101516003811015610a3b57606060a08d015101519960048b1015610a3b579183916101408301608060c085015284518091526020610160850195019060005b818110610a195750505060bf198385030160e08401526020808351958681520192019360005b818110610a0057505061089293506101008301526101209a8b8301520360bf19810160a0840152609f190160a08301611374565b60c060a0820151910120926040519460208601967f7aac4fcb675e298cee0ad89f8a61fc9a0b76be089c7ef7219b1b017eca9e2abc885260408701526060860152608085015260a084015260c083015260e082015260e081526101008101938185106001600160401b038611176109ea576101809285604052825190209082019561190160f01b875261012283015261014282015260428452018281106001600160401b038211176109ea5761096093610958936020926040525190209101519061189f565b9190916118d7565b81516001600160a01b039081169116036109d85780516001600160a01b0316600090815260066020526040902060010154916080820151928381106109ba578251608084015161020f9184906001600160a01b031661161a565b604490846040519163cf47918160e01b835260048301526024820152fd5b604051638baa579f60e01b8152600490fd5b634e487b7160e01b600052604160045260246000fd5b855184526020958601958795509093019260010161085e565b82516001600160a01b0316875260209687019688965090920191600101610838565b634e487b7160e01b600052602160045260246000fd5b60208060249385358152019301929150610654565b602080602493610a7586611336565b81520193019291506105d5565b3461019d57600036600319011261019d5760405160009060045460018160011c9060018316928315610b7f575b6020938484108114610b6957838652908115610b495750600114610aee575b610aea84610ade81880382611374565b604051918291826112c1565b0390f35b600460009081529294507f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b5b828410610b365750505081610aea93610ade9282010193610ace565b8054858501870152928501928101610b1a565b60ff1916858501525050151560051b8201019150610ade81610aea610ace565b634e487b7160e01b600052602260045260246000fd5b91607f1691610aaf565b3461019d57602036600319011261019d57600435600052600a602052602060018060a01b0360406000205416604051908152f35b3461019d57600036600319011261019d576005546040516001600160a01b039091168152602090f35b3461019d57610c48610bf73661134a565b91610c006115c2565b8060005260086020526040600020610c19848254611467565b9055600052600a60205260406000209060018060a01b03166001600160601b0360a01b8254161790553061180e565b005b3461019d57610c48610c5b3661134a565b91610c646115c2565b806000526007602052610c7e8360406000205410156113ac565b600052600760205260406000206102078382546113f8565b3461019d57604036600319011261019d57610caf61130a565b60243590610cbe823383611776565b6001600160a01b03168015610d675780600052600060205260406000205491808310610d1757602081600080516020611a6b833981519152926000958587528684520360408620558060025403600255604051908152a3005b60405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608490fd5b60405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608490fd5b3461019d57600036600319011261019d57610dcf6115c2565b600580546001600160a01b031981169091556000906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a3005b3461019d57602036600319011261019d576020610e4f610e3161130a565b6001600160a01b031660009081526006602052604090206001015490565b604051908152f35b3461019d57602036600319011261019d5760043560005260086020526020604060002054604051908152f35b3461019d57604036600319011261019d57600435610e9f611320565b9080600052600a60205260018060a01b0390610ec382604060002054163314611474565b600052600a602052604060002091166001600160601b0360a01b825416179055600080f35b3461019d57602036600319011261019d5760043560005260076020526020604060002054604051908152f35b3461019d5760208060031936011261019d576004353315610fc7573360005260008252604060002054818110610f775760009282600080516020611a6b8339815191529233865285835203604085205582600254036002556040519283523392a3005b60405162461bcd60e51b815260048101849052602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608490fd5b60405162461bcd60e51b815260048101839052602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608490fd5b3461019d57604036600319011261019d5761102f61130a565b6024359061103b6115c2565b611045828261180e565b60018060a01b031660005260066020526110686001604060002001918254611467565b9055005b3461019d57610c4861107d3661134a565b916110866115c2565b806000526007602052604060002061109f848254611467565b9055600052600960205260406000209060018060a01b03166001600160601b0360a01b8254161790553061180e565b3461019d57604036600319011261019d5761020f6110ea61130a565b336000526001602052604060002060018060a01b038216600052602052611118602435604060002054611467565b90336114c0565b3461019d57600036600319011261019d57602060405160128152f35b3461019d5761020f61114c3661134a565b91806000526009602052610c6460018060a01b0360406000205416331461141b565b3461019d57606036600319011261019d5761020f61118a61130a565b611192611320565b604435916111a1833383611776565b61161a565b3461019d57600036600319011261019d576020600254604051908152f35b3461019d57610c486111d53661134a565b916101d56115c2565b3461019d57604036600319011261019d5761020f6111fa61130a565b60243590336114c0565b3461019d57600036600319011261019d5760009060035460018160011c90600183169283156112b7575b6020938484108114610b6957838652908115610b49575060011461125c57610aea84610ade81880382611374565b600360009081529294507fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b5b8284106112a45750505081610aea93610ade9282010193610ace565b8054858501870152928501928101611288565b91607f169161122e565b6020808252825181830181905290939260005b8281106112f657505060409293506000838284010152601f8019910116010190565b8181018601518482016040015285016112d4565b600435906001600160a01b038216820361019d57565b602435906001600160a01b038216820361019d57565b35906001600160a01b038216820361019d57565b606090600319011261019d57600435906024356001600160a01b038116810361019d579060443590565b90601f801991011681019081106001600160401b038211176109ea57604052565b6001600160401b0381116109ea5760051b60200190565b156113b357565b60405162461bcd60e51b815260206004820152601c60248201527f4d546f6b656e3a20696e73756666696369656e742062616c616e6365000000006044820152606490fd5b9190820391821161140557565b634e487b7160e01b600052601160045260246000fd5b1561142257565b60405162461bcd60e51b815260206004820152601860248201527f4d546f6b656e3a206e6f7420696e74656e74206f776e657200000000000000006044820152606490fd5b9190820180921161140557565b1561147b57565b60405162461bcd60e51b815260206004820152601960248201527f4d546f6b656e3a206e6f742072656365697074206f776e6572000000000000006044820152606490fd5b6001600160a01b0390811691821561157157169182156115215760207f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925918360005260018252604060002085600052825280604060002055604051908152a3565b60405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b6064820152608490fd5b60405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b6064820152608490fd5b6005546001600160a01b031633036115d657565b606460405162461bcd60e51b815260206004820152602060248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152fd5b6001600160a01b0390811691821561172357169182156116d25760008281528060205260408120549180831061167e5760408282600080516020611a6b833981519152958760209652828652038282205586815220818154019055604051908152a3565b60405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b6064820152608490fd5b60405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b6064820152608490fd5b60405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b6064820152608490fd5b9060018060a01b03808316600052600160205260406000209082166000526020526040600020549260001984036117ae575b50505050565b8084106117c9576117c09303916114c0565b388080806117a8565b60405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152606490fd5b6001600160a01b031690811561185a57600080516020611a6b83398151915260208261183e600094600254611467565b60025584845283825260408420818154019055604051908152a3565b60405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606490fd5b9060418151146000146118cd576118c9916020820151906060604084015193015160001a906119db565b9091565b5050600090600290565b6005811015610a3b57806118e85750565b600181036119355760405162461bcd60e51b815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152606490fd5b600281036119825760405162461bcd60e51b815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606490fd5b60031461198b57565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c604482015261756560f01b6064820152608490fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311611a5e5791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa15611a515781516001600160a01b03811615611a4b579190565b50600190565b50604051903d90823e3d90fd5b5050505060009060039056feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa26469706673582212205c197e3742569f6848538830856935ae6258dd50b496ec063d4f7f3abf47975b64736f6c63430008190033")]
    contract ArcadiaMToken {}

    #[sol(rpc, bytecode = "0x6080604081815260048036101561001557600080fd5b600092833560e01c9081630314d47b146114b157508063083a23da14611374578063124a082e1461133457806312b68c48146111d75780632ff71a691461119757806339d9c0911461111757806346229bd31461109c578063475ae039146110365780634be7bde21461100c5780635f710f5c14610fa3578063715018a614610f49578063842392c214610f0b5780638d4994c914610d835780638da5cb5b14610d5b57806396339a9214610be2578063b1439c1814610b42578063b9f7f53f14610950578063bcbfb491146104d5578063c9afa845146102c8578063d2cccc6b146101d45763f2fde38b1461010a57600080fd5b346101d05760203660031901126101d057610123611754565b9061012c61193c565b6001600160a01b0391821692831561017e575050600054826001600160601b0360a01b821617600055167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a380f35b906020608492519162461bcd60e51b8352820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152fd5b8280fd5b508290346102c4576101e536611794565b6002546001600160a01b0396939290871633036102b457861695868652846020528386208460ff815192610218846116e6565b5493841693848452818160a01c161515602085015260a81c161515910152156102a5578585963b156102a1578351638aad976960e01b81529485019283523060208401526040830191909152849184919082908490829060600103925af190811561029857506102855750f35b61028e9061171e565b6102955780f35b80fd5b513d84823e3d90fd5b8580fd5b5050516373fbd73160e11b8152fd5b50505051637898c0c360e01b8152fd5b5080fd5b509190346102c4576102d9366117be565b9291949060018060a01b0380911693848652602094838652848720855190610300826116e6565b549084821680825260ff888a840193828660a01c1615158552019360a81c1615158352156104c557516104b557516104a55782881680885260058752858820826000528752828660002054106104955787988651908483857f2be8283c5bed2521712c9f922bdd431289545e613e38826396c87007294637568d80a4833b156104915763079cc67960e41b82526001600160a01b031686820190815260208101859052899082908190604001038183875af180156104875790899161046f575b5081905260058752858820826000528752856000206103e0848254611870565b9055855196870152848601526060850152606084526103fe846116b4565b6003541692833b1561046b576104329383868094825197889586948593639c2a432f60e01b855284015260448301906118b8565b7f959e392199cfec3e68ecfbe801f2f9d1a24f274672d39eb4ab6e0079938e6fab602483015203925af190811561029857506102855750f35b8480fd5b6104789061171e565b6104835787386103c0565b8780fd5b87513d8b823e3d90fd5b8980fd5b855163247ae00760e21b81528590fd5b8451638174a42560e01b81528490fd5b855163bfd52e1d60e01b81528590fd5b86516373fbd73160e11b81528690fd5b50346101d05760031990828236011261094c57602480359267ffffffffffffffff8085116108fc57858286360301126108fc5785519461051486611702565b808501358281116109485781019260c08185360301126109485787519060c082018281108582111761093457895261054d878601611780565b8252602094868101358684015260448101358a84015261056f60648201611780565b60608401526084810135608084015260a48101358581116109045760809101918236030112610491578851906105a4826116b4565b87810135858111610904578101366023820112156109045788810135906105ca82611858565b916105d78d519384611732565b808352898984019160051b83010191368311610918578a8a9101915b83831061091c57505050508252868101358581116109045781013660238201121561090457888101359061062682611858565b916106338d519384611732565b808352898984019160051b83010191368311610918578a8a9101915b83831061090857509150508301526044810135906003821015610904576064918b84015201358781101561090057606082015260a08201528652838101359182116104835701366023820112156108fc576106b2903690848682013591016117f3565b818501908152845194606086019160018060a01b0394858451168a52868552888a208951906106e0826116e6565b54908a60ff89841693848452818160a01c1615158a85015260a81c161515910152156108ec57858451169160a08a51946352164ce360e11b865289358a870152308487015260606044870152518b60648701528881511660a48701528781015160c48701528b81015160e487015288606082015116610104870152608081015161012487015201519160c06101448601526101e48501928c815194608061016489015285518091528961020489019601915b8a8c8383106108d7575084015189880361016319016101848b01528051808952978c0197908c01935091508f90505b8a8282106108c357505050508b81015160038110156108b1576101a48701526060015190898210156108a057508b8561081281958a979583956101c4850152516063198483030160848501526118b8565b03925af180156108965784600693600198999593608093610869575b5051169701519483519761084189611702565b8852818801958652358852528520935184546001600160a01b03191691161783555191015580f35b61088890853d871161088f575b6108808183611732565b8101906118a0565b503861082e565b503d610876565b87513d8a823e3d90fd5b634e487b7160e01b8d5260218a528cfd5b634e487b7160e01b8e5260218b52828efd5b8351885296870196909201916001016107c1565b84511688529687019690920191600101610792565b88516373fbd73160e11b81528790fd5b8680fd5b8a80fd5b8b80fd5b82358152918101918a910161064f565b8e80fd5b819061092784611780565b81520191019089906105f3565b86604189634e487b7160e01b600052526000fd5b8880fd5b8380fd5b5090346101d05760803660031901126101d0576024356001600160a01b0381811693803592859003610b3d5761098461176a565b926064359383600254163303610b2d578316928388526020968388528689208751906109af826116e6565b549083821680825260ff8a8c840193828660a01c1615158552019360a81c161515835215610b1d5751610b0d5751610afd578089526005885286892085600052885285876000205410610aed578289526006885281878a205416610add57879492610aa3979694928a9283526005875287832085600052875287600020610a37878254611870565b90556001885191610a4783611702565b86835288830188815284865260068a528a8620935184546001600160a01b0319169216919091178355519101558651632b12506560e01b8152928301908152306020820152604081019490945290958693849291839160600190565b03925af1908115610ad45750610ab7578280f35b81610acd92903d1061088f576108808183611732565b5038808280f35b513d85823e3d90fd5b865163146eb6c160e01b81528490fd5b865163247ae00760e21b81528490fd5b8651638174a42560e01b81528490fd5b875163bfd52e1d60e01b81528590fd5b88516373fbd73160e11b81528690fd5b8551637898c0c360e01b81528390fd5b600080fd5b5090346101d05760203660031901126101d057610b5d611754565b610b6561193c565b60018060a01b03809116928385528060205282852092835492831615610bd55760ff8360a81c16610bc857505060ff60a01b1916600160a01b1790557f282f4fdc052af684669c9b7d9e78a869e3f81a3b2182f6fcd2cbb5ed3207fce68280a280f35b51638174a42560e01b8152fd5b5163188be25560e11b8152fd5b5090346101d057610bf236611794565b919260018060a01b038092169485875280602052818720825190610c15826116e6565b549084821680825260ff856020840193828660a01c1615158552019360a81c161515835215610d4b5751610d3c5751610d2e57338752600760205260ff828820541615610d2057815187918530897fae352c54805b52ed43303062898a0acba9686101347fee7dcd2cfdb82d113fd88680a4873b156101d057630f9fb4b560e21b82528101868152306020820152604081018690528290829081906060010381838b5af18015610d1657610d02575b5050600193815195610cd587611702565b8652602086019384528652600660205285209351166001600160601b0360a01b8454161783555191015580f35b610d0b9061171e565b6102a1578538610cc4565b83513d84823e3d90fd5b9051637898c0c360e01b8152fd5b9051638174a42560e01b8152fd5b50905163bfd52e1d60e01b8152fd5b83516373fbd73160e11b81528390fd5b5050346102c457816003193601126102c457905490516001600160a01b039091168152602090f35b509190346102c45760803660031901126102c45767ffffffffffffffff833581811161094c57610db6903690860161183a565b60243582811161046b57610dcd903690870161183a565b91610dd661176a565b6064359163ffffffff831683036108fc57610def61193c565b855190611ebe80830191821183831017610ef857848488888695610e179561199588396118f8565b039087f08015610eee576001600160a01b039081168088526020899052868820549097908216610ede57927f3215760d6245a94a9e09852a311aa644934ef4f41594bf1b3b32881763a0f5c29492610ed59289979560209b8a5192610e7b846116e6565b8a84528d84018381528c85018481528c8552602093909352928c902093518454935192516001600160b01b031990941691161790151560a01b60ff60a01b161790151560a81b60ff60a81b161790558751948594856118f8565b0390a251908152f35b8651636549310960e11b81528990fd5b85513d88823e3d90fd5b634e487b7160e01b895260418a52602489fd5b5050346102c45760203660031901126102c45760209160ff9082906001600160a01b03610f36611754565b1681526007855220541690519015158152f35b8334610295578060031936011261029557610f6261193c565b600080546001600160a01b0319811682556001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b5050346102c45760203660031901126102c457610fbe611754565b610fc661193c565b6001600160a01b03168083526007602052908220805460ff191660011790557fe6be4d6cc04eb0219337b22db08c688969a9ec8e34d9a0a2ba38a114e050f1ae8280a280f35b50346101d05760203660031901126101d05781602093600192358152600685522001549051908152f35b5050346102c45760203660031901126102c457611051611754565b61105961193c565b6001600160a01b03168083526007602052908220805460ff191690557fc6711413797b8a562634e98c95d50e7619d39702ed5b82ce335dc93546c3a88c8280a280f35b5090346101d05760203660031901126101d0576110b7611754565b6110bf61193c565b60018060a01b03809116928385528060205282852092835492831615610bd557505060ff60a81b1916600160a81b1790557f5b37e6c856c4f90cc57bea77cd24cb937c781da89551ca29385efbc5198754fb8280a280f35b5090346101d05760203660031901126101d057611132611754565b61113a61193c565b60018060a01b03809116928385528060205282852092835492831615610bd55760ff8360a81c16610bc857505060ff60a01b191690557f036e969f356e1ab47ec699f68cf89edaa2eb3ed1a26969b141abf655ee09de678280a280f35b8334610295576020366003190112610295576111b1611754565b6111b961193c565b60018060a01b03166001600160601b0360a01b600154161760015580f35b50346101d0576111e6366117be565b939160018060a01b038092169182875284602052838720845190611209826116e6565b549082821680825260ff876020840193828660a01c1615158552019360a81c1615158352156113245751611314575161130457338752600760205260ff8488205416156102b45783519082169487928787867fae352c54805b52ed43303062898a0acba9686101347fee7dcd2cfdb82d113fd88780a4843b1561094c576340c10f1960e01b83526001600160a01b031690820190815260208101879052829082908190604001038183875af180156112fa576112e6575b50926112e19352600560205281852090600052602052600020918254611893565b905580f35b6112ef9061171e565b61046b5784386112c0565b84513d84823e3d90fd5b50505051638174a42560e01b8152fd5b845163bfd52e1d60e01b81528690fd5b85516373fbd73160e11b81528790fd5b83346102955760203660031901126102955761134e611754565b61135661193c565b60018060a01b03166001600160601b0360a01b600254161760025580f35b509190346102c45761138536611794565b92919460018060a01b0380921691828652816020528386208451906113a9826116e6565b5491821680825260ff866020840193828660a01c1615158552019360a81c1615158352156114a157516114925751611484578251908487847fae352c54805b52ed43303062898a0acba9686101347fee7dcd2cfdb82d113fd88980a4823b156102a157638aad976960e01b8252810186815230602082015260408101859052859082908190606001038183865af1801561147a57611465575b5083946112e1939452600560205281852090600052602052600020918254611893565b936114736112e1949561171e565b9392611442565b83513d87823e3d90fd5b8251638174a42560e01b8152fd5b50825163bfd52e1d60e01b8152fd5b84516373fbd73160e11b81528390fd5b9290503461094c57608036600319011261094c576114ce836116b4565b6114d6611754565b83526020928381019060243582526114ec61176a565b8184019081526064356060830190815260015490926001600160a01b0391821633036116a45781815116895286885285892086519061152a826116e6565b549083821680825260ff898c840193828660a01c1615158552019360a81c16151583521561169457516116845751611674578351895260068852858920600187519161157583611702565b8481541683520154908981019180835287511161166457839051168383511603611654579180828a9796959460016115b5848f97511692518a5190611870565b8b51926115c184611702565b83528a83019081528851875260068b52848c88209351166001600160601b0360a01b8454161783555191015586518286511685526005895289852083835116865289526116128a8620918254611893565b905551169351925116935196610aa3875198899687958694631f6ffec360e31b865285016040919493926060820195825260018060a01b031660208201520152565b865163bef44b5960e01b81528890fd5b8751631613d3e960e01b81528990fd5b8551638174a42560e01b81528790fd5b865163bfd52e1d60e01b81528890fd5b87516373fbd73160e11b81528990fd5b8551637898c0c360e01b81528790fd5b6080810190811067ffffffffffffffff8211176116d057604052565b634e487b7160e01b600052604160045260246000fd5b6060810190811067ffffffffffffffff8211176116d057604052565b6040810190811067ffffffffffffffff8211176116d057604052565b67ffffffffffffffff81116116d057604052565b90601f8019910116810190811067ffffffffffffffff8211176116d057604052565b600435906001600160a01b0382168203610b3d57565b604435906001600160a01b0382168203610b3d57565b35906001600160a01b0382168203610b3d57565b6060906003190112610b3d57600435906024356001600160a01b0381168103610b3d579060443590565b6060906003190112610b3d576001600160a01b03906004358281168103610b3d57916024359081168103610b3d579060443590565b92919267ffffffffffffffff82116116d0576040519161181d601f8201601f191660200184611732565b829481845281830111610b3d578281602093846000960137010152565b9080601f83011215610b3d57816020611855933591016117f3565b90565b67ffffffffffffffff81116116d05760051b60200190565b9190820391821161187d57565b634e487b7160e01b600052601160045260246000fd5b9190820180921161187d57565b90816020910312610b3d57518015158103610b3d5790565b919082519283825260005b8481106118e4575050826000602080949584010152601f8019910116010190565b6020818301810151848301820152016118c3565b92949361192660609361191863ffffffff946080885260808801906118b8565b9086820360208801526118b8565b6001600160a01b03909616604085015216910152565b6000546001600160a01b0316330361195057565b606460405162461bcd60e51b815260206004820152602060248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152fdfe60c06040523461036857611ebe803803806100198161036d565b92833981016080828203126103685781516001600160401b03908181116103685782610046918501610392565b91602090818501519083821161036857610061918601610392565b60408501516001600160a01b0395909390868516850361036857606001519463ffffffff86168603610368578251828111610274576003918254916001958684811c9416801561035e575b88851014610348578190601f948581116102f7575b5088908583116001146102955760009261028a575b505060001982861b1c191690861b1783555b80519384116102745760049586548681811c9116801561026a575b828210146102555783811161020f575b50809285116001146101a6575093839491849260009561019b575b50501b92600019911b1c19161790555b60058054336001600160a01b03198216811790925560405194167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a360805260a052611ac090816103fe823960805181505060a051815050f35b01519350388061012e565b92919084601f1981168860005285600020956000905b898383106101f557505050106101db575b50505050811b01905561013e565b01519060f884600019921b161c19169055388080806101cd565b8587015189559097019694850194889350908101906101bc565b87600052816000208480880160051c82019284891061024c575b0160051c019087905b828110610240575050610113565b60008155018790610232565b92508192610229565b602288634e487b7160e01b6000525260246000fd5b90607f1690610103565b634e487b7160e01b600052604160045260246000fd5b0151905038806100d6565b90889350601f19831691876000528a6000209260005b8c8282106102e157505084116102c9575b505050811b0183556100e8565b015160001983881b60f8161c191690553880806102bc565b8385015186558c979095019493840193016102ab565b90915085600052886000208580850160051c8201928b861061033f575b918a91869594930160051c01915b8281106103305750506100c1565b600081558594508a9101610322565b92508192610314565b634e487b7160e01b600052602260045260246000fd5b93607f16936100ac565b600080fd5b6040519190601f01601f191682016001600160401b0381118382101761027457604052565b919080601f840112156103685782516001600160401b038111610274576020906103c4601f8201601f1916830161036d565b928184528282870101116103685760005b8181106103ea57508260009394955001015290565b85810183015184820184015282016103d556fe608080604052600436101561001357600080fd5b60003560e01c90816306fdde031461120457508063095ea7b3146111de57806315e724cd146111c457806318160ddd146111a657806323b872dd1461116e5780632b1250651461113b578063313ce5671461111f57806339509351146110ce5780633e7ed2d41461106c57806340c10f191461101657806342966c6814610f145780634be7bde214610ee85780635db323b614610e8357806363de154614610e5757806370a0823114610e13578063715018a614610db657806379cc679014610c965780637aab7a3c14610c4a5780638aad976914610be65780638da5cb5b14610bbd578063933851e814610b8957806395d89b4114610a82578063a42c99c614610461578063a457c2d7146103ba578063a9059cbb14610394578063dd62ed3e14610343578063e2f3d881146102de578063f2fde38b1461021a578063fb7ff618146101a25763fba153051461016957600080fd5b3461019d57602036600319011261019d576004356000526009602052602060018060a01b0360406000205416604051908152f35b600080fd5b3461019d5761020f6101b33661134a565b9180600052600a6020526101d560018060a01b03604060002054163314611474565b8060005260086020526101ef8360406000205410156113ac565b600052600860205260406000206102078382546113f8565b90553061161a565b602060405160018152f35b3461019d57602036600319011261019d5761023361130a565b61023b6115c2565b6001600160a01b0390811690811561028a57600554826001600160601b0360a01b821617600555167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3005b60405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608490fd5b3461019d57604036600319011261019d576004356102fa611320565b9080600052600960205260018060a01b039061031e8260406000205416331461141b565b6000526009602052604060002091166001600160601b0360a01b825416179055600080f35b3461019d57604036600319011261019d5761035c61130a565b610364611320565b9060018060a01b038091166000526001602052604060002091166000526020526020604060002054604051908152f35b3461019d57604036600319011261019d5761020f6103b061130a565b602435903361161a565b3461019d57604036600319011261019d576103d361130a565b60243590336000526001602052604060002060018060a01b0382166000526020526040600020549180831061040e5761020f920390336114c0565b60405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b6064820152608490fd5b3461019d5760031960603682011261019d5761047b611320565b906001600160401b036044351161019d576040816044353603011261019d57604051908160408101106001600160401b036040840111176109ea57604435600401356001600160401b03811161019d576044350160c082823603011261019d5761010083016040840181106001600160401b038211176109ea5760405261050460048201611336565b6040840152602481013560608401526044810135608084015261052960648201611336565b60a0840152608481013560c084015260a4810135916001600160401b03831161019d576080908383013603011261019d5760405191608083018381106001600160401b038211176109ea57604052600481830101356001600160401b03811161019d57818301013660238201121561019d5760048101356105a981611395565b916105b76040519384611374565b81835260208301903660248460051b8301011161019d579060248201915b60248460051b8201018310610a6657505050508352602481830101356001600160401b03811161019d57366023828486010101121561019d5760048183850101013561062081611395565b9161062e6040519384611374565b81835260208301903660248460051b83888a010101011161019d57906024828688010101915b60248460051b82888a010101018310610a51575050505060208401526044818301013591600383101561019d576064926040850152010135600481101561019d57606082015260e0820152604081018152602460443501356001600160401b03811161019d57604435013660238201121561019d5760048101356001600160401b0381116109ea57604051916106f4601f8301601f191660200184611374565b818352366024838301011161019d578160009260246020930183860137830101526020820152805190604051602081017fc2f8787176b8ac6bf7215b4adcc1e069bf4ab82d9ab1df05a57a91d425935b6e81527fcc666ac7a1ca8af23b2634c33ecbdff8f3eb4852645b1d202a934fe06fb40e2460408301527f06c015bd22b4c69690933c1058878ebdfef31f9aaae40bbe86d8a09fe1b2972c6060830152466080830152608082528160a08101106001600160401b0360a0840111176109ea5760a08201604052815190209160018060a01b038451166020850151604086015160018060a01b0360608801511660808801519060a089015196875197604060208201519101516003811015610a3b57606060a08d015101519960048b1015610a3b579183916101408301608060c085015284518091526020610160850195019060005b818110610a195750505060bf198385030160e08401526020808351958681520192019360005b818110610a0057505061089293506101008301526101209a8b8301520360bf19810160a0840152609f190160a08301611374565b60c060a0820151910120926040519460208601967f7aac4fcb675e298cee0ad89f8a61fc9a0b76be089c7ef7219b1b017eca9e2abc885260408701526060860152608085015260a084015260c083015260e082015260e081526101008101938185106001600160401b038611176109ea576101809285604052825190209082019561190160f01b875261012283015261014282015260428452018281106001600160401b038211176109ea5761096093610958936020926040525190209101519061189f565b9190916118d7565b81516001600160a01b039081169116036109d85780516001600160a01b0316600090815260066020526040902060010154916080820151928381106109ba578251608084015161020f9184906001600160a01b031661161a565b604490846040519163cf47918160e01b835260048301526024820152fd5b604051638baa579f60e01b8152600490fd5b634e487b7160e01b600052604160045260246000fd5b855184526020958601958795509093019260010161085e565b82516001600160a01b0316875260209687019688965090920191600101610838565b634e487b7160e01b600052602160045260246000fd5b60208060249385358152019301929150610654565b602080602493610a7586611336565b81520193019291506105d5565b3461019d57600036600319011261019d5760405160009060045460018160011c9060018316928315610b7f575b6020938484108114610b6957838652908115610b495750600114610aee575b610aea84610ade81880382611374565b604051918291826112c1565b0390f35b600460009081529294507f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b5b828410610b365750505081610aea93610ade9282010193610ace565b8054858501870152928501928101610b1a565b60ff1916858501525050151560051b8201019150610ade81610aea610ace565b634e487b7160e01b600052602260045260246000fd5b91607f1691610aaf565b3461019d57602036600319011261019d57600435600052600a602052602060018060a01b0360406000205416604051908152f35b3461019d57600036600319011261019d576005546040516001600160a01b039091168152602090f35b3461019d57610c48610bf73661134a565b91610c006115c2565b8060005260086020526040600020610c19848254611467565b9055600052600a60205260406000209060018060a01b03166001600160601b0360a01b8254161790553061180e565b005b3461019d57610c48610c5b3661134a565b91610c646115c2565b806000526007602052610c7e8360406000205410156113ac565b600052600760205260406000206102078382546113f8565b3461019d57604036600319011261019d57610caf61130a565b60243590610cbe823383611776565b6001600160a01b03168015610d675780600052600060205260406000205491808310610d1757602081600080516020611a6b833981519152926000958587528684520360408620558060025403600255604051908152a3005b60405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608490fd5b60405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608490fd5b3461019d57600036600319011261019d57610dcf6115c2565b600580546001600160a01b031981169091556000906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a3005b3461019d57602036600319011261019d576020610e4f610e3161130a565b6001600160a01b031660009081526006602052604090206001015490565b604051908152f35b3461019d57602036600319011261019d5760043560005260086020526020604060002054604051908152f35b3461019d57604036600319011261019d57600435610e9f611320565b9080600052600a60205260018060a01b0390610ec382604060002054163314611474565b600052600a602052604060002091166001600160601b0360a01b825416179055600080f35b3461019d57602036600319011261019d5760043560005260076020526020604060002054604051908152f35b3461019d5760208060031936011261019d576004353315610fc7573360005260008252604060002054818110610f775760009282600080516020611a6b8339815191529233865285835203604085205582600254036002556040519283523392a3005b60405162461bcd60e51b815260048101849052602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608490fd5b60405162461bcd60e51b815260048101839052602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608490fd5b3461019d57604036600319011261019d5761102f61130a565b6024359061103b6115c2565b611045828261180e565b60018060a01b031660005260066020526110686001604060002001918254611467565b9055005b3461019d57610c4861107d3661134a565b916110866115c2565b806000526007602052604060002061109f848254611467565b9055600052600960205260406000209060018060a01b03166001600160601b0360a01b8254161790553061180e565b3461019d57604036600319011261019d5761020f6110ea61130a565b336000526001602052604060002060018060a01b038216600052602052611118602435604060002054611467565b90336114c0565b3461019d57600036600319011261019d57602060405160128152f35b3461019d5761020f61114c3661134a565b91806000526009602052610c6460018060a01b0360406000205416331461141b565b3461019d57606036600319011261019d5761020f61118a61130a565b611192611320565b604435916111a1833383611776565b61161a565b3461019d57600036600319011261019d576020600254604051908152f35b3461019d57610c486111d53661134a565b916101d56115c2565b3461019d57604036600319011261019d5761020f6111fa61130a565b60243590336114c0565b3461019d57600036600319011261019d5760009060035460018160011c90600183169283156112b7575b6020938484108114610b6957838652908115610b49575060011461125c57610aea84610ade81880382611374565b600360009081529294507fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b5b8284106112a45750505081610aea93610ade9282010193610ace565b8054858501870152928501928101611288565b91607f169161122e565b6020808252825181830181905290939260005b8281106112f657505060409293506000838284010152601f8019910116010190565b8181018601518482016040015285016112d4565b600435906001600160a01b038216820361019d57565b602435906001600160a01b038216820361019d57565b35906001600160a01b038216820361019d57565b606090600319011261019d57600435906024356001600160a01b038116810361019d579060443590565b90601f801991011681019081106001600160401b038211176109ea57604052565b6001600160401b0381116109ea5760051b60200190565b156113b357565b60405162461bcd60e51b815260206004820152601c60248201527f4d546f6b656e3a20696e73756666696369656e742062616c616e6365000000006044820152606490fd5b9190820391821161140557565b634e487b7160e01b600052601160045260246000fd5b1561142257565b60405162461bcd60e51b815260206004820152601860248201527f4d546f6b656e3a206e6f7420696e74656e74206f776e657200000000000000006044820152606490fd5b9190820180921161140557565b1561147b57565b60405162461bcd60e51b815260206004820152601960248201527f4d546f6b656e3a206e6f742072656365697074206f776e6572000000000000006044820152606490fd5b6001600160a01b0390811691821561157157169182156115215760207f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925918360005260018252604060002085600052825280604060002055604051908152a3565b60405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b6064820152608490fd5b60405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b6064820152608490fd5b6005546001600160a01b031633036115d657565b606460405162461bcd60e51b815260206004820152602060248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152fd5b6001600160a01b0390811691821561172357169182156116d25760008281528060205260408120549180831061167e5760408282600080516020611a6b833981519152958760209652828652038282205586815220818154019055604051908152a3565b60405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b6064820152608490fd5b60405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b6064820152608490fd5b60405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b6064820152608490fd5b9060018060a01b03808316600052600160205260406000209082166000526020526040600020549260001984036117ae575b50505050565b8084106117c9576117c09303916114c0565b388080806117a8565b60405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152606490fd5b6001600160a01b031690811561185a57600080516020611a6b83398151915260208261183e600094600254611467565b60025584845283825260408420818154019055604051908152a3565b60405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606490fd5b9060418151146000146118cd576118c9916020820151906060604084015193015160001a906119db565b9091565b5050600090600290565b6005811015610a3b57806118e85750565b600181036119355760405162461bcd60e51b815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152606490fd5b600281036119825760405162461bcd60e51b815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606490fd5b60031461198b57565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c604482015261756560f01b6064820152608490fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311611a5e5791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa15611a515781516001600160a01b03811615611a4b579190565b50600190565b50604051903d90823e3d90fd5b5050505060009060039056feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa26469706673582212205c197e3742569f6848538830856935ae6258dd50b496ec063d4f7f3abf47975b64736f6c63430008190033a2646970667358221220fac76b86fe52d22217b4085b1fadf3259ef63abaec4572796f362ba3bba663de64736f6c63430008190033")]
    contract ArcadiaMTokenManager {}

    #[sol(rpc, bytecode = "0x6080604081815260048036101561001557600080fd5b600092833560e01c90816333801f8c146106405750806356b86d801461034c57806369a7542d1461026d578063bb7261bd146101c9578063e446bf681461011a5763fcecbb611461006557600080fd5b3461011657602036600319011261011657828291610112946060845161008a8161088a565b8281528260208201528286820152015235815280602052209060038151926100b18461088a565b60018060a01b038082541685526001820154602086015260028201541683850152015460608301525191829182919091606080608083019460018060a01b038082511685526020820151602086015260408201511660408501520151910152565b0390f35b8280fd5b509034610116576020366003190112610116578135917f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036101bb57828452600160205260ff8285205416156101ae575081835260016020528220805460ff191690557f5ee9d3f03c4662198c471971d8cc424332f5efcad2baa891b8c8a906173f9c468280a280f35b905162b7a46360e71b8152fd5b90516312d207d560e31b8152fd5b509034610116576020366003190112610116578135917f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036101bb57828452600160205260ff828520541661025f575081835260016020528220600160ff198254161790557f4562c42211e3e4b553b5f892eade104789b586303a1c1991742162014e3425738280a280f35b905163300f43b960e21b8152fd5b5091903461034857602080600319360112610116576001600160a01b0361029261086f565b1683526002815281832092825192838386549182815201908196845284842090845b868282106103345750505050849003601f01601f191684019567ffffffffffffffff87118588101761031f575085815282865292518583018190528594938501939290915b82811061030857505050500390f35b8351855286955093810193928101926001016102f9565b604190634e487b7160e01b6000525260246000fd5b8354855290930192600192830192016102b4565b5080fd5b5034610116576020918260031936011261063c57813591828552848452818520908251946103798661088a565b60018060a01b03918284541687526001906001850154948389019586528460028201541693878a019480865260038093015460608c01521561062c5785855116330361061c57888b526001815260ff888c20541661060c578a867f000000000000000000000000000000000000000000000000000000000000000016803b156103485761044b82918d8c51948580948193630314d47b60e01b83528b8301919091606080608083019460018060a01b038082511685526020820151602086015260408201511660408501520151910152565b03925af18015610602576105e2575b50600290898c9b9a9998979695949c528a815260006003898d208d81558260018201558d858201550155338b525285892099828a905b6104e8575b505091519651935194519383166001600160a01b03168452505060208201929092529216917ff04d28ea5da88dd67d81ae537f2ad9f22fc5cdd5dc84ddac1b1e3a6fdd5d9a349080604081015b0390a380f35b8b54808210156105dc57896104fd838f6108d0565b905490861b1c146105115750830183610490565b929350600019928381019081116105c9576105408d9261053461055793856108d0565b905490881b1c936108d0565b819391549060031b91821b91600019901b19161790565b90558a549081156105b65750917ff04d28ea5da88dd67d81ae537f2ad9f22fc5cdd5dc84ddac1b1e3a6fdd5d9a349798999a828695936104e29795019261059e84846108d0565b81939154921b1b191690555591928998979638610495565b634e487b7160e01b8b526031905260248afd5b634e487b7160e01b8c526011835260248cfd5b50610495565b84939291600060039d6105f66002946108bc565b9d50509192935061045a565b89513d8e823e3d90fd5b875163300f43b960e21b81528390fd5b8751630aa7458760e01b81528390fd5b87516303bbb48b60e01b81528390fd5b8380fd5b848385346101165760803660031901126101165761065c61086f565b6024359490926001600160a01b0380871692919083880361086b5760443592817f000000000000000000000000000000000000000000000000000000000000000016330361085d5750845195816020880191169081815285878901528460608901524260808901526080885260a088019088821067ffffffffffffffff83111761084a576003908289528951902080996106f58461088a565b8884528b868b60c08401928b845261010060e08601958a87520195606435875281528060205220955116906bffffffffffffffffffffffff60a01b91828754161786555160018601558660028601925116908254161790555191015580885260026020528588208054906801000000000000000082101561084a577fae7664b1787ea7b42e5c753527f275a6f4b3542e90d8be9bb393f26dc2f76f0e868c8b6107ad6105408f9b9a99989783976001820181556108d0565b90558a516001600160a01b039190911681526020810191909152604090a37f00000000000000000000000000000000000000000000000000000000000000001690813b1561063c578360649288948851978896879563041d11ed60e11b8752860152602485015260448401525af180156108405760209450610831575b5051908152f35b61083a906108bc565b8361082a565b82513d86823e3d90fd5b634e487b7160e01b8a526041855260248afd5b630945dac960e21b81529050fd5b8680fd5b600435906001600160a01b038216820361088557565b600080fd5b6080810190811067ffffffffffffffff8211176108a657604052565b634e487b7160e01b600052604160045260246000fd5b67ffffffffffffffff81116108a657604052565b80548210156108e85760005260206000200190600090565b634e487b7160e01b600052603260045260246000fdfea2646970667358221220c0b65bab349dff3e29d1d4434e29401dea7d3cd6ce72ce71b1cc5b728659381f64736f6c63430008190033")]
    contract ArcadiaReceiptManager {}
}

pub struct MultiChainNetwork {
    arcadia: AnvilInstance,
    spoke_chain_1: AnvilInstance,
    spoke_chain_2: AnvilInstance,
}

impl MultiChainNetwork {
    pub async fn new() -> Self {
        let spoke_1_id = 31338;
        let spoke_2_id = 31339;
        let arcadia = start_anvil(None)
            .await
            .expect("Failed to start Anvil instance for Arcadia");
        let spoke_1 = start_anvil(Some(spoke_1_id))
            .await
            .expect("Failed to start Anvil instance for Spoke 1");
        let spoke_2 = start_anvil(Some(spoke_2_id))
            .await
            .expect("Failed to start Anvil instance for Spoke 2");

        Self {
            arcadia,
            spoke_chain_1: spoke_1,
            spoke_chain_2: spoke_2,
        }
    }
}
pub async fn start_anvil(chain_id: Option<u64>) -> Result<AnvilInstance> {
    let anvil = Anvil::new()
        .block_time(1)
        .chain_id(chain_id.unwrap_or(31337))
        .try_spawn()?;
    Ok(anvil)
}

pub fn create_provider(rpc_url: &str) -> impl Provider<Http<Client>> + 'static + WalletProvider {
    let wallet = EthereumWallet::new(LocalSigner::from_str(ANVIL_PKEYS[0]).unwrap());
    ProviderBuilder::new()
        .with_recommended_fillers()
        .wallet(wallet)
        .on_http(rpc_url.parse().unwrap())
}

pub fn deploy_hyperlane_with_hyperlane_cli(net: MultiChainNetwork) -> Result<()> {
    let spoke_1_rpc = net.spoke_chain_1.endpoint();
    let spoke_2_rpc = net.spoke_chain_2.endpoint();
    let arcadia_rpc = net.arcadia.endpoint();
    let mut cmd = Command::new("hyperlane");
    cmd.arg("registry");
    cmd.arg("init");

    // let mut cmd = Command::new("npx");
    // cmd.arg("tsx");
    // cmd.arg("scripts/deploy.ts");
    // cmd.arg("--spoke1Rpc").arg(spoke_1_rpc);
    // cmd.arg("--spoke2Rpc").arg(spoke_2_rpc);
    // cmd.arg("--spoke1ChainId").arg(net.spoke_chain_1.chain_id().to_string());
    Ok(())
}

pub async fn deploy_arcadia_contracts(anvil: &AnvilInstance) -> Result<()> {
    let signer: PrivateKeySigner = anvil.keys()[0].clone().into();
    let wallet = EthereumWallet::from(signer);

    // Create a provider with the wallet.
    let rpc_url = anvil.endpoint().parse()?;
    let provider = ProviderBuilder::new()
        .with_recommended_fillers()
        .wallet(wallet)
        .on_http(rpc_url);

    println!("Anvil running at `{}`", anvil.endpoint());

    let intent_book_contract = ArcadiaIntentBookInstance::deploy(&provider).await?;
    let m_token_contract = ArcadiaMTokenManager::deploy(&provider).await?;
    let m_token_manager_contract = ArcadiaMTokenManager::deploy(&provider).await?;
    let receipt_manager_contract = ArcadiaReceiptManager::deploy(&provider).await?;

    Ok(())
}
