{"version":3,"file":"static/chunks/pages/apps/open-c329c3cdf6a2c2a8.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@mui/icons-material/South.js","webpack://_N_E/./node_modules/@mui/icons-material/WarningAmberOutlined.js","webpack://_N_E/./node_modules/@mui/material/AlertTitle/alertTitleClasses.js","webpack://_N_E/./node_modules/@mui/material/AlertTitle/AlertTitle.js","webpack://_N_E/?3ea0","webpack://_N_E/./src/components/safe-apps/AppFrame/SafeAppIframe.tsx","webpack://_N_E/./src/components/safe-apps/AppFrame/useAppCommunicator.ts","webpack://_N_E/./src/services/safe-apps/AppCommunicator.ts","webpack://_N_E/./src/components/safe-apps/AppFrame/useGetSafeInfo.ts","webpack://_N_E/./src/components/safe-apps/PermissionCheckbox.tsx","webpack://_N_E/./src/hooks/safe-apps/useSafeAppFromBackend.ts","webpack://_N_E/./src/hooks/safe-apps/useSafeAppFromManifest.ts","webpack://_N_E/./src/hooks/safe-apps/useSafeAppUrl.ts","webpack://_N_E/./public/images/settings/permissions/shield.svg","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/Slider.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/LegalDisclaimer.tsx","webpack://_N_E/./public/images/apps/network-error.svg","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/AllowedFeaturesList.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/Domain.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/UnknownAppWarning.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/index.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/useSafeAppsInfoModal.ts","webpack://_N_E/./src/components/safe-apps/SafeAppsErrorBoundary/index.tsx","webpack://_N_E/./src/components/safe-apps/SafeAppsErrorBoundary/SafeAppsLoadError.tsx","webpack://_N_E/./src/components/safe-apps/AppFrame/useTransactionQueueBarState.ts","webpack://_N_E/./src/components/safe-apps/AppFrame/useThirdPartyCookies.ts","webpack://_N_E/./src/components/safe-apps/AppFrame/useFromAppAnalytics.ts","webpack://_N_E/./src/components/safe-apps/AppFrame/useAppIsLoading.ts","webpack://_N_E/./src/components/safe-apps/AppFrame/ThirdPartyCookiesWarning.tsx","webpack://_N_E/./src/components/safe-apps/AppFrame/TransactionQueueBar/index.tsx","webpack://_N_E/./src/components/safe-apps/PermissionsPrompt.tsx","webpack://_N_E/./src/components/tx-flow/flows/SafeAppsTx/ReviewSafeAppsTx.tsx","webpack://_N_E/./src/components/tx-flow/flows/SafeAppsTx/index.tsx","webpack://_N_E/./src/components/tx/SendFromBlock/index.tsx","webpack://_N_E/./src/components/tx-flow/flows/SignMessageOnChain/ReviewSignMessageOnChain.tsx","webpack://_N_E/./src/components/tx-flow/flows/SignMessageOnChain/index.tsx","webpack://_N_E/./src/components/safe-apps/AppFrame/index.tsx","webpack://_N_E/./src/pages/apps/open.tsx","webpack://_N_E/./src/components/safe-apps/AppFrame/TransactionQueueBar/styles.module.css","webpack://_N_E/./src/components/safe-apps/AppFrame/styles.module.css","webpack://_N_E/./src/components/safe-apps/SafeAppsErrorBoundary/styles.module.css","webpack://_N_E/./src/components/safe-apps/SafeAppsInfoModal/styles.module.css","webpack://_N_E/./src/components/tx/SendFromBlock/styles.module.css"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m19 15-1.41-1.41L13 18.17V2h-2v16.17l-4.59-4.59L5 15l7 7 7-7z\"\n}), 'South');\nexports.default = _default;","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 5.99 19.53 19H4.47L12 5.99M12 2 1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n}), 'WarningAmberOutlined');\nexports.default = _default;","import { unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nimport generateUtilityClass from '../generateUtilityClass';\nexport function getAlertTitleUtilityClass(slot) {\n  return generateUtilityClass('MuiAlertTitle', slot);\n}\nconst alertTitleClasses = generateUtilityClasses('MuiAlertTitle', ['root']);\nexport default alertTitleClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport Typography from '../Typography';\nimport { getAlertTitleUtilityClass } from './alertTitleClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getAlertTitleUtilityClass, classes);\n};\nconst AlertTitleRoot = styled(Typography, {\n  name: 'MuiAlertTitle',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(({\n  theme\n}) => {\n  return {\n    fontWeight: theme.typography.fontWeightMedium,\n    marginTop: -2\n  };\n});\nconst AlertTitle = /*#__PURE__*/React.forwardRef(function AlertTitle(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiAlertTitle'\n  });\n  const {\n      className\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(AlertTitleRoot, _extends({\n    gutterBottom: true,\n    component: \"div\",\n    ownerState: ownerState,\n    ref: ref,\n    className: clsx(classes.root, className)\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? AlertTitle.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default AlertTitle;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/apps/open\",\n      function () {\n        return require(\"private-next-pages/apps/open.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/apps/open\"])\n      });\n    }\n  ","import type { MutableRefObject, ReactElement } from 'react'\nimport css from './styles.module.css'\n\ntype SafeAppIFrameProps = {\n  appUrl: string\n  allowedFeaturesList: string\n  title?: string\n  iframeRef?: MutableRefObject<HTMLIFrameElement | null>\n  onLoad?: () => void\n}\n\n// see sandbox mdn docs for more details https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-sandbox\nconst IFRAME_SANDBOX_ALLOWED_FEATURES =\n  'allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-forms allow-downloads allow-orientation-lock'\n\nconst SafeAppIframe = ({ appUrl, allowedFeaturesList, iframeRef, onLoad, title }: SafeAppIFrameProps): ReactElement => {\n  return (\n    <iframe\n      className={css.iframe}\n      id={`iframe-${appUrl}`}\n      ref={iframeRef}\n      src={appUrl}\n      title={title}\n      onLoad={onLoad}\n      sandbox={IFRAME_SANDBOX_ALLOWED_FEATURES}\n      allow={allowedFeaturesList}\n    />\n  )\n}\n\nexport default SafeAppIframe\n","import type { MutableRefObject } from 'react'\nimport { useEffect, useMemo, useState } from 'react'\nimport { getAddress } from 'ethers/lib/utils'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport type {\n  SafeAppData,\n  ChainInfo as WebCoreChainInfo,\n  TransactionDetails,\n} from '@safe-global/safe-gateway-typescript-sdk'\nimport type { Permission, PermissionRequest } from '@safe-global/safe-apps-sdk/dist/src/types/permissions'\nimport type {\n  AddressBookItem,\n  BaseTransaction,\n  EIP712TypedData,\n  EnvironmentInfo,\n  GetBalanceParams,\n  GetTxBySafeTxHashParams,\n  RequestId,\n  RPCPayload,\n  SafeInfo,\n  SendTransactionRequestParams,\n  SendTransactionsParams,\n  SignMessageParams,\n  SignTypedMessageParams,\n  ChainInfo,\n  SafeBalances,\n} from '@safe-global/safe-apps-sdk'\nimport { Methods } from '@safe-global/safe-apps-sdk'\nimport { RPC_CALLS } from '@safe-global/safe-apps-sdk/dist/src/eth/constants'\nimport type { SafeSettings } from '@safe-global/safe-apps-sdk'\nimport AppCommunicator from '@/services/safe-apps/AppCommunicator'\nimport { Errors, logError } from '@/services/exceptions'\nimport { createSafeAppsWeb3Provider } from '@/hooks/wallets/web3'\nimport type { SafePermissionsRequest } from '@/hooks/safe-apps/permissions'\nimport { SAFE_APPS_EVENTS, trackSafeAppEvent } from '@/services/analytics'\nimport { useAppSelector } from '@/store'\nimport { selectRpc } from '@/store/settingsSlice'\n\nexport enum CommunicatorMessages {\n  REJECT_TRANSACTION_MESSAGE = 'Transaction was rejected',\n}\n\ntype JsonRpcResponse = {\n  jsonrpc: string\n  id: number\n  result?: any\n  error?: string\n}\n\nexport type UseAppCommunicatorHandlers = {\n  onConfirmTransactions: (txs: BaseTransaction[], requestId: RequestId, params?: SendTransactionRequestParams) => void\n  onSignMessage: (\n    message: string | EIP712TypedData,\n    requestId: string,\n    method: Methods.signMessage | Methods.signTypedMessage,\n    sdkVersion: string,\n  ) => void\n  onGetTxBySafeTxHash: (transactionId: string) => Promise<TransactionDetails>\n  onGetEnvironmentInfo: () => EnvironmentInfo\n  onGetSafeBalances: (currency: string) => Promise<SafeBalances>\n  onGetSafeInfo: () => SafeInfo\n  onGetChainInfo: () => ChainInfo | undefined\n  onGetPermissions: (origin: string) => Permission[]\n  onSetPermissions: (permissionsRequest?: SafePermissionsRequest) => void\n  onRequestAddressBook: (origin: string) => AddressBookItem[]\n  onSetSafeSettings: (settings: SafeSettings) => SafeSettings\n  onGetOffChainSignature: (messageHash: string) => Promise<string | undefined>\n}\n\nconst useAppCommunicator = (\n  iframeRef: MutableRefObject<HTMLIFrameElement | null>,\n  app: SafeAppData | undefined,\n  chain: WebCoreChainInfo | undefined,\n  handlers: UseAppCommunicatorHandlers,\n): AppCommunicator | undefined => {\n  const [communicator, setCommunicator] = useState<AppCommunicator | undefined>(undefined)\n  const customRpc = useAppSelector(selectRpc)\n\n  const safeAppWeb3Provider = useMemo(() => {\n    if (!chain) {\n      return\n    }\n\n    return createSafeAppsWeb3Provider(chain.rpcUri, customRpc?.[chain.chainId])\n  }, [chain, customRpc])\n\n  useEffect(() => {\n    let communicatorInstance: AppCommunicator\n\n    const initCommunicator = (iframeRef: MutableRefObject<HTMLIFrameElement>, app?: SafeAppData) => {\n      communicatorInstance = new AppCommunicator(iframeRef, {\n        onMessage: (msg) => {\n          const isCustomApp = app && app.id < 1\n\n          trackSafeAppEvent(\n            { ...SAFE_APPS_EVENTS.SAFE_APP_SDK_METHOD_CALL },\n            isCustomApp ? app?.url : app?.name || '',\n            {\n              method: msg.data.method,\n              ethMethod: (msg.data.params as any)?.call,\n              version: msg.data.env.sdkVersion,\n            },\n          )\n        },\n        onError: (error, data) => {\n          logError(Errors._901, error.message, {\n            contexts: {\n              safeApp: app || {},\n              request: data,\n            },\n          })\n        },\n      })\n\n      setCommunicator(communicatorInstance)\n    }\n\n    if (app) {\n      initCommunicator(iframeRef as MutableRefObject<HTMLIFrameElement>, app)\n    }\n\n    return () => {\n      communicatorInstance?.clear()\n    }\n  }, [app, iframeRef])\n\n  // Adding communicator logic for the required SDK Methods\n  // We don't need to unsubscribe from the events because there can be just one subscription\n  // per event type and the next effect run will simply replace the handlers\n  useEffect(() => {\n    communicator?.on(Methods.getTxBySafeTxHash, (msg) => {\n      const { safeTxHash } = msg.data.params as GetTxBySafeTxHashParams\n\n      return handlers.onGetTxBySafeTxHash(safeTxHash)\n    })\n\n    communicator?.on(Methods.getEnvironmentInfo, handlers.onGetEnvironmentInfo)\n\n    communicator?.on(Methods.getSafeInfo, handlers.onGetSafeInfo)\n\n    communicator?.on(Methods.getSafeBalances, (msg) => {\n      const { currency = 'usd' } = msg.data.params as GetBalanceParams\n\n      return handlers.onGetSafeBalances(currency)\n    })\n\n    communicator?.on(Methods.rpcCall, async (msg) => {\n      const params = msg.data.params as RPCPayload\n\n      if (params.call === RPC_CALLS.safe_setSettings) {\n        const settings = params.params[0] as SafeSettings\n        return handlers.onSetSafeSettings(settings)\n      }\n\n      try {\n        return await safeAppWeb3Provider?.send(params.call, params.params)\n      } catch (err) {\n        throw new Error((err as JsonRpcResponse).error)\n      }\n    })\n\n    communicator?.on(Methods.sendTransactions, (msg) => {\n      const { txs, params } = msg.data.params as SendTransactionsParams\n\n      const transactions = txs.map(({ to, value, data }) => {\n        return {\n          to: getAddress(to),\n          value: BigNumber.from(value).toString(),\n          data,\n        }\n      })\n\n      handlers.onConfirmTransactions(transactions, msg.data.id, params)\n    })\n\n    communicator?.on(Methods.signMessage, (msg) => {\n      const { message } = msg.data.params as SignMessageParams\n      const sdkVersion = msg.data.env.sdkVersion\n      handlers.onSignMessage(message, msg.data.id, Methods.signMessage, sdkVersion)\n    })\n\n    communicator?.on(Methods.getOffChainSignature, (msg) => {\n      return handlers.onGetOffChainSignature(msg.data.params as string)\n    })\n\n    communicator?.on(Methods.signTypedMessage, (msg) => {\n      const { typedData } = msg.data.params as SignTypedMessageParams\n      const sdkVersion = msg.data.env.sdkVersion\n      handlers.onSignMessage(typedData, msg.data.id, Methods.signTypedMessage, sdkVersion)\n    })\n\n    communicator?.on(Methods.getChainInfo, handlers.onGetChainInfo)\n\n    communicator?.on(Methods.wallet_getPermissions, (msg) => {\n      return handlers.onGetPermissions(msg.origin)\n    })\n\n    communicator?.on(Methods.wallet_requestPermissions, (msg) => {\n      handlers.onSetPermissions({\n        origin: msg.origin,\n        request: msg.data.params as PermissionRequest[],\n        requestId: msg.data.id,\n      })\n    })\n\n    communicator?.on(Methods.requestAddressBook, (msg) => {\n      return handlers.onRequestAddressBook(msg.origin)\n    })\n  }, [safeAppWeb3Provider, handlers, chain, communicator])\n\n  return communicator\n}\n\nexport default useAppCommunicator\n","import type { MutableRefObject } from 'react'\nimport type { SDKMessageEvent, MethodToResponse, ErrorResponse, RequestId } from '@safe-global/safe-apps-sdk'\nimport { getSDKVersion, Methods, MessageFormatter } from '@safe-global/safe-apps-sdk'\nimport { asError } from '../exceptions/utils'\n\ntype MessageHandler = (\n  msg: SDKMessageEvent,\n) => void | MethodToResponse[Methods] | ErrorResponse | Promise<MethodToResponse[Methods] | ErrorResponse | void>\n\ntype AppCommunicatorConfig = {\n  onMessage?: (msg: SDKMessageEvent) => void\n  onError?: (error: Error, data: any) => void\n}\n\nclass AppCommunicator {\n  private iframeRef: MutableRefObject<HTMLIFrameElement | null>\n  private handlers = new Map<Methods, MessageHandler>()\n  private config: AppCommunicatorConfig\n\n  constructor(iframeRef: MutableRefObject<HTMLIFrameElement | null>, config?: AppCommunicatorConfig) {\n    this.iframeRef = iframeRef\n    this.config = config || {}\n\n    window.addEventListener('message', this.handleIncomingMessage)\n  }\n\n  on = (method: Methods, handler: MessageHandler): void => {\n    this.handlers.set(method, handler)\n  }\n\n  private isValidMessage = (msg: SDKMessageEvent): boolean => {\n    if (msg.data.hasOwnProperty('isCookieEnabled')) {\n      return true\n    }\n\n    const sentFromIframe = this.iframeRef.current?.contentWindow === msg.source\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  private canHandleMessage = (msg: SDKMessageEvent): boolean => {\n    return Boolean(this.handlers.get(msg.data.method))\n  }\n\n  send = (data: unknown, requestId: RequestId, error = false): void => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, data as string, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n  }\n\n  handleIncomingMessage = async (msg: SDKMessageEvent): Promise<void> => {\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers.get(msg.data.method)\n\n      this.config?.onMessage?.(msg)\n\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (e) {\n        const error = asError(e)\n\n        this.send(error.message, msg.data.id, true)\n        this.config?.onError?.(error, msg.data)\n      }\n    }\n  }\n\n  clear = (): void => {\n    window.removeEventListener('message', this.handleIncomingMessage)\n    this.handlers.clear()\n  }\n}\n\nexport default AppCommunicator\n","import { useMemo } from 'react'\nimport useChainId from '@/hooks/useChainId'\nimport { useCurrentChain } from '@/hooks/useChains'\nimport useIsSafeOwner from '@/hooks/useIsSafeOwner'\nimport useSafeInfo from '@/hooks/useSafeInfo'\nimport { getLegacyChainName } from '../utils'\n\nconst useGetSafeInfo = () => {\n  const { safe, safeAddress } = useSafeInfo()\n  const isOwner = useIsSafeOwner()\n  const chainId = useChainId()\n  const chain = useCurrentChain()\n  const chainName = chain?.chainName || ''\n\n  return useMemo(\n    () => () => ({\n      safeAddress,\n      chainId: parseInt(chainId, 10),\n      owners: safe.owners.map((owner) => owner.value),\n      threshold: safe.threshold,\n      isReadOnly: !isOwner,\n      network: getLegacyChainName(chainName || '', chainId).toUpperCase(),\n    }),\n    [chainId, chainName, isOwner, safeAddress, safe.owners, safe.threshold],\n  )\n}\n\nexport default useGetSafeInfo\n","import { Checkbox, FormControlLabel } from '@mui/material'\n\ntype PermissionsCheckboxProps = {\n  label: string\n  name: string\n  checked: boolean\n  onChange: (event: React.ChangeEvent<HTMLInputElement>, checked: boolean) => void\n}\n\nconst PermissionsCheckbox = ({ label, checked, onChange, name }: PermissionsCheckboxProps): React.ReactElement => (\n  <FormControlLabel\n    sx={({ palette }) => ({\n      flex: 1,\n      '.MuiIconButton-root:not(.Mui-checked)': {\n        color: palette.text.disabled,\n      },\n    })}\n    control={<Checkbox checked={checked} onChange={onChange} name={name} />}\n    label={label}\n  />\n)\n\nexport default PermissionsCheckbox\n","import { useEffect } from 'react'\nimport type { SafeAppData } from '@safe-global/safe-gateway-typescript-sdk'\nimport { getSafeApps } from '@safe-global/safe-gateway-typescript-sdk'\nimport { Errors, logError } from '@/services/exceptions'\nimport type { AsyncResult } from '../useAsync'\nimport useAsync from '../useAsync'\nimport { trimTrailingSlash } from '@/utils/url'\n\nconst useSafeAppFromBackend = (url: string, chainId: string): AsyncResult<SafeAppData> => {\n  const [backendApp, error, loading] = useAsync(async () => {\n    if (!chainId) return\n\n    // We do not have a single standard for storing URLs, it may be stored with or without a trailing slash.\n    // But for the request it has to be an exact match.\n    const retryUrl = url.endsWith('/') ? trimTrailingSlash(url) : `${url}/`\n    let response = await getSafeApps(chainId, { url })\n    if (!response[0]) {\n      response = await getSafeApps(chainId, { url: retryUrl })\n    }\n\n    return response?.[0]\n  }, [chainId, url])\n\n  useEffect(() => {\n    if (error) {\n      logError(Errors._900, error.message)\n    }\n  }, [error])\n\n  return [backendApp, error, loading]\n}\n\nexport { useSafeAppFromBackend }\n","import { useEffect, useMemo } from 'react'\nimport { Errors, logError } from '@/services/exceptions'\nimport { fetchSafeAppFromManifest } from '@/services/safe-apps/manifest'\nimport useAsync from '@/hooks/useAsync'\nimport { getEmptySafeApp } from '@/components/safe-apps/utils'\nimport type { SafeAppDataWithPermissions } from '@/components/safe-apps/types'\nimport { asError } from '@/services/exceptions/utils'\n\ntype UseSafeAppFromManifestReturnType = {\n  safeApp: SafeAppDataWithPermissions\n  isLoading: boolean\n}\n\nconst useSafeAppFromManifest = (appUrl: string, chainId: string): UseSafeAppFromManifestReturnType => {\n  const [data, error, isLoading] = useAsync<SafeAppDataWithPermissions>(() => {\n    if (appUrl && chainId) return fetchSafeAppFromManifest(appUrl, chainId)\n  }, [appUrl, chainId])\n\n  const emptyApp = useMemo(() => getEmptySafeApp(appUrl), [appUrl])\n\n  useEffect(() => {\n    if (!error) return\n    logError(Errors._903, `${appUrl}, ${asError(error).message}`)\n  }, [appUrl, error])\n\n  return { safeApp: data || emptyApp, isLoading }\n}\n\nexport { useSafeAppFromManifest }\n","import { useRouter } from 'next/router'\nimport { sanitizeUrl } from '@/utils/url'\nimport { useEffect, useMemo, useState } from 'react'\n\nconst useSafeAppUrl = (): string | undefined => {\n  const router = useRouter()\n  const [appUrl, setAppUrl] = useState<string | undefined>()\n\n  useEffect(() => {\n    if (!router.isReady) return\n    setAppUrl(router.query.appUrl?.toString())\n  }, [router])\n\n  return useMemo(() => (appUrl ? sanitizeUrl(appUrl) : undefined), [appUrl])\n}\n\nexport { useSafeAppUrl }\n","var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nvar SvgShield = function SvgShield(_ref) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M11.6748 21.9362C11.9021 22.0215 12.1527 22.0213 12.3798 21.9355C16.3253 20.4449 18.8299 18.3949 20.089 16.0572C20.3255 15.6341 20.5105 15.1643 20.6517 14.6561C20.8149 14.069 20.9142 13.4521 20.9639 12.8264C20.9975 12.4042 21.0048 12.0411 20.9981 11.717C20.9965 11.647 20.9965 11.647 20.9964 11.654V5.279C20.9964 4.69989 20.506 4.24186 19.9282 4.28133C19.4283 4.31547 19.1772 4.328 18.8994 4.328C16.2811 4.328 14.1185 3.39264 12.6182 2.21372C12.2322 1.91033 11.6829 1.93214 11.3221 2.2652C11.3006 2.28505 11.2747 2.30621 11.2358 2.33553C11.2057 2.35816 11.1689 2.38486 11.0714 2.45561C10.6544 2.73402 10.4122 2.88668 10.0484 3.08197C9.96778 3.12523 9.88702 3.16697 9.80602 3.20715C8.38423 3.90539 6.84274 4.328 5.10338 4.328C4.82402 4.328 4.57478 4.31557 4.07352 4.28133C3.49576 4.24186 3.00538 4.69989 3.00538 5.279V11.606C2.92126 12.7826 3.22547 14.8548 4.05794 16.2732C4.2169 16.5679 4.42431 16.8738 4.68419 17.2033C6.16047 19.1604 8.51801 20.7508 11.6748 21.9362ZM18.3403 15.0866L18.3315 15.1027C17.3487 16.9318 15.3335 18.6175 12.0254 19.9282C9.38042 18.8858 7.4534 17.5534 6.26767 15.9817C6.06087 15.7192 5.91605 15.5056 5.79967 15.2907C5.45153 14.6964 5.22422 13.9393 5.09977 13.0916C5.01415 12.5084 4.98663 11.9106 5.00297 11.6753L5.00498 6.32759C5.03744 6.32787 5.07014 6.328 5.10338 6.328C7.17923 6.328 9.01073 5.82588 10.6912 5.0006C10.7953 4.94898 10.8951 4.8974 10.9943 4.84414C11.364 4.6457 11.625 4.48652 12 4.23889C13.7668 5.4456 16.1089 6.328 18.8994 6.328C18.9321 6.328 18.9644 6.32787 18.9964 6.32759V11.654C18.9973 11.7081 18.9973 11.7081 18.9985 11.7587C19.004 12.0208 18.998 12.3192 18.9702 12.6679C18.93 13.1745 18.8505 13.6681 18.7247 14.1207C18.6232 14.4861 18.4949 14.8112 18.3403 15.0866Z\"\n  })));\n};\nexport default SvgShield;","import { Box, Button } from '@mui/material'\nimport React, { useState, useEffect, useMemo } from 'react'\nimport css from './styles.module.css'\n\ntype SliderProps = {\n  onSlideChange: (slideIndex: number) => void\n  initialStep?: number\n  children: React.ReactNode\n}\n\nconst SLIDER_TIMEOUT = 500\n\nconst Slider: React.FC<SliderProps> = ({ onSlideChange, children, initialStep }) => {\n  const allSlides = useMemo(() => React.Children.toArray(children).filter(Boolean) as React.ReactElement[], [children])\n\n  const [activeStep, setActiveStep] = useState(initialStep || 0)\n  const [disabledBtn, setDisabledBtn] = useState(false)\n\n  useEffect(() => {\n    let id: ReturnType<typeof setTimeout>\n\n    if (disabledBtn) {\n      id = setTimeout(() => {\n        setDisabledBtn(false)\n      }, SLIDER_TIMEOUT)\n    }\n\n    return () => {\n      if (id) clearTimeout(id)\n    }\n  }, [disabledBtn])\n\n  const nextSlide = () => {\n    if (disabledBtn) return\n\n    const nextStep = activeStep + 1\n\n    onSlideChange(nextStep)\n    setActiveStep(nextStep)\n    setDisabledBtn(true)\n  }\n\n  const prevSlide = () => {\n    if (disabledBtn) return\n\n    const prevStep = activeStep - 1\n\n    onSlideChange(prevStep)\n    setActiveStep(prevStep)\n    setDisabledBtn(true)\n  }\n\n  const isFirstStep = activeStep === 0\n\n  return (\n    <>\n      <div className={css.sliderContainer}>\n        <div\n          className={css.sliderInner}\n          style={{\n            transform: `translateX(-${activeStep * 100}%)`,\n          }}\n        >\n          {allSlides.map((slide, index) => (\n            <div className={css.sliderItem} key={index}>\n              {slide}\n            </div>\n          ))}\n        </div>\n      </div>\n      <Box display=\"flex\" justifyContent=\"center\" width=\"100%\">\n        <Button color=\"primary\" variant=\"outlined\" size=\"small\" fullWidth onClick={prevSlide}>\n          {isFirstStep ? 'Cancel' : 'Back'}\n        </Button>\n\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          size=\"small\"\n          fullWidth\n          onClick={nextSlide}\n          style={{\n            marginLeft: 10,\n          }}\n        >\n          Continue\n        </Button>\n      </Box>\n    </>\n  )\n}\n\nexport default Slider\n","import ExternalLink from '@/components/common/ExternalLink'\nimport { AppRoutes } from '@/config/routes'\nimport { Typography } from '@mui/material'\n\nimport css from './styles.module.css'\n\nconst LegalDisclaimer = (): JSX.Element => (\n  <div className={css.disclaimerContainer}>\n    <Typography variant=\"body2\" color=\"text.secondary\" mx={8}>\n      Before starting to use Safe dApps...\n    </Typography>\n    <Typography variant=\"h3\" fontWeight={700} my={3}>\n      Disclaimer\n    </Typography>\n    <div className={css.disclaimerInner}>\n      <Typography mb={4}>\n        You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for\n        any loss you may suffer in connection with interacting with the apps, which is at your own risk.\n      </Typography>\n\n      <Typography mb={4}>\n        You must read our Terms, which contain more detailed provisions binding on you relating to the apps.\n      </Typography>\n\n      <Typography>\n        I have read and understood the{' '}\n        <ExternalLink href={AppRoutes.terms} sx={{ textDecoration: 'none' }}>\n          Terms\n        </ExternalLink>{' '}\n        and this Disclaimer, and agree to be bound by them.\n      </Typography>\n    </div>\n  </div>\n)\n\nexport default LegalDisclaimer\n","var _g;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nvar SvgNetworkError = function SvgNetworkError(_ref) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 90,\n    height: 90,\n    viewBox: \"0 0 90 90\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 45,\n    cy: 45,\n    r: 45,\n    className: \"illustration-background-fill\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"illustration-light-fill\",\n    fillRule: \"nonzero\",\n    d: \"M26.24 62c-.57 0-1.13-.15-1.623-.437a3.254 3.254 0 0 1-1.18-4.44l18.76-32.501a3.234 3.234 0 0 1 5.606 0l18.761 32.501c.286.495.436 1.057.436 1.628A3.244 3.244 0 0 1 63.76 62H26.24z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"illustration-background-fill\",\n    fillRule: \"nonzero\",\n    d: \"M47 49h-4V36h4zM47 55h-4v-4h4z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 78,\n    cy: 78,\n    r: 11,\n    className: \"illustration-main-fill\",\n    fillRule: \"nonzero\",\n    strokeWidth: 4\n  }))));\n};\nexport default SvgNetworkError;","import { Box, Typography, SvgIcon } from '@mui/material'\nimport ShieldIcon from '@/public/images/settings/permissions/shield.svg'\n\nimport { getBrowserPermissionDisplayValues } from '@/hooks/safe-apps/permissions'\nimport PermissionsCheckbox from '../PermissionCheckbox'\n\nimport type { AllowedFeatures, AllowedFeatureSelection } from '../types'\nimport { isBrowserFeature } from '../types'\n\ntype SafeAppsInfoAllowedFeaturesProps = {\n  features: AllowedFeatureSelection[]\n  onFeatureSelectionChange: (feature: AllowedFeatures, checked: boolean) => void\n}\n\nconst AllowedFeaturesList: React.FC<SafeAppsInfoAllowedFeaturesProps> = ({\n  features,\n  onFeatureSelectionChange,\n}): React.ReactElement => {\n  return (\n    <>\n      <SvgIcon component={ShieldIcon} inheritViewBox color=\"primary\" />\n\n      <Typography\n        variant=\"body2\"\n        color=\"text.secondary\"\n        sx={{\n          textAlign: 'center',\n          margin: '0 75px',\n        }}\n      >\n        Manage the features Safe Apps can use\n      </Typography>\n\n      <Box mx={1} my={3} textAlign=\"left\">\n        <Typography>This Safe App is requesting permission to use:</Typography>\n\n        <Box display=\"flex\" flexDirection=\"column\" ml={2} mt={1}>\n          {features\n            .filter(({ feature }) => isBrowserFeature(feature))\n            .map(({ feature, checked }, index) => (\n              <PermissionsCheckbox\n                key={index}\n                name=\"checkbox\"\n                checked={checked}\n                onChange={(_, checked) => onFeatureSelectionChange(feature, checked)}\n                label={getBrowserPermissionDisplayValues(feature).displayName}\n              />\n            ))}\n        </Box>\n      </Box>\n    </>\n  )\n}\n\nexport default AllowedFeaturesList\n","import React from 'react'\nimport { Typography } from '@mui/material'\nimport CheckIcon from '@mui/icons-material/Check'\n\nimport styles from './styles.module.css'\n\ntype DomainProps = {\n  url: string\n  showInOneLine?: boolean\n}\n\nconst Domain: React.FC<DomainProps> = ({ url, showInOneLine }): React.ReactElement => {\n  return (\n    <Typography className={styles.domainText} sx={showInOneLine ? { overflowY: 'hidden', whiteSpace: 'nowrap' } : {}}>\n      <CheckIcon color=\"success\" className={styles.domainIcon} /> {url}\n    </Typography>\n  )\n}\n\nexport default Domain\n","import { useState } from 'react'\nimport { Box, Checkbox, FormControlLabel, Typography } from '@mui/material'\nimport WarningAmberOutlinedIcon from '@mui/icons-material/WarningAmberOutlined'\nimport { lightPalette } from '@safe-global/safe-react-components'\nimport Domain from './Domain'\n\ntype UnknownAppWarningProps = {\n  url?: string\n  onHideWarning?: (hideWarning: boolean) => void\n}\n\nconst UnknownAppWarning = ({ url, onHideWarning }: UnknownAppWarningProps): React.ReactElement => {\n  const [toggleHideWarning, setToggleHideWarning] = useState(false)\n\n  const handleToggleWarningPreference = (): void => {\n    onHideWarning?.(!toggleHideWarning)\n    setToggleHideWarning(!toggleHideWarning)\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" alignItems=\"center\">\n      <Box display=\"block\" alignItems=\"center\" mt={6}>\n        <WarningAmberOutlinedIcon fontSize=\"large\" color=\"warning\" />\n        <Typography variant=\"h3\" fontWeight={700} mt={2} color={lightPalette.warning.main}>\n          Warning\n        </Typography>\n      </Box>\n      <Typography my={2} fontWeight={700} color={lightPalette.warning.main}>\n        The application you are trying to access is not in the default Safe Apps list\n      </Typography>\n\n      <Typography my={2} textAlign=\"center\">\n        Check the link you are using and ensure that it comes from a source you trust\n      </Typography>\n\n      {url && <Domain url={url} showInOneLine />}\n\n      {onHideWarning && (\n        <Box mt={2}>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={toggleHideWarning}\n                onChange={handleToggleWarningPreference}\n                name=\"Warning message preference\"\n              />\n            }\n            label=\"Don't show this warning again\"\n          />\n        </Box>\n      )}\n    </Box>\n  )\n}\n\nexport default UnknownAppWarning\n","import { memo, useMemo, useState } from 'react'\nimport { alpha, Box } from '@mui/system'\nimport { Grid, LinearProgress } from '@mui/material'\n\nimport type { BrowserPermission } from '@/hooks/safe-apps/permissions'\nimport Slider from './Slider'\nimport LegalDisclaimer from './LegalDisclaimer'\nimport AllowedFeaturesList from './AllowedFeaturesList'\nimport type { AllowedFeatures, AllowedFeatureSelection } from '../types'\nimport { PermissionStatus } from '../types'\nimport UnknownAppWarning from './UnknownAppWarning'\nimport { getOrigin } from '../utils'\n\ntype SafeAppsInfoModalProps = {\n  onCancel: () => void\n  onConfirm: (shouldHide: boolean, browserPermissions: BrowserPermission[]) => void\n  features: AllowedFeatures[]\n  appUrl: string\n  isConsentAccepted?: boolean\n  isPermissionsReviewCompleted: boolean\n  isSafeAppInDefaultList: boolean\n  isFirstTimeAccessingApp: boolean\n}\n\nconst SafeAppsInfoModal = ({\n  onCancel,\n  onConfirm,\n  features,\n  appUrl,\n  isConsentAccepted,\n  isPermissionsReviewCompleted,\n  isSafeAppInDefaultList,\n  isFirstTimeAccessingApp,\n}: SafeAppsInfoModalProps): JSX.Element => {\n  const [hideWarning, setHideWarning] = useState(false)\n  const [selectedFeatures, setSelectedFeatures] = useState<AllowedFeatureSelection[]>(\n    features.map((feature) => {\n      return {\n        feature,\n        checked: true,\n      }\n    }),\n  )\n  const [currentSlide, setCurrentSlide] = useState(0)\n\n  const totalSlides = useMemo(() => {\n    let totalSlides = 0\n\n    if (!isConsentAccepted) {\n      totalSlides += 1\n    }\n\n    if (!isPermissionsReviewCompleted) {\n      totalSlides += 1\n    }\n\n    if (!isSafeAppInDefaultList && isFirstTimeAccessingApp) {\n      totalSlides += 1\n    }\n\n    return totalSlides\n  }, [isConsentAccepted, isFirstTimeAccessingApp, isPermissionsReviewCompleted, isSafeAppInDefaultList])\n\n  const handleSlideChange = (newStep: number) => {\n    const isFirstStep = newStep === -1\n    const isLastStep = newStep === totalSlides\n\n    if (isFirstStep) {\n      onCancel()\n    }\n\n    if (isLastStep) {\n      onConfirm(\n        hideWarning,\n        selectedFeatures.map(({ feature, checked }) => {\n          return {\n            feature,\n            status: checked ? PermissionStatus.GRANTED : PermissionStatus.DENIED,\n          }\n        }),\n      )\n    }\n\n    setCurrentSlide(newStep)\n  }\n\n  const progressValue = useMemo(() => {\n    return ((currentSlide + 1) * 100) / totalSlides\n  }, [currentSlide, totalSlides])\n\n  const shouldShowUnknownAppWarning = useMemo(\n    () => !isSafeAppInDefaultList && isFirstTimeAccessingApp,\n    [isFirstTimeAccessingApp, isSafeAppInDefaultList],\n  )\n\n  const handleFeatureSelectionChange = (feature: AllowedFeatures, checked: boolean) => {\n    setSelectedFeatures(\n      selectedFeatures.map((feat) => {\n        if (feat.feature === feature) {\n          return {\n            feature,\n            checked,\n          }\n        }\n        return feat\n      }),\n    )\n  }\n\n  const origin = useMemo(() => getOrigin(appUrl), [appUrl])\n\n  return (\n    <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\" height=\"calc(100vh - 52px)\">\n      <Box\n        sx={({ palette }) => ({\n          width: '450px',\n          backgroundColor: palette.background.paper,\n          boxShadow: `1px 2px 10px 0 ${alpha(palette.text.primary, 0.18)}`,\n        })}\n      >\n        <LinearProgress\n          variant=\"determinate\"\n          value={progressValue}\n          sx={({ palette }) => ({\n            height: '6px',\n            backgroundColor: palette.background.paper,\n            borderRadius: '8px 8px 0 0',\n            '> .MuiLinearProgress-bar': {\n              backgroundColor:\n                progressValue === 100 && shouldShowUnknownAppWarning ? palette.warning.main : palette.primary.main,\n              borderRadius: '8px',\n            },\n          })}\n        />\n        <Grid container justifyContent=\"center\" alignItems=\"center\" direction=\"column\" textAlign=\"center\" p={3}>\n          <Slider onSlideChange={handleSlideChange}>\n            {!isConsentAccepted && <LegalDisclaimer />}\n\n            {!isPermissionsReviewCompleted && (\n              <AllowedFeaturesList\n                features={selectedFeatures}\n                onFeatureSelectionChange={handleFeatureSelectionChange}\n              />\n            )}\n\n            {shouldShowUnknownAppWarning && <UnknownAppWarning url={origin} onHideWarning={setHideWarning} />}\n          </Slider>\n        </Grid>\n      </Box>\n    </Box>\n  )\n}\n\nexport default memo(SafeAppsInfoModal)\n","import { useState, useEffect, useCallback, useMemo, useRef } from 'react'\nimport type { SafeAppData } from '@safe-global/safe-gateway-typescript-sdk'\nimport type { BrowserPermission } from '@/hooks/safe-apps/permissions'\nimport useChainId from '@/hooks/useChainId'\nimport useLocalStorage from '@/services/local-storage/useLocalStorage'\nimport type { AllowedFeatures } from '../types'\nimport { PermissionStatus } from '../types'\nimport { getOrigin } from '../utils'\n\nconst SAFE_APPS_INFO_MODAL = 'SafeApps__infoModal'\n\ntype useSafeAppsInfoModal = {\n  url: string\n  safeApp?: SafeAppData\n  permissions: AllowedFeatures[]\n  addPermissions: (origin: string, permissions: BrowserPermission[]) => void\n  getPermissions: (origin: string) => BrowserPermission[]\n  remoteSafeAppsLoading: boolean\n}\n\ntype ModalInfoProps = {\n  [chainId: string]: {\n    consentsAccepted: boolean\n    warningCheckedCustomApps: string[]\n  }\n}\n\nconst useSafeAppsInfoModal = ({\n  url,\n  safeApp,\n  permissions,\n  addPermissions,\n  getPermissions,\n  remoteSafeAppsLoading,\n}: useSafeAppsInfoModal): {\n  isModalVisible: boolean\n  isFirstTimeAccessingApp: boolean\n  isSafeAppInDefaultList: boolean\n  isConsentAccepted: boolean\n  isPermissionsReviewCompleted: boolean\n  onComplete: (shouldHide: boolean, permissions: BrowserPermission[]) => void\n} => {\n  const didMount = useRef(false)\n  const chainId = useChainId()\n  const [modalInfo = {}, setModalInfo] = useLocalStorage<ModalInfoProps>(SAFE_APPS_INFO_MODAL)\n  const [isDisclaimerReadingCompleted, setIsDisclaimerReadingCompleted] = useState(false)\n\n  useEffect(() => {\n    if (!url) {\n      setIsDisclaimerReadingCompleted(false)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!didMount.current) {\n      didMount.current = true\n      return\n    }\n  }, [])\n\n  const isPermissionsReviewCompleted = useMemo(() => {\n    if (!url) return false\n\n    const safeAppRequiredFeatures = permissions || []\n    const featureHasBeenGrantedOrDenied = (feature: AllowedFeatures) =>\n      getPermissions(url).some((permission: BrowserPermission) => {\n        return permission.feature === feature && permission.status !== PermissionStatus.PROMPT\n      })\n\n    // If the app add a new feature in the manifest we need to detect it and show the modal again\n    return !!safeAppRequiredFeatures.every(featureHasBeenGrantedOrDenied)\n  }, [getPermissions, url, permissions])\n\n  const isSafeAppInDefaultList = useMemo(() => {\n    if (!url) return false\n\n    return !!safeApp\n  }, [safeApp, url])\n\n  const isFirstTimeAccessingApp = useMemo(() => {\n    if (!url) return true\n\n    if (!modalInfo[chainId]) {\n      return true\n    }\n\n    return !modalInfo[chainId]?.warningCheckedCustomApps?.includes(url)\n  }, [chainId, modalInfo, url])\n\n  const isModalVisible = useMemo(() => {\n    const isComponentReady = didMount.current\n    const shouldShowLegalDisclaimer = !modalInfo[chainId] || modalInfo[chainId].consentsAccepted === false\n    const shouldShowAllowedFeatures = !isPermissionsReviewCompleted\n    const shouldShowUnknownAppWarning =\n      !remoteSafeAppsLoading && !isSafeAppInDefaultList && isFirstTimeAccessingApp && !isDisclaimerReadingCompleted\n\n    return isComponentReady && (shouldShowLegalDisclaimer || shouldShowUnknownAppWarning || shouldShowAllowedFeatures)\n  }, [\n    chainId,\n    isPermissionsReviewCompleted,\n    isFirstTimeAccessingApp,\n    isSafeAppInDefaultList,\n    isDisclaimerReadingCompleted,\n    remoteSafeAppsLoading,\n    modalInfo,\n  ])\n\n  const onComplete = useCallback(\n    (shouldHide: boolean, browserPermissions: BrowserPermission[]) => {\n      const info = {\n        consentsAccepted: true,\n        warningCheckedCustomApps: [...(modalInfo[chainId]?.warningCheckedCustomApps || [])],\n      }\n\n      const origin = getOrigin(url)\n\n      if (shouldHide && !modalInfo[chainId]?.warningCheckedCustomApps?.includes(origin)) {\n        info.warningCheckedCustomApps.push(origin)\n      }\n\n      setModalInfo({\n        ...modalInfo,\n        [chainId]: info,\n      })\n\n      if (!isPermissionsReviewCompleted) {\n        addPermissions(url, browserPermissions)\n      }\n\n      setIsDisclaimerReadingCompleted(true)\n    },\n    [addPermissions, chainId, isPermissionsReviewCompleted, modalInfo, setModalInfo, url],\n  )\n\n  return {\n    isModalVisible,\n    isSafeAppInDefaultList,\n    isFirstTimeAccessingApp,\n    isPermissionsReviewCompleted,\n    isConsentAccepted: !!modalInfo?.[chainId]?.consentsAccepted,\n    onComplete,\n  }\n}\n\nexport default useSafeAppsInfoModal\n","import type { ReactNode, ErrorInfo } from 'react'\nimport React from 'react'\n\ntype SafeAppsErrorBoundaryProps = {\n  children?: ReactNode\n  render: () => ReactNode\n}\n\ntype SafeAppsErrorBoundaryState = {\n  hasError: boolean\n  error?: Error\n}\n\nclass SafeAppsErrorBoundary extends React.Component<SafeAppsErrorBoundaryProps, SafeAppsErrorBoundaryState> {\n  public state: SafeAppsErrorBoundaryState = {\n    hasError: false,\n  }\n\n  constructor(props: SafeAppsErrorBoundaryProps) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('Uncaught error:', error, errorInfo)\n  }\n\n  public static getDerivedStateFromError(error: Error): SafeAppsErrorBoundaryState {\n    return { hasError: true, error }\n  }\n\n  public render(): React.ReactNode {\n    if (this.state.hasError) {\n      return this.props.render()\n    }\n\n    return this.props.children\n  }\n}\n\nexport default SafeAppsErrorBoundary\n","import Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport SvgIcon from '@mui/material/SvgIcon'\nimport { DISCORD_URL } from '@/config/constants'\nimport NetworkError from '@/public/images/apps/network-error.svg'\n\nimport css from './styles.module.css'\nimport ExternalLink from '@/components/common/ExternalLink'\n\ntype SafeAppsLoadErrorProps = {\n  onBackToApps: () => void\n}\n\nconst SafeAppsLoadError = ({ onBackToApps }: SafeAppsLoadErrorProps): React.ReactElement => {\n  return (\n    <div className={css.wrapper}>\n      <div className={css.content}>\n        <Typography variant=\"h1\">Safe App could not be loaded</Typography>\n\n        <SvgIcon component={NetworkError} inheritViewBox className={css.image} />\n\n        <div>\n          <Typography component=\"span\">In case the problem persists, please reach out to us via </Typography>\n          <ExternalLink href={DISCORD_URL} fontSize=\"medium\">\n            Discord\n          </ExternalLink>\n        </div>\n\n        <Button href=\"#back\" color=\"primary\" onClick={onBackToApps}>\n          Go back to the Safe Apps list\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nexport default SafeAppsLoadError\n","import { useCallback, useContext, useEffect, useState } from 'react'\nimport useTxQueue from '@/hooks/useTxQueue'\nimport { TxModalContext } from '@/components/tx-flow'\n\nconst useTransactionQueueBarState = () => {\n  const [expanded, setExpanded] = useState(false)\n  const [dismissedByUser, setDismissedByUser] = useState(false)\n  const { page = { results: [] } } = useTxQueue()\n  const { txFlow } = useContext(TxModalContext)\n\n  const dismissQueueBar = useCallback((): void => {\n    setDismissedByUser(true)\n  }, [])\n\n  useEffect(() => {\n    if (txFlow) setExpanded(false)\n  }, [txFlow])\n\n  return {\n    expanded,\n    dismissedByUser,\n    setExpanded,\n    dismissQueueBar,\n    transactions: page,\n  }\n}\n\nexport default useTransactionQueueBarState\n","import { useState, useEffect, useRef, useCallback } from 'react'\nimport { SAFE_APPS_THIRD_PARTY_COOKIES_CHECK_URL } from '@/config/constants'\nimport { Errors, logError } from '@/services/exceptions'\n\nconst SHOW_ALERT_TIMEOUT = 10000\n\nconst isSafari = (): boolean => {\n  return navigator.userAgent.indexOf('Safari') > -1 && navigator.userAgent.indexOf('Chrome') <= -1\n}\n\nconst createIframe = (uri: string, onload: () => void): HTMLIFrameElement => {\n  const iframeElement: HTMLIFrameElement = document.createElement('iframe')\n\n  iframeElement.src = uri\n  iframeElement.setAttribute('style', 'display:none')\n  iframeElement.onload = onload\n\n  return iframeElement\n}\n\ntype ThirdPartyCookiesType = {\n  thirdPartyCookiesDisabled: boolean\n  setThirdPartyCookiesDisabled: (value: boolean) => void\n}\n\nconst useThirdPartyCookies = (): ThirdPartyCookiesType => {\n  const iframeRef = useRef<HTMLIFrameElement>()\n  const [thirdPartyCookiesDisabled, setThirdPartyCookiesDisabled] = useState<boolean>(false)\n\n  const messageHandler = useCallback((event: MessageEvent) => {\n    const data = event.data\n\n    try {\n      if (data.hasOwnProperty('isCookieEnabled')) {\n        setThirdPartyCookiesDisabled(!data.isCookieEnabled)\n        window.removeEventListener('message', messageHandler)\n        document.body.removeChild(iframeRef.current as Node)\n      }\n    } catch (error) {\n      logError(Errors._905, error)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (isSafari()) {\n      return\n    }\n\n    window.addEventListener('message', messageHandler)\n\n    const iframeElement: HTMLIFrameElement = createIframe(SAFE_APPS_THIRD_PARTY_COOKIES_CHECK_URL, () =>\n      iframeElement?.contentWindow?.postMessage({ test: 'cookie' }, '*'),\n    )\n\n    iframeRef.current = iframeElement\n    document.body.appendChild(iframeElement)\n  }, [messageHandler])\n\n  useEffect(() => {\n    let id: ReturnType<typeof setTimeout>\n\n    if (thirdPartyCookiesDisabled) {\n      id = setTimeout(() => setThirdPartyCookiesDisabled(false), SHOW_ALERT_TIMEOUT)\n    }\n\n    return () => clearTimeout(id)\n  }, [thirdPartyCookiesDisabled])\n\n  return { thirdPartyCookiesDisabled, setThirdPartyCookiesDisabled }\n}\n\nexport default useThirdPartyCookies\n","import type { MutableRefObject } from 'react'\nimport { useCallback, useEffect } from 'react'\n\nimport type { AnalyticsEvent } from '@/services/analytics'\nimport { EventType, trackSafeAppEvent } from '@/services/analytics'\nimport { SAFE_APPS_ANALYTICS_CATEGORY } from '@/services/analytics/events/safeApps'\n\n//TODO: Remove Safe Apps old domain when all migrated to the new one\nconst ALLOWED_DOMAINS: RegExp[] = [\n  /^http:\\/\\/localhost:[0-9]{4}$/,\n  /^https:\\/\\/safe-apps\\.dev\\.5afe\\.dev$/,\n  /^https:\\/\\/apps\\.gnosis-safe\\.io$/,\n  /^https:\\/\\/apps-portal\\.safe\\.global$/,\n]\n\nconst useAnalyticsFromSafeApp = (iframeRef: MutableRefObject<HTMLIFrameElement | null>): void => {\n  const isValidMessage = useCallback(\n    (msg: MessageEvent<AnalyticsEvent>) => {\n      const isFromIframe = iframeRef.current?.contentWindow === msg.source\n      const isCategoryAllowed = msg.data.category === SAFE_APPS_ANALYTICS_CATEGORY\n      const isDomainAllowed = ALLOWED_DOMAINS.find((regExp) => regExp.test(msg.origin)) !== undefined\n\n      return isFromIframe && isCategoryAllowed && isDomainAllowed\n    },\n    [iframeRef],\n  )\n\n  const handleIncomingMessage = useCallback(\n    (msg: MessageEvent<AnalyticsEvent & { safeAppName: string }>) => {\n      if (!isValidMessage(msg)) {\n        return\n      }\n\n      const { action, label, safeAppName } = msg.data\n\n      trackSafeAppEvent(\n        { event: EventType.SAFE_APP, category: SAFE_APPS_ANALYTICS_CATEGORY, action, label },\n        safeAppName,\n      )\n    },\n    [isValidMessage],\n  )\n\n  useEffect(() => {\n    window.addEventListener('message', handleIncomingMessage)\n\n    return () => {\n      window.removeEventListener('message', handleIncomingMessage)\n    }\n  }, [handleIncomingMessage])\n}\n\nexport default useAnalyticsFromSafeApp\n","import { useEffect, useRef, useState } from 'react'\n\nconst APP_LOAD_ERROR_TIMEOUT = 30000\nconst APP_SLOW_LOADING_WARNING_TIMEOUT = 15_000\nconst APP_LOAD_ERROR = 'There was an error loading the Safe App. There might be a problem with the Safe App provider.'\n\ntype UseAppIsLoadingReturnType = {\n  iframeRef: React.RefObject<HTMLIFrameElement>\n  appIsLoading: boolean\n  setAppIsLoading: (appIsLoading: boolean) => void\n  isLoadingSlow: boolean\n}\n\nconst useAppIsLoading = (): UseAppIsLoadingReturnType => {\n  const [appIsLoading, setAppIsLoading] = useState<boolean>(true)\n  const [isLoadingSlow, setIsLoadingSlow] = useState<boolean>(false)\n  const [, setAppLoadError] = useState<boolean>(false)\n\n  const iframeRef = useRef<HTMLIFrameElement>(null)\n  const timer = useRef<number>()\n  const errorTimer = useRef<number>()\n\n  useEffect(() => {\n    const clearTimeouts = () => {\n      clearTimeout(timer.current)\n      clearTimeout(errorTimer.current)\n    }\n\n    if (appIsLoading) {\n      timer.current = window.setTimeout(() => {\n        setIsLoadingSlow(true)\n      }, APP_SLOW_LOADING_WARNING_TIMEOUT)\n      errorTimer.current = window.setTimeout(() => {\n        setAppLoadError(() => {\n          throw Error(APP_LOAD_ERROR)\n        })\n      }, APP_LOAD_ERROR_TIMEOUT)\n    } else {\n      clearTimeouts()\n      setIsLoadingSlow(false)\n    }\n\n    return () => {\n      clearTimeouts()\n    }\n  }, [appIsLoading])\n\n  return {\n    iframeRef,\n    appIsLoading,\n    setAppIsLoading,\n    isLoadingSlow,\n  }\n}\n\nexport default useAppIsLoading\n","import React from 'react'\nimport { Alert, AlertTitle } from '@mui/material'\nimport ExternalLink from '@/components/common/ExternalLink'\nimport { HelpCenterArticle } from '@/config/constants'\n\ntype ThirdPartyCookiesWarningProps = {\n  onClose: () => void\n}\n\nexport const ThirdPartyCookiesWarning = ({ onClose }: ThirdPartyCookiesWarningProps): React.ReactElement => {\n  return (\n    <Alert\n      severity=\"warning\"\n      onClose={onClose}\n      sx={({ palette }) => ({\n        background: palette.warning.light,\n        border: 0,\n        borderBottom: `1px solid ${palette.warning.main}`,\n        borderRadius: '0px !important',\n      })}\n    >\n      <AlertTitle>\n        Third party cookies are disabled. Safe Apps may therefore not work properly. You can find out more information\n        about this{' '}\n        <ExternalLink href={HelpCenterArticle.COOKIES} fontSize=\"inherit\">\n          here\n        </ExternalLink>\n      </AlertTitle>\n    </Alert>\n  )\n}\n","import type { Dispatch, ReactElement, SetStateAction } from 'react'\nimport { Backdrop, Typography, Box, IconButton, Accordion, AccordionDetails, AccordionSummary } from '@mui/material'\nimport { ClickAwayListener } from '@mui/base'\nimport CloseIcon from '@mui/icons-material/Close'\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess'\n\nimport useTxQueue from '@/hooks/useTxQueue'\nimport PaginatedTxns from '@/components/common/PaginatedTxns'\nimport styles from './styles.module.css'\nimport { getQueuedTransactionCount } from '@/utils/transactions'\nimport { BatchExecuteHoverProvider } from '@/components/transactions/BatchExecuteButton/BatchExecuteHoverProvider'\nimport BatchExecuteButton from '@/components/transactions/BatchExecuteButton'\nimport type { TransactionListPage } from '@safe-global/safe-gateway-typescript-sdk'\n\ntype Props = {\n  expanded: boolean\n  visible: boolean\n  setExpanded: Dispatch<SetStateAction<boolean>>\n  onDismiss: () => void\n  transactions: TransactionListPage\n}\n\nconst TransactionQueueBar = ({\n  expanded,\n  visible,\n  setExpanded,\n  onDismiss,\n  transactions,\n}: Props): ReactElement | null => {\n  if (!visible || transactions.results.length === 0) {\n    return null\n  }\n\n  const queuedTxCount = getQueuedTransactionCount(transactions)\n\n  // if you inline the expression, it will split put the `queuedTxCount` on a new line\n  // and make it harder to find this text for matchers in tests\n  const barTitle = `(${queuedTxCount}) Transaction queue`\n  return (\n    <>\n      <Box className={styles.barWrapper}>\n        <ClickAwayListener onClickAway={() => setExpanded(false)} mouseEvent=\"onMouseDown\" touchEvent=\"onTouchStart\">\n          <Accordion\n            expanded={expanded}\n            onChange={() => setExpanded((prev) => !prev)}\n            TransitionProps={{\n              timeout: {\n                appear: 400,\n                enter: 0,\n                exit: 500,\n              },\n              unmountOnExit: false,\n              mountOnEnter: true,\n            }}\n            sx={{\n              // there are very specific rules for the border radius that we have to override\n              borderBottomLeftRadius: '0 !important',\n              borderBottomRightRadius: '0 !important',\n            }}\n          >\n            <AccordionSummary\n              sx={{ '.MuiAccordionSummary-content': { alignItems: 'center' }, height: TRANSACTION_BAR_HEIGHT }}\n            >\n              <Typography variant=\"body1\" color=\"primary.main\" fontWeight={700} sx={{ mr: 'auto' }}>\n                {barTitle}\n              </Typography>\n\n              <IconButton\n                onClick={(event) => {\n                  event.stopPropagation()\n                  setExpanded((prev) => !prev)\n                }}\n                aria-label={`${expanded ? 'close' : 'expand'} transaction queue bar`}\n                sx={{ transform: expanded ? 'rotate(180deg)' : undefined }}\n              >\n                <ExpandLessIcon />\n              </IconButton>\n              <IconButton onClick={onDismiss} aria-label=\"dismiss transaction queue bar\">\n                <CloseIcon />\n              </IconButton>\n            </AccordionSummary>\n            <AccordionDetails>\n              <BatchExecuteHoverProvider>\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\">\n                  <BatchExecuteButton />\n                </Box>\n                <PaginatedTxns useTxns={useTxQueue} />\n              </BatchExecuteHoverProvider>\n            </AccordionDetails>\n          </Accordion>\n        </ClickAwayListener>\n      </Box>\n      <Backdrop open={expanded} />\n    </>\n  )\n}\n\nexport const TRANSACTION_BAR_HEIGHT = '64px'\n\nexport default TransactionQueueBar\n","import type { ReactElement } from 'react'\nimport type { PermissionRequest } from '@safe-global/safe-apps-sdk/dist/src/types/permissions'\nimport { Button, Dialog, DialogActions, DialogContent, Divider, Typography } from '@mui/material'\n\nimport { ModalDialogTitle } from '@/components/common/ModalDialog'\nimport { getSafePermissionDisplayValues } from '@/hooks/safe-apps/permissions'\n\ninterface PermissionsPromptProps {\n  origin: string\n  isOpen: boolean\n  requestId: string\n  permissions: PermissionRequest[]\n  onReject: (requestId?: string) => void\n  onAccept: (origin: string, requestId: string) => void\n}\n\nconst PermissionsPrompt = ({\n  origin,\n  isOpen,\n  requestId,\n  permissions,\n  onReject,\n  onAccept,\n}: PermissionsPromptProps): ReactElement => {\n  return (\n    <Dialog open={isOpen}>\n      <ModalDialogTitle onClose={() => onReject()}>\n        <Typography variant=\"body1\" fontWeight={700}>\n          Permissions Request\n        </Typography>\n      </ModalDialogTitle>\n      <Divider />\n      <DialogContent>\n        <Typography>\n          <b>{origin}</b> is requesting permissions for:\n        </Typography>\n        <ul>\n          {permissions.map((permission, index) => (\n            <li key={index}>\n              <Typography>{getSafePermissionDisplayValues(Object.keys(permission)[0]).description}</Typography>\n            </li>\n          ))}\n        </ul>\n      </DialogContent>\n      <DialogActions sx={{ justifyContent: 'center', my: 3 }}>\n        <Button\n          variant=\"contained\"\n          color=\"error\"\n          size=\"small\"\n          onClick={() => onReject(requestId)}\n          sx={{ minWidth: '130px' }}\n        >\n          Reject\n        </Button>\n        <Button variant=\"contained\" size=\"small\" onClick={() => onAccept(origin, requestId)} sx={{ minWidth: '130px' }}>\n          Accept\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default PermissionsPrompt\n","import { useContext, useEffect, useMemo, useState } from 'react'\nimport type { ReactElement } from 'react'\nimport { ErrorBoundary } from '@sentry/react'\nimport type { SafeTransaction } from '@safe-global/safe-core-sdk-types'\nimport SendToBlock from '@/components/tx-flow/flows/TokenTransfer/SendToBlock'\nimport SignOrExecuteForm from '@/components/tx/SignOrExecuteForm'\nimport { useCurrentChain } from '@/hooks/useChains'\nimport type { SafeAppsTxParams } from '.'\nimport { trackSafeAppTxCount } from '@/services/safe-apps/track-app-usage-count'\nimport { getTxOrigin } from '@/utils/transactions'\nimport { createMultiSendCallOnlyTx, createTx, dispatchSafeAppsTx } from '@/services/tx/tx-sender'\nimport useOnboard from '@/hooks/wallets/useOnboard'\nimport useSafeInfo from '@/hooks/useSafeInfo'\nimport useHighlightHiddenTab from '@/hooks/useHighlightHiddenTab'\nimport { SafeTxContext } from '@/components/tx-flow/SafeTxProvider'\nimport ApprovalEditor from '@/components/tx/ApprovalEditor'\nimport { getInteractionTitle, isTxValid } from '@/components/safe-apps/utils'\nimport ErrorMessage from '@/components/tx/ErrorMessage'\nimport { asError } from '@/services/exceptions/utils'\n\ntype ReviewSafeAppsTxProps = {\n  safeAppsTx: SafeAppsTxParams\n}\n\nconst ReviewSafeAppsTx = ({\n  safeAppsTx: { txs, requestId, params, appId, app },\n}: ReviewSafeAppsTxProps): ReactElement => {\n  const { safe } = useSafeInfo()\n  const onboard = useOnboard()\n  const chain = useCurrentChain()\n  const [txList, setTxList] = useState(txs)\n  const { safeTx, setSafeTx, safeTxError, setSafeTxError } = useContext(SafeTxContext)\n\n  useHighlightHiddenTab()\n\n  useEffect(() => {\n    const createSafeTx = async (): Promise<SafeTransaction> => {\n      const isMultiSend = txList.length > 1\n      const tx = isMultiSend ? await createMultiSendCallOnlyTx(txList) : await createTx(txList[0])\n\n      if (params?.safeTxGas) {\n        // FIXME: do it properly via the Core SDK\n        // @ts-expect-error safeTxGas readonly\n        tx.data.safeTxGas = params.safeTxGas\n      }\n\n      return tx\n    }\n\n    createSafeTx().then(setSafeTx).catch(setSafeTxError)\n  }, [txList, setSafeTx, setSafeTxError, params])\n\n  const handleSubmit = async () => {\n    if (!safeTx || !onboard) return\n    trackSafeAppTxCount(Number(appId))\n\n    try {\n      await dispatchSafeAppsTx(safeTx, requestId, onboard, safe.chainId)\n    } catch (error) {\n      setSafeTxError(asError(error))\n    }\n  }\n\n  const origin = useMemo(() => getTxOrigin(app), [app])\n  const error = !isTxValid(txs)\n\n  return (\n    <SignOrExecuteForm onSubmit={handleSubmit} origin={origin}>\n      <ErrorBoundary fallback={<div>Error parsing data</div>}>\n        <ApprovalEditor safeTransaction={safeTx} updateTransaction={setTxList} />\n      </ErrorBoundary>\n\n      {safeTx ? (\n        <SendToBlock address={safeTx.data.to} title={getInteractionTitle(safeTx.data.value || '', chain)} />\n      ) : error ? (\n        <ErrorMessage error={safeTxError}>\n          This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of\n          this Safe App for more information.\n        </ErrorMessage>\n      ) : null}\n    </SignOrExecuteForm>\n  )\n}\n\nexport default ReviewSafeAppsTx\n","import type { BaseTransaction, RequestId, SendTransactionRequestParams } from '@safe-global/safe-apps-sdk'\nimport TxLayout from '@/components/tx-flow/common/TxLayout'\nimport type { SafeAppData } from '@safe-global/safe-gateway-typescript-sdk'\nimport ReviewSafeAppsTx from './ReviewSafeAppsTx'\nimport { AppTitle } from '@/components/tx-flow/flows/SignMessage'\n\nexport type SafeAppsTxParams = {\n  appId?: string\n  app?: SafeAppData\n  requestId: RequestId\n  txs: BaseTransaction[]\n  params?: SendTransactionRequestParams\n}\n\nconst SafeAppsTxFlow = ({ data }: { data: SafeAppsTxParams }) => {\n  return (\n    <TxLayout\n      title=\"Confirm transaction\"\n      subtitle={<AppTitle name={data.app?.name} logoUri={data.app?.iconUrl} />}\n      step={0}\n    >\n      <ReviewSafeAppsTx safeAppsTx={data} />\n    </TxLayout>\n  )\n}\n\nexport default SafeAppsTxFlow\n","import { type ReactElement } from 'react'\nimport { Box, Typography } from '@mui/material'\nimport SouthIcon from '@mui/icons-material/South'\nimport css from './styles.module.css'\nimport useSafeAddress from '@/hooks/useSafeAddress'\nimport EthHashInfo from '@/components/common/EthHashInfo'\n\n// TODO: Remove this file after replacing in all tx flow components\nconst SendFromBlock = ({ title }: { title?: string }): ReactElement => {\n  const address = useSafeAddress()\n\n  return (\n    <Box className={css.container} pb={2} mb={2}>\n      <Typography color=\"text.secondary\" pb={1}>\n        {title || 'Sending from'}\n      </Typography>\n\n      <Typography variant=\"body2\" component=\"div\">\n        <EthHashInfo address={address} shortAddress={false} hasExplorer showCopyButton />\n      </Typography>\n\n      <SouthIcon className={css.arrow} />\n    </Box>\n  )\n}\n\nexport default SendFromBlock\n","import type { ReactElement } from 'react'\nimport { useContext, useEffect } from 'react'\nimport { useMemo } from 'react'\nimport { hashMessage, _TypedDataEncoder } from 'ethers/lib/utils'\nimport { Box } from '@mui/system'\nimport { Typography, SvgIcon } from '@mui/material'\nimport WarningIcon from '@/public/images/notifications/warning.svg'\nimport { type EIP712TypedData, isObjectEIP712TypedData, Methods, type RequestId } from '@safe-global/safe-apps-sdk'\nimport { OperationType } from '@safe-global/safe-core-sdk-types'\n\nimport SendFromBlock from '@/components/tx/SendFromBlock'\nimport { InfoDetails } from '@/components/transactions/InfoDetails'\nimport EthHashInfo from '@/components/common/EthHashInfo'\nimport SignOrExecuteForm from '@/components/tx/SignOrExecuteForm'\nimport { generateDataRowValue } from '@/components/transactions/TxDetails/Summary/TxDataRow'\nimport useChainId from '@/hooks/useChainId'\nimport { getReadOnlySignMessageLibContract } from '@/services/contracts/safeContracts'\nimport { DecodedMsg } from '@/components/safe-messages/DecodedMsg'\nimport CopyButton from '@/components/common/CopyButton'\nimport { getDecodedMessage } from '@/components/safe-apps/utils'\nimport { createTx, dispatchSafeAppsTx } from '@/services/tx/tx-sender'\nimport useOnboard from '@/hooks/wallets/useOnboard'\nimport useSafeInfo from '@/hooks/useSafeInfo'\nimport useHighlightHiddenTab from '@/hooks/useHighlightHiddenTab'\nimport { type SafeAppData } from '@safe-global/safe-gateway-typescript-sdk'\nimport { SafeTxContext } from '@/components/tx-flow/SafeTxProvider'\nimport { asError } from '@/services/exceptions/utils'\n\nexport type SignMessageOnChainProps = {\n  appId?: number\n  app?: SafeAppData\n  requestId: RequestId\n  message: string | EIP712TypedData\n  method: Methods.signMessage | Methods.signTypedMessage\n}\n\nconst ReviewSignMessageOnChain = ({ message, method, requestId }: SignMessageOnChainProps): ReactElement => {\n  const chainId = useChainId()\n  const { safe } = useSafeInfo()\n  const onboard = useOnboard()\n  const { safeTx, setSafeTx, setSafeTxError } = useContext(SafeTxContext)\n\n  useHighlightHiddenTab()\n\n  const isTextMessage = method === Methods.signMessage && typeof message === 'string'\n  const isTypedMessage = method === Methods.signTypedMessage && isObjectEIP712TypedData(message)\n\n  const readOnlySignMessageLibContract = useMemo(() => getReadOnlySignMessageLibContract(chainId), [chainId])\n  const signMessageAddress = readOnlySignMessageLibContract.getAddress()\n\n  const [decodedMessage, readableMessage] = useMemo(() => {\n    if (isTextMessage) {\n      const decoded = getDecodedMessage(message)\n      return [decoded, decoded]\n    } else if (isTypedMessage) {\n      return [message, JSON.stringify(message, null, 2)]\n    }\n    return []\n  }, [isTextMessage, isTypedMessage, message])\n\n  useEffect(() => {\n    let txData\n\n    if (isTextMessage) {\n      txData = readOnlySignMessageLibContract.encode('signMessage', [hashMessage(getDecodedMessage(message))])\n    } else if (isTypedMessage) {\n      const typesCopy = { ...message.types }\n\n      // We need to remove the EIP712Domain type from the types object\n      // Because it's a part of the JSON-RPC payload, but for the `.hash` in ethers.js\n      // The types are not allowed to be recursive, so ever type must either be used by another type, or be\n      // the primary type. And there must only be one type that is not used by any other type.\n      delete typesCopy.EIP712Domain\n      txData = readOnlySignMessageLibContract.encode('signMessage', [\n        _TypedDataEncoder.hash(message.domain, typesCopy, message.message),\n      ])\n    }\n\n    const params = {\n      to: signMessageAddress,\n      value: '0',\n      data: txData || '0x',\n      operation: OperationType.DelegateCall,\n    }\n    createTx(params).then(setSafeTx).catch(setSafeTxError)\n  }, [\n    isTextMessage,\n    isTypedMessage,\n    message,\n    readOnlySignMessageLibContract,\n    setSafeTx,\n    setSafeTxError,\n    signMessageAddress,\n  ])\n\n  const handleSubmit = async () => {\n    if (!safeTx || !onboard) return\n    try {\n      await dispatchSafeAppsTx(safeTx, requestId, onboard, safe.chainId)\n    } catch (error) {\n      setSafeTxError(asError(error))\n    }\n  }\n\n  return (\n    <SignOrExecuteForm onSubmit={handleSubmit}>\n      <SendFromBlock />\n\n      <InfoDetails title=\"Interact with SignMessageLib\">\n        <EthHashInfo address={signMessageAddress} shortAddress={false} showCopyButton hasExplorer />\n      </InfoDetails>\n\n      {safeTx && (\n        <Box pb={1}>\n          <Typography mt={2} color=\"primary.light\">\n            Data (hex encoded)\n          </Typography>\n          {generateDataRowValue(safeTx.data.data, 'rawData')}\n        </Box>\n      )}\n\n      <Typography my={1}>\n        <b>Signing method:</b> <code>{method}</code>\n      </Typography>\n\n      <Typography my={2}>\n        <b>Signing message:</b> {readableMessage && <CopyButton text={readableMessage} />}\n      </Typography>\n      <DecodedMsg message={decodedMessage} isInModal />\n\n      <Box display=\"flex\" alignItems=\"center\" my={2}>\n        <SvgIcon component={WarningIcon} inheritViewBox color=\"warning\" />\n        <Typography ml={1}>\n          Signing a message with your Safe Account requires a transaction on the blockchain\n        </Typography>\n      </Box>\n    </SignOrExecuteForm>\n  )\n}\n\nexport default ReviewSignMessageOnChain\n","import TxLayout from '@/components/tx-flow/common/TxLayout'\nimport { AppTitle } from '@/components/tx-flow/flows/SignMessage'\nimport ReviewSignMessageOnChain, {\n  type SignMessageOnChainProps,\n} from '@/components/tx-flow/flows/SignMessageOnChain/ReviewSignMessageOnChain'\n\nconst SignMessageOnChainFlow = ({ props }: { props: SignMessageOnChainProps }) => {\n  return (\n    <TxLayout\n      title=\"Confirm message\"\n      subtitle={<AppTitle name={props.app?.name} logoUri={props.app?.iconUrl} />}\n      step={0}\n    >\n      <ReviewSignMessageOnChain {...props} />\n    </TxLayout>\n  )\n}\n\nexport default SignMessageOnChainFlow\n","import { useContext, useState } from 'react'\nimport type { ReactElement } from 'react'\nimport { useMemo } from 'react'\nimport { useCallback, useEffect } from 'react'\nimport { CircularProgress, Typography } from '@mui/material'\nimport { useRouter } from 'next/router'\nimport Head from 'next/head'\nimport { getBalances, getTransactionDetails, getSafeMessage } from '@safe-global/safe-gateway-typescript-sdk'\nimport type {\n  AddressBookItem,\n  BaseTransaction,\n  EIP712TypedData,\n  RequestId,\n  SafeSettings,\n  SendTransactionRequestParams,\n} from '@safe-global/safe-apps-sdk'\nimport { Methods } from '@safe-global/safe-apps-sdk'\n\nimport { trackSafeAppOpenCount } from '@/services/safe-apps/track-app-usage-count'\nimport { TxEvent, txSubscribe } from '@/services/tx/txEvents'\nimport { SAFE_APPS_EVENTS, trackSafeAppEvent } from '@/services/analytics'\nimport { useSafeAppFromManifest } from '@/hooks/safe-apps/useSafeAppFromManifest'\nimport useSafeInfo from '@/hooks/useSafeInfo'\nimport { useSafeAppFromBackend } from '@/hooks/safe-apps/useSafeAppFromBackend'\nimport useChainId from '@/hooks/useChainId'\nimport useAddressBook from '@/hooks/useAddressBook'\nimport { useSafePermissions } from '@/hooks/safe-apps/permissions'\nimport { useCurrentChain } from '@/hooks/useChains'\nimport { isSameUrl } from '@/utils/url'\nimport useTransactionQueueBarState from '@/components/safe-apps/AppFrame/useTransactionQueueBarState'\nimport { gtmTrackPageview } from '@/services/analytics/gtm'\nimport useThirdPartyCookies from './useThirdPartyCookies'\nimport useAnalyticsFromSafeApp from './useFromAppAnalytics'\nimport useAppIsLoading from './useAppIsLoading'\nimport useAppCommunicator, { CommunicatorMessages } from './useAppCommunicator'\nimport { ThirdPartyCookiesWarning } from './ThirdPartyCookiesWarning'\nimport TransactionQueueBar, { TRANSACTION_BAR_HEIGHT } from './TransactionQueueBar'\nimport { safeMsgSubscribe, SafeMsgEvent } from '@/services/safe-messages/safeMsgEvents'\nimport { useAppSelector } from '@/store'\nimport { selectSafeMessages } from '@/store/safeMessagesSlice'\nimport { isSafeMessageListItem } from '@/utils/safe-message-guards'\nimport { isOffchainEIP1271Supported } from '@/utils/safe-messages'\nimport PermissionsPrompt from '@/components/safe-apps/PermissionsPrompt'\nimport { PermissionStatus } from '@/components/safe-apps/types'\n\nimport css from './styles.module.css'\nimport SafeAppIframe from './SafeAppIframe'\nimport useGetSafeInfo from './useGetSafeInfo'\nimport { hasFeature, FEATURES } from '@/utils/chains'\nimport { selectTokenList, selectOnChainSigning, TOKEN_LISTS } from '@/store/settingsSlice'\nimport { TxModalContext } from '@/components/tx-flow'\nimport SafeAppsTxFlow from '@/components/tx-flow/flows/SafeAppsTx'\nimport SignMessageFlow from '@/components/tx-flow/flows/SignMessage'\nimport SignMessageOnChainFlow from '@/components/tx-flow/flows/SignMessageOnChain'\n\nconst UNKNOWN_APP_NAME = 'Unknown Safe App'\n\ntype AppFrameProps = {\n  appUrl: string\n  allowedFeaturesList: string\n}\n\nconst AppFrame = ({ appUrl, allowedFeaturesList }: AppFrameProps): ReactElement => {\n  const chainId = useChainId()\n  // We use offChainSigning by default\n  const [settings, setSettings] = useState<SafeSettings>({\n    offChainSigning: true,\n  })\n  const [currentRequestId, setCurrentRequestId] = useState<RequestId | undefined>()\n  const safeMessages = useAppSelector(selectSafeMessages)\n  const { safe, safeLoaded, safeAddress } = useSafeInfo()\n  const tokenlist = useAppSelector(selectTokenList)\n  const onChainSigning = useAppSelector(selectOnChainSigning)\n\n  const addressBook = useAddressBook()\n  const chain = useCurrentChain()\n  const router = useRouter()\n  const {\n    expanded: queueBarExpanded,\n    dismissedByUser: queueBarDismissed,\n    setExpanded,\n    dismissQueueBar,\n    transactions,\n  } = useTransactionQueueBarState()\n  const queueBarVisible = transactions.results.length > 0 && !queueBarDismissed\n  const [remoteApp, , isBackendAppsLoading] = useSafeAppFromBackend(appUrl, safe.chainId)\n  const { safeApp: safeAppFromManifest } = useSafeAppFromManifest(appUrl, safe.chainId)\n  const { thirdPartyCookiesDisabled, setThirdPartyCookiesDisabled } = useThirdPartyCookies()\n  const { iframeRef, appIsLoading, isLoadingSlow, setAppIsLoading } = useAppIsLoading()\n  useAnalyticsFromSafeApp(iframeRef)\n  const { getPermissions, hasPermission, permissionsRequest, setPermissionsRequest, confirmPermissionRequest } =\n    useSafePermissions()\n  const appName = useMemo(() => (remoteApp ? remoteApp.name : appUrl), [appUrl, remoteApp])\n  const { setTxFlow } = useContext(TxModalContext)\n\n  const onTxFlowClose = () => {\n    setCurrentRequestId((prevId) => {\n      if (prevId) {\n        communicator?.send(CommunicatorMessages.REJECT_TRANSACTION_MESSAGE, prevId, true)\n        trackSafeAppEvent(SAFE_APPS_EVENTS.PROPOSE_TRANSACTION_REJECTED, appName)\n      }\n      return undefined\n    })\n  }\n\n  const communicator = useAppCommunicator(iframeRef, remoteApp || safeAppFromManifest, chain, {\n    onConfirmTransactions: (txs: BaseTransaction[], requestId: RequestId, params?: SendTransactionRequestParams) => {\n      const data = {\n        app: safeAppFromManifest,\n        appId: remoteApp ? String(remoteApp.id) : undefined,\n        requestId: requestId,\n        txs: txs,\n        params: params,\n      }\n\n      setCurrentRequestId(requestId)\n      setTxFlow(<SafeAppsTxFlow data={data} />, onTxFlowClose)\n    },\n    onSignMessage: (\n      message: string | EIP712TypedData,\n      requestId: string,\n      method: Methods.signMessage | Methods.signTypedMessage,\n      sdkVersion: string,\n    ) => {\n      const isOffChainSigningSupported = isOffchainEIP1271Supported(safe, chain, sdkVersion)\n      const signOffChain = isOffChainSigningSupported && !onChainSigning\n\n      setCurrentRequestId(requestId)\n\n      if (signOffChain) {\n        setTxFlow(\n          <SignMessageFlow\n            logoUri={safeAppFromManifest?.iconUrl || ''}\n            name={safeAppFromManifest?.name || ''}\n            message={message}\n            safeAppId={remoteApp?.id}\n            requestId={requestId}\n          />,\n          onTxFlowClose,\n        )\n      } else {\n        setTxFlow(\n          <SignMessageOnChainFlow\n            props={{\n              app: safeAppFromManifest,\n              appId: remoteApp?.id,\n              requestId,\n              message,\n              method,\n            }}\n          />,\n        )\n      }\n    },\n    onGetPermissions: getPermissions,\n    onSetPermissions: setPermissionsRequest,\n    onRequestAddressBook: (origin: string): AddressBookItem[] => {\n      if (hasPermission(origin, Methods.requestAddressBook)) {\n        return Object.entries(addressBook).map(([address, name]) => ({ address, name, chainId }))\n      }\n\n      return []\n    },\n    onGetTxBySafeTxHash: (safeTxHash) => getTransactionDetails(chainId, safeTxHash),\n    onGetEnvironmentInfo: () => ({\n      origin: document.location.origin,\n    }),\n    onGetSafeInfo: useGetSafeInfo(),\n    onGetSafeBalances: (currency) => {\n      const isDefaultTokenlistSupported = chain && hasFeature(chain, FEATURES.DEFAULT_TOKENLIST)\n      return getBalances(chainId, safeAddress, currency, {\n        exclude_spam: true,\n        trusted: isDefaultTokenlistSupported && TOKEN_LISTS.TRUSTED === tokenlist,\n      })\n    },\n    onGetChainInfo: () => {\n      if (!chain) return\n\n      const { nativeCurrency, chainName, chainId, shortName, blockExplorerUriTemplate } = chain\n\n      return {\n        chainName,\n        chainId,\n        shortName,\n        nativeCurrency,\n        blockExplorerUriTemplate,\n      }\n    },\n    onSetSafeSettings: (safeSettings: SafeSettings) => {\n      const newSettings: SafeSettings = {\n        ...settings,\n        offChainSigning: !!safeSettings.offChainSigning,\n      }\n\n      setSettings(newSettings)\n\n      return newSettings\n    },\n    onGetOffChainSignature: async (messageHash: string) => {\n      const safeMessage = safeMessages.data?.results\n        ?.filter(isSafeMessageListItem)\n        ?.find((item) => item.messageHash === messageHash)\n\n      if (safeMessage) {\n        return safeMessage.preparedSignature\n      }\n\n      try {\n        const { preparedSignature } = await getSafeMessage(chainId, messageHash)\n        return preparedSignature\n      } catch {\n        return ''\n      }\n    },\n  })\n\n  const onAcceptPermissionRequest = (_origin: string, requestId: RequestId) => {\n    const permissions = confirmPermissionRequest(PermissionStatus.GRANTED)\n    communicator?.send(permissions, requestId as string)\n  }\n\n  const onRejectPermissionRequest = (requestId?: RequestId) => {\n    if (requestId) {\n      confirmPermissionRequest(PermissionStatus.DENIED)\n      communicator?.send('Permissions were rejected', requestId as string, true)\n    } else {\n      setPermissionsRequest(undefined)\n    }\n  }\n\n  useEffect(() => {\n    if (!remoteApp) return\n\n    trackSafeAppOpenCount(remoteApp.id)\n  }, [remoteApp])\n\n  const onIframeLoad = useCallback(() => {\n    const iframe = iframeRef.current\n    if (!iframe || !isSameUrl(iframe.src, appUrl)) {\n      return\n    }\n\n    setAppIsLoading(false)\n    gtmTrackPageview(`${router.pathname}?appUrl=${router.query.appUrl}`)\n  }, [appUrl, iframeRef, setAppIsLoading, router])\n\n  useEffect(() => {\n    if (!appIsLoading && !isBackendAppsLoading) {\n      trackSafeAppEvent(\n        {\n          ...SAFE_APPS_EVENTS.OPEN_APP,\n        },\n        appName,\n      )\n    }\n  }, [appIsLoading, isBackendAppsLoading, appName])\n\n  useEffect(() => {\n    const unsubscribe = txSubscribe(TxEvent.SAFE_APPS_REQUEST, async ({ safeAppRequestId, safeTxHash }) => {\n      if (safeAppRequestId && currentRequestId === safeAppRequestId) {\n        trackSafeAppEvent(SAFE_APPS_EVENTS.PROPOSE_TRANSACTION, appName)\n        communicator?.send({ safeTxHash }, safeAppRequestId)\n      }\n    })\n\n    return unsubscribe\n  }, [appName, chainId, communicator, currentRequestId])\n\n  useEffect(() => {\n    const unsubscribe = safeMsgSubscribe(SafeMsgEvent.SIGNATURE_PREPARED, ({ messageHash, requestId, signature }) => {\n      if (requestId && currentRequestId === requestId) {\n        communicator?.send({ messageHash, signature }, requestId)\n      }\n    })\n\n    return unsubscribe\n  }, [communicator, currentRequestId])\n\n  if (!safeLoaded) {\n    return <div />\n  }\n\n  return (\n    <>\n      <Head>\n        <title>{`Safe Apps - Viewer - ${remoteApp ? remoteApp.name : UNKNOWN_APP_NAME}`}</title>\n      </Head>\n\n      <div className={css.wrapper}>\n        {thirdPartyCookiesDisabled && <ThirdPartyCookiesWarning onClose={() => setThirdPartyCookiesDisabled(false)} />}\n\n        {appIsLoading && (\n          <div className={css.loadingContainer}>\n            {isLoadingSlow && (\n              <Typography variant=\"h4\" gutterBottom>\n                The Safe App is taking too long to load, consider refreshing.\n              </Typography>\n            )}\n            <CircularProgress size={48} color=\"primary\" />\n          </div>\n        )}\n\n        <div\n          style={{\n            height: '100%',\n            display: appIsLoading ? 'none' : 'block',\n            paddingBottom: queueBarVisible ? TRANSACTION_BAR_HEIGHT : 0,\n          }}\n        >\n          <SafeAppIframe\n            appUrl={appUrl}\n            allowedFeaturesList={allowedFeaturesList}\n            iframeRef={iframeRef}\n            onLoad={onIframeLoad}\n            title={safeAppFromManifest?.name}\n          />\n        </div>\n\n        <TransactionQueueBar\n          expanded={queueBarExpanded}\n          visible={queueBarVisible && !queueBarDismissed}\n          setExpanded={setExpanded}\n          onDismiss={dismissQueueBar}\n          transactions={transactions}\n        />\n\n        {permissionsRequest && (\n          <PermissionsPrompt\n            isOpen\n            origin={permissionsRequest.origin}\n            requestId={permissionsRequest.requestId}\n            onAccept={onAcceptPermissionRequest}\n            onReject={onRejectPermissionRequest}\n            permissions={permissionsRequest.request}\n          />\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default AppFrame\n","import type { NextPage } from 'next'\nimport { useRouter } from 'next/router'\nimport { useCallback } from 'react'\nimport { Box, CircularProgress } from '@mui/material'\n\nimport { useSafeAppUrl } from '@/hooks/safe-apps/useSafeAppUrl'\nimport { useSafeApps } from '@/hooks/safe-apps/useSafeApps'\nimport SafeAppsInfoModal from '@/components/safe-apps/SafeAppsInfoModal'\nimport useSafeAppsInfoModal from '@/components/safe-apps/SafeAppsInfoModal/useSafeAppsInfoModal'\nimport SafeAppsErrorBoundary from '@/components/safe-apps/SafeAppsErrorBoundary'\nimport SafeAppsLoadError from '@/components/safe-apps/SafeAppsErrorBoundary/SafeAppsLoadError'\nimport AppFrame from '@/components/safe-apps/AppFrame'\nimport { useSafeAppFromManifest } from '@/hooks/safe-apps/useSafeAppFromManifest'\nimport { useBrowserPermissions } from '@/hooks/safe-apps/permissions'\nimport useChainId from '@/hooks/useChainId'\nimport { AppRoutes } from '@/config/routes'\nimport { getOrigin } from '@/components/safe-apps/utils'\n\nconst SafeApps: NextPage = () => {\n  const chainId = useChainId()\n  const router = useRouter()\n  const appUrl = useSafeAppUrl()\n  const { safeApp, isLoading } = useSafeAppFromManifest(appUrl || '', chainId)\n\n  const { remoteSafeApps, remoteSafeAppsLoading } = useSafeApps()\n\n  const { addPermissions, getPermissions, getAllowedFeaturesList } = useBrowserPermissions()\n  const origin = getOrigin(appUrl)\n  const {\n    isModalVisible,\n    isSafeAppInDefaultList,\n    isFirstTimeAccessingApp,\n    isConsentAccepted,\n    isPermissionsReviewCompleted,\n    onComplete,\n  } = useSafeAppsInfoModal({\n    url: origin,\n    safeApp: remoteSafeApps.find((app) => app.url === appUrl),\n    permissions: safeApp?.safeAppsPermissions || [],\n    addPermissions,\n    getPermissions,\n    remoteSafeAppsLoading,\n  })\n\n  const goToList = useCallback(() => {\n    router.push({\n      pathname: AppRoutes.apps.index,\n      query: { safe: router.query.safe },\n    })\n  }, [router])\n\n  // appUrl is required to be present\n  if (!appUrl || !router.isReady) return null\n\n  if (isModalVisible) {\n    return (\n      <SafeAppsInfoModal\n        key={isLoading ? 'loading' : 'loaded'}\n        onCancel={goToList}\n        onConfirm={onComplete}\n        features={safeApp.safeAppsPermissions}\n        appUrl={safeApp.url}\n        isConsentAccepted={isConsentAccepted}\n        isPermissionsReviewCompleted={isPermissionsReviewCompleted}\n        isSafeAppInDefaultList={isSafeAppInDefaultList}\n        isFirstTimeAccessingApp={isFirstTimeAccessingApp}\n      />\n    )\n  }\n\n  if (isLoading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\n        <CircularProgress />\n      </Box>\n    )\n  }\n\n  return (\n    <SafeAppsErrorBoundary render={() => <SafeAppsLoadError onBackToApps={() => router.back()} />}>\n      <AppFrame appUrl={appUrl} allowedFeaturesList={getAllowedFeaturesList(origin)} />\n    </SafeAppsErrorBoundary>\n  )\n}\n\nexport default SafeApps\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"barWrapper\":\"styles_barWrapper__m_ayi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__gdZ9K\",\"iframe\":\"styles_iframe__R6NQz\",\"loadingContainer\":\"styles_loadingContainer__Gz7mR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__fOVYe\",\"content\":\"styles_content___EYfS\",\"linkWrapper\":\"styles_linkWrapper__ifZ0K\",\"icon\":\"styles_icon__LV5eh\",\"image\":\"styles_image__0dp3c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sliderContainer\":\"styles_sliderContainer__4uMFw\",\"sliderInner\":\"styles_sliderInner__cOVUt\",\"sliderItem\":\"styles_sliderItem__Dvow5\",\"disclaimerContainer\":\"styles_disclaimerContainer__IDDXT\",\"disclaimerInner\":\"styles_disclaimerInner__OcCdI\",\"domainIcon\":\"styles_domainIcon__qlW4z\",\"domainText\":\"styles_domainText__8JmLr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__0nVe2\",\"arrow\":\"styles_arrow__KASF9\"};"],"names":["_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","getAlertTitleUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","AlertTitleRoot","styled","Typography","name","overridesResolver","props","styles","root","theme","fontWeight","typography","fontWeightMedium","marginTop","inProps","ref","useThemeProps","className","other","ownerState","classes","composeClasses","useUtilityClasses","gutterBottom","component","clsx","window","__NEXT_P","push","appUrl","allowedFeaturesList","iframeRef","onLoad","title","iframe","css","id","src","sandbox","allow","AppCommunicator","config","handlers","Map","on","method","handler","set","isValidMessage","msg","data","hasOwnProperty","sentFromIframe","current","contentWindow","source","knownMethod","Object","values","Methods","includes","canHandleMessage","Boolean","get","send","requestId","error","sdkVersion","getSDKVersion","MessageFormatter","postMessage","handleIncomingMessage","validMessage","hasHandler","response","onMessage","asError","message","onError","clear","removeEventListener","this","addEventListener","CommunicatorMessages","app","chain","useState","undefined","communicator","setCommunicator","customRpc","useAppSelector","selectRpc","safeAppWeb3Provider","useMemo","createSafeAppsWeb3Provider","rpcUri","chainId","useEffect","communicatorInstance","isCustomApp","trackSafeAppEvent","SAFE_APPS_EVENTS","url","ethMethod","params","call","version","env","logError","Errors","contexts","safeApp","request","initCommunicator","safeTxHash","onGetTxBySafeTxHash","onGetEnvironmentInfo","onGetSafeInfo","currency","onGetSafeBalances","settings","RPC_CALLS","onSetSafeSettings","Error","txs","transactions","map","to","value","getAddress","BigNumber","toString","onConfirmTransactions","onSignMessage","onGetOffChainSignature","typedData","onGetChainInfo","onGetPermissions","origin","onSetPermissions","onRequestAddressBook","useSafeInfo","safe","safeAddress","isOwner","useIsSafeOwner","useChainId","useCurrentChain","chainName","parseInt","owners","owner","threshold","isReadOnly","network","getLegacyChainName","toUpperCase","label","checked","onChange","FormControlLabel","sx","flex","color","palette","text","disabled","control","Checkbox","useSafeAppFromBackend","useAsync","retryUrl","endsWith","trimTrailingSlash","getSafeApps","backendApp","loading","useSafeAppFromManifest","fetchSafeAppFromManifest","isLoading","emptyApp","getEmptySafeApp","useSafeAppUrl","router","useRouter","setAppUrl","isReady","query","sanitizeUrl","_path","onSlideChange","children","initialStep","allSlides","React","filter","activeStep","setActiveStep","disabledBtn","setDisabledBtn","setTimeout","clearTimeout","isFirstStep","div","style","transform","slide","index","Box","display","justifyContent","width","Button","variant","size","fullWidth","onClick","prevStep","nextStep","marginLeft","mx","my","mb","ExternalLink","href","AppRoutes","textDecoration","_extends","assign","bind","target","i","arguments","length","key","prototype","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_g","_ref","titleId","height","viewBox","fill","xmlns","fillRule","clipRule","features","onFeatureSelectionChange","SvgIcon","ShieldIcon","inheritViewBox","textAlign","margin","flexDirection","ml","mt","feature","isBrowserFeature","PermissionsCheckbox","_","getBrowserPermissionDisplayValues","displayName","showInOneLine","overflowY","whiteSpace","CheckIcon","onHideWarning","toggleHideWarning","setToggleHideWarning","alignItems","WarningAmberOutlinedIcon","fontSize","lightPalette","Domain","SafeAppsInfoModal","onCancel","onConfirm","isConsentAccepted","isPermissionsReviewCompleted","isSafeAppInDefaultList","isFirstTimeAccessingApp","hideWarning","setHideWarning","selectedFeatures","setSelectedFeatures","currentSlide","setCurrentSlide","totalSlides","progressValue","shouldShowUnknownAppWarning","getOrigin","backgroundColor","background","paper","boxShadow","alpha","primary","LinearProgress","borderRadius","warning","main","Grid","container","direction","p","Slider","newStep","isLastStep","status","PermissionStatus","LegalDisclaimer","AllowedFeaturesList","feat","UnknownAppWarning","memo","modalInfo","permissions","addPermissions","getPermissions","remoteSafeAppsLoading","didMount","useRef","useLocalStorage","setModalInfo","isDisclaimerReadingCompleted","setIsDisclaimerReadingCompleted","every","some","permission","warningCheckedCustomApps","isModalVisible","isComponentReady","shouldShowLegalDisclaimer","consentsAccepted","onComplete","useCallback","shouldHide","browserPermissions","info","SafeAppsErrorBoundary","state","hasError","componentDidCatch","errorInfo","console","render","getDerivedStateFromError","cx","cy","r","strokeWidth","onBackToApps","NetworkError","DISCORD_URL","expanded","setExpanded","dismissedByUser","setDismissedByUser","useTxQueue","page","results","useContext","TxModalContext","txFlow","dismissQueueBar","thirdPartyCookiesDisabled","setThirdPartyCookiesDisabled","messageHandler","event","isCookieEnabled","document","body","removeChild","navigator","userAgent","iframeElement","uri","onload","createElement","setAttribute","createIframe","SAFE_APPS_THIRD_PARTY_COOKIES_CHECK_URL","test","appendChild","ALLOWED_DOMAINS","isFromIframe","isCategoryAllowed","category","SAFE_APPS_ANALYTICS_CATEGORY","isDomainAllowed","find","regExp","action","safeAppName","EventType","appIsLoading","setAppIsLoading","isLoadingSlow","setIsLoadingSlow","setAppLoadError","timer","errorTimer","clearTimeouts","ThirdPartyCookiesWarning","onClose","Alert","severity","light","border","borderBottom","AlertTitle","HelpCenterArticle","TRANSACTION_BAR_HEIGHT","visible","onDismiss","queuedTxCount","getQueuedTransactionCount","barTitle","ClickAwayListener","onClickAway","mouseEvent","touchEvent","Accordion","prev","TransitionProps","timeout","appear","enter","exit","unmountOnExit","mountOnEnter","borderBottomLeftRadius","borderBottomRightRadius","AccordionSummary","mr","IconButton","stopPropagation","aria-label","ExpandLessIcon","CloseIcon","AccordionDetails","BatchExecuteHoverProvider","BatchExecuteButton","PaginatedTxns","useTxns","Backdrop","open","isOpen","onReject","onAccept","Dialog","ModalDialogTitle","Divider","DialogContent","b","ul","li","getSafePermissionDisplayValues","description","DialogActions","minWidth","safeAppsTx","appId","onboard","useOnboard","txList","setTxList","SafeTxContext","safeTx","setSafeTx","safeTxError","setSafeTxError","useHighlightHiddenTab","createSafeTx","tx","createMultiSendCallOnlyTx","createTx","safeTxGas","then","catch","handleSubmit","trackSafeAppTxCount","Number","dispatchSafeAppsTx","getTxOrigin","isTxValid","SignOrExecuteForm","onSubmit","ErrorBoundary","fallback","ApprovalEditor","safeTransaction","updateTransaction","SendToBlock","address","getInteractionTitle","ErrorMessage","TxLayout","subtitle","AppTitle","logoUri","iconUrl","step","ReviewSafeAppsTx","useSafeAddress","pb","EthHashInfo","shortAddress","hasExplorer","showCopyButton","SouthIcon","isTextMessage","isTypedMessage","isObjectEIP712TypedData","readOnlySignMessageLibContract","getReadOnlySignMessageLibContract","signMessageAddress","decoded","getDecodedMessage","JSON","stringify","decodedMessage","readableMessage","txData","encode","hashMessage","typesCopy","types","EIP712Domain","_TypedDataEncoder","domain","operation","OperationType","SendFromBlock","InfoDetails","generateDataRowValue","code","CopyButton","DecodedMsg","isInModal","WarningIcon","ReviewSignMessageOnChain","offChainSigning","setSettings","currentRequestId","setCurrentRequestId","safeMessages","selectSafeMessages","safeLoaded","tokenlist","selectTokenList","onChainSigning","selectOnChainSigning","addressBook","useAddressBook","useTransactionQueueBarState","queueBarVisible","queueBarDismissed","remoteApp","isBackendAppsLoading","useThirdPartyCookies","useAppIsLoading","useAnalyticsFromSafeApp","useSafePermissions","hasPermission","permissionsRequest","setPermissionsRequest","confirmPermissionRequest","appName","setTxFlow","onTxFlowClose","prevId","useAppCommunicator","safeAppFromManifest","String","SafeAppsTxFlow","signOffChain","isOffchainEIP1271Supported","SignMessageFlow","safeAppId","SignMessageOnChainFlow","entries","getTransactionDetails","location","useGetSafeInfo","isDefaultTokenlistSupported","hasFeature","FEATURES","getBalances","exclude_spam","trusted","TOKEN_LISTS","nativeCurrency","shortName","blockExplorerUriTemplate","safeSettings","newSettings","messageHash","safeMessage","preparedSignature","isSafeMessageListItem","item","getSafeMessage","trackSafeAppOpenCount","onIframeLoad","isSameUrl","gtmTrackPageview","pathname","unsubscribe","txSubscribe","TxEvent","safeAppRequestId","safeMsgSubscribe","SafeMsgEvent","signature","Head","CircularProgress","paddingBottom","SafeAppIframe","TransactionQueueBar","queueBarExpanded","PermissionsPrompt","_origin","useSafeApps","remoteSafeApps","useBrowserPermissions","getAllowedFeaturesList","useSafeAppsInfoModal","safeAppsPermissions","goToList","SafeAppsLoadError","back","AppFrame","module"],"sourceRoot":""}