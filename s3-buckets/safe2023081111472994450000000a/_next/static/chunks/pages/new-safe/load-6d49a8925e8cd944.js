(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2897],{57659:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-safe/load",function(){return s(29455)}])},29455:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return ue}});var a,r=s(26042),t=s(69396),i=s(85893),o=s(9008),l=s.n(o),d=s(11163),c=s(67294),u=s(62687),h=s(65582),m=s(86886),f=s(15861),x=s(79442),j=s(47568),Z=s(14924),p=s(34051),v=s.n(p),w=s(87536),b=s(99226),S=s(83321),y=s(98456),k=s(67720),g=s(87109),N=s(53219),z=s(21023),A=s(58960),C=s.n(A),P=s(5169),I=s(92924),_=s(90228),B=s.n(_),E=s(48602),O=s(1372),V=s(46834),D=s(87153),R=s(69063),T=s(18831),W=s(73936),H=s(89336),L=s(37933),$=s(90551),q=s(23795),F=s(41664),G=s.n(F);!function(e){e.name="name",e.address="address"}(a||(a={}));var U,X=function(e){var n,s,o=e.data,l=e.onSubmit,d=e.onBack,c=(0,W.ZP)(),h=(0,H.CG)((function(e){return(0,L.hi)(e,c)})),x=(0,w.cI)({mode:"all",defaultValues:(s={},(0,Z.Z)(s,a.name,o.name),(0,Z.Z)(s,a.address,o.address),s)}),p=x.handleSubmit,A=x.formState,_=A.errors,F=A.isValid,U=x.watch,X=x.getValues,M=U(a.address),J=(0,O.tU)(),K=(0,V.W)(M),Q=K.ens,Y=K.name,ee=K.resolving,ne=Y||Q||J,se=function(){var e=(0,j.Z)(v().mark((function e(n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||!Object.keys(h).includes(n)){e.next=2;break}return e.abrupt("return","Safe Account is already added");case 2:return e.prev=2,e.next=5,(0,T.getSafeInfo)(c,n);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return","Address given is not a valid Safe Account address");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}(),ae=p((function(e){l((0,t.Z)((0,r.Z)({},e),(0,Z.Z)({},a.name,e[a.name]||ne))),e[a.name]&&(0,u.zj)(u.z9.NAME_SAFE)}));return(0,i.jsx)(w.RV,(0,t.Z)((0,r.Z)({},x),{children:(0,i.jsxs)("form",{onSubmit:ae,children:[(0,i.jsxs)(b.Z,{className:C().row,children:[(0,i.jsxs)(m.ZP,{container:!0,spacing:[3,1],mb:3,pr:"40px",children:[(0,i.jsx)(m.ZP,{item:!0,xs:12,md:!0,children:(0,i.jsx)(P.Z,{name:a.name,label:(null===_||void 0===_||null===(n=_[a.name])||void 0===n?void 0:n.message)||"Name",placeholder:ne,InputLabelProps:{shrink:!0},InputProps:{endAdornment:ee?(0,i.jsx)(g.Z,{position:"end",children:(0,i.jsx)(y.Z,{size:20})}):(0,i.jsx)(z.Z,{title:"This name is stored locally and will never be shared with us or any third parties.",arrow:!0,placement:"top",children:(0,i.jsx)(g.Z,{position:"end",children:(0,i.jsx)(N.Z,{component:I.Z,inheritViewBox:!0})})})}})}),(0,i.jsx)(m.ZP,{item:!0,order:[-1,1],children:(0,i.jsx)(b.Z,{className:B().select,children:(0,i.jsx)(E.Z,{})})})]}),(0,i.jsx)(R.Z,{label:"Safe Account",validate:se,name:a.address}),(0,i.jsxs)(f.Z,{mt:4,children:["By continuing you consent to the"," ",(0,i.jsx)(G(),{href:$.$.terms,passHref:!0,children:(0,i.jsx)(q.Z,{children:"terms of use"})})," ","and"," ",(0,i.jsx)(G(),{href:$.$.privacy,passHref:!0,children:(0,i.jsx)(q.Z,{children:"privacy policy"})}),"."]})]}),(0,i.jsx)(k.Z,{}),(0,i.jsx)(b.Z,{className:C().row,children:(0,i.jsxs)(b.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3,children:[(0,i.jsx)(S.Z,{variant:"outlined",size:"small",onClick:function(){var e=X();d((0,t.Z)((0,r.Z)({},e),(0,Z.Z)({},a.name,e.name||ne)))},startIcon:(0,i.jsx)(D.Z,{fontSize:"small"}),children:"Back"}),(0,i.jsx)(S.Z,{type:"submit",variant:"contained",size:"stretched",disabled:!F,children:"Next"})]})})]})}))},M=s(10253),J=s(94232),K=s(35239);!function(e){e.owners="owners",e.threshold="threshold"}(U||(U={}));var Q=function(e){var n=e.data,s=e.onSubmit,a=e.onBack,o=(0,W.ZP)(),l=(0,w.cI)({defaultValues:n,mode:"onChange"}),d=l.handleSubmit,u=l.setValue,h=l.control,m=l.formState.isValid,f=l.getValues,x=(0,w.Dq)({control:h,name:U.owners}).fields,j=(0,M.Z)((0,J.Z)((function(){if(n.address)return(0,T.getSafeInfo)(o,n.address)}),[o,n.address]),1)[0];(0,c.useEffect)((function(){if(j){u(U.threshold,j.threshold);var e=j.owners.map((function(e,n){return{address:e.value,name:f("owners.".concat(n,".name"))||""}}));u(U.owners,e)}}),[f,j,u]);return(0,i.jsx)(w.RV,(0,t.Z)((0,r.Z)({},l),{children:(0,i.jsxs)("form",{onSubmit:d(s),children:[(0,i.jsx)(b.Z,{className:C().row,children:x.map((function(e,n){return(0,i.jsx)(K.G,{index:n,groupName:"owners",readOnly:!0},e.id)}))}),(0,i.jsx)(k.Z,{}),(0,i.jsx)(b.Z,{className:C().row,children:(0,i.jsxs)(b.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3,children:[(0,i.jsx)(S.Z,{variant:"outlined",size:"small",onClick:function(){a(f())},startIcon:(0,i.jsx)(D.Z,{fontSize:"small"}),children:"Back"}),(0,i.jsx)(S.Z,{type:"submit",variant:"contained",size:"stretched",disabled:!m,children:"Next"})]})})]})}))},Y=s(65071),ee=s(89188),ne=s.n(ee),se=s(65136),ae=s(74727),re=s(68915),te=s(74604),ie=s(94071),oe=function(e){var n=e.data,s=e.onBack,a=(0,ae.Ul)(),o=(0,H.TL)(),l=(0,d.useRouter)(),c=(null===a||void 0===a?void 0:a.chainId)||"";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.Z,{className:C().row,children:(0,i.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(ie.Z,{name:"Network",value:(0,i.jsx)(Y.Z,{chainId:null===a||void 0===a?void 0:a.chainId,inline:!0})}),(0,i.jsx)(ie.Z,{name:"Name",value:(0,i.jsx)(f.Z,{children:n.name})}),(0,i.jsx)(ie.Z,{name:"Owners",value:(0,i.jsx)(b.Z,{className:ne().ownersArray,children:n.owners.map((function(e,n){return(0,i.jsx)(se.Z,{address:e.address,name:e.name||e.ens,shortAddress:!1,showPrefix:!1,showName:!0,hasExplorer:!0,showCopyButton:!0},n)}))})}),(0,i.jsx)(ie.Z,{name:"Threshold",value:(0,i.jsxs)(f.Z,{children:[n.threshold," out of ",n.owners.length," owner(s)"]})})]})}),(0,i.jsx)(k.Z,{}),(0,i.jsx)(b.Z,{className:C().row,children:(0,i.jsxs)(b.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3,children:[(0,i.jsx)(S.Z,{variant:"outlined",size:"small",onClick:function(){s(n)},startIcon:(0,i.jsx)(D.Z,{fontSize:"small"}),children:"Back"}),(0,i.jsx)(S.Z,{onClick:function(){var e=n.name,s=n.address;o((0,L.RP)({safe:(0,t.Z)((0,r.Z)({},re.P),{address:{value:s,name:e},threshold:n.threshold,owners:n.owners.map((function(e){return{value:e.address,name:e.name||e.ens}})),chainId:c})})),o((0,te.W8)({chainId:c,address:s,name:e}));var i=!0,d=!1,h=void 0;try{for(var m,f=n.owners[Symbol.iterator]();!(i=(m=f.next()).done);i=!0){var x=m.value,j=x.address,Z=x.name,p=x.ens,v=Z||p;v&&o((0,te.W8)({chainId:c,address:j,name:v}))}}catch(w){d=!0,h=w}finally{try{i||null==f.return||f.return()}finally{if(d)throw h}}(0,u.zj)((0,t.Z)((0,r.Z)({},u.z9.OWNERS),{label:n.owners.length})),(0,u.zj)((0,t.Z)((0,r.Z)({},u.z9.THRESHOLD),{label:n.threshold})),(0,u.zj)(u.z9.GO_TO_SAFE),l.push({pathname:$.$.home,query:{safe:"".concat(null===a||void 0===a?void 0:a.shortName,":").concat(s)}})},variant:"contained",size:"stretched",children:"Add"})]})})]})},le=[{title:"Connect wallet & select network",subtitle:"Select network on which the Safe Account was created",render:function(e,n,s,a){return(0,i.jsx)(X,{onSubmit:n,onBack:s,data:e,setStep:a})}},{title:"Owners and confirmations",subtitle:"Optional: Provide a name for each owner.",render:function(e,n,s,a){return(0,i.jsx)(Q,{onSubmit:n,onBack:s,data:e,setStep:a})}},{title:"Review",subtitle:"Confirm loading Safe Account",render:function(e,n,s,a){return(0,i.jsx)(oe,{onSubmit:n,onBack:s,data:e,setStep:a})}}],de={threshold:-1,owners:[],address:"",name:""},ce=function(e){var n=e.initialData,s=(0,d.useRouter)(),a=null!==n&&void 0!==n?n:de;return(0,i.jsx)(h.Z,{"data-testid":"load-safe-form",children:(0,i.jsxs)(m.ZP,{container:!0,columnSpacing:3,mt:[2,null,7],justifyContent:"center",children:[(0,i.jsx)(m.ZP,{item:!0,xs:12,md:10,lg:8,children:(0,i.jsx)(f.Z,{variant:"h2",pb:2,children:"Load Safe Account"})}),(0,i.jsx)(m.ZP,{item:!0,xs:12,md:10,lg:8,order:[1,null,0],children:(0,i.jsx)(x.y,{initialData:a,onClose:function(){s.push($.$.welcome)},steps:le,eventCategory:u.rm})})]})})},ue=function(){var e=(0,d.useRouter)().query.address,n=void 0===e?"":e,s=Array.isArray(n)?n[0]:n;return(0,i.jsxs)("main",{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Safe{Wallet} \u2013 Add Safe Account"})}),s?(0,i.jsx)(ce,{initialData:(0,t.Z)((0,r.Z)({},de),{address:s})}):(0,i.jsx)(ce,{initialData:de})]})}}},function(e){e.O(0,[7174,9774,2888,179],(function(){return n=57659,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=load-6d49a8925e8cd944.js.map