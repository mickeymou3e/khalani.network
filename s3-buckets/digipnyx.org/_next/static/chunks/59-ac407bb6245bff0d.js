"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{24630:function(e,n,t){t.d(n,{Z:function(){return pn}});var r=t(85893),i=t(11163),o=t(67294),s=t(92912),a=t(87357),c=t(80087),l=t(15861),u=t(25084),d=t(52380),p=t(31520),x=t(5337),h=t(96561),f=t(2766),v=t(74855),b=t(82280),Z=t(38895),j=t(22797),m=t(41899),g=t(23508),w=t(21737),y=t(3153),k=t(4410),P=t(62792),S=t(9279);function C(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function R(){var e=E(["\n  margin-top: 10px;\n  background-color: transparent;\n  box-shadow: none;\n  border-top: none;\n  &:before {\n    display: none;\n  }\n"]);return R=function(){return e},e}function O(){var e=E(["\n  padding: 0;\n"]);return O=function(){return e},e}function I(){var e=E(["\n  "," {\n    padding: 0;\n  }\n"]);return I=function(){return e},e}function T(){var e=E(["\n  font-weight: 500;\n  cursor: pointer;\n"]);return T=function(){return e},e}function N(){var e=E(["\n  cursor: pointer;\n  font-size: 14px;\n  position: relative;\n  top: 3px;\n  margin-left: 4px;\n"]);return N=function(){return e},e}function V(){var e=E(["\n  color: ",";\n"]);return V=function(){return e},e}function D(){var e=E(["\n  font-weight: 500;\n  margin-right: 10px;\n  background: ",";\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n"]);return D=function(){return e},e}var G=o.forwardRef((function(e,n){return(0,r.jsx)(w.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){C(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))})),q=(0,s.Z)(b.Z)(R()),A=(0,s.Z)(Z.Z)(O()),z=(0,s.Z)(j.Z)(I(),(function(e){return e.theme.breakpoints.down("sm")})),F=(0,s.Z)(l.Z)(T()),U=(0,s.Z)(m.Z)(N()),B=(0,s.Z)(g.Z)(V(),(function(e){return e.theme.palette.text.primary})),Y=(0,s.Z)(l.Z)(D(),(function(e){return e.theme.palette.gradients.grad2})),J=function(e){var n=e.proposal,t=(0,o.useState)(!1),i=t[0],s=t[1],c=(0,o.useState)(!1),u=c[0],p=c[1],x=(0,o.useState)(!1),h=x[0],f=x[1],b=(0,o.useState)(!1),Z=b[0],j=b[1];return(0,r.jsxs)(q,{children:[(0,r.jsx)(A,{expandIcon:(0,r.jsx)(B,{}),"aria-controls":"deails-accordion",id:"panel1a-header",children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,r.jsx)(l.Z,{variant:"subtitle2-bold",children:"Poll Details"}),!1===n.guildkick&&0===Number(n.paymentRequested)&&n.applicant!==S.d&&(0,r.jsx)(Y,{children:"Member Request"}),!1===n.guildkick&&Number(n.paymentRequested)>0&&(0,r.jsx)(Y,{children:"Funding Request"}),!0===n.guildkick&&(0,r.jsx)(Y,{children:"Guild Kick"}),!1===n.guildkick&&n.applicant===S.d&&(0,r.jsx)(Y,{children:"Whitelist Token"})]})}),(0,r.jsx)(z,{children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",children:[(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"body2",align:"center",gutterBottom:!0,children:"Created by"}),(0,r.jsx)(v.CopyToClipboard,{text:n.proposer,onCopy:function(){f(!0),setTimeout((function(){f(!1)}),2e3)},children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"center",children:[(0,r.jsx)(F,{align:"center",children:(0,k.Z)(n.proposer,5,5)}),(0,r.jsx)(U,{})]})})]})})}),n.sponsored&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"body2",align:"center",gutterBottom:!0,children:"Sponsored by"}),(0,r.jsx)(v.CopyToClipboard,{text:n.sponsor,onCopy:function(){s(!0),setTimeout((function(){s(!1)}),1e3)},children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"center",children:[(0,r.jsx)(F,{align:"center",children:(0,k.Z)(n.sponsor,5,5)}),(0,r.jsx)(U,{})]})})]})})}),n.applicant&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"body2",align:"center",gutterBottom:!0,children:"Applicant Address"}),(0,r.jsx)(v.CopyToClipboard,{text:n.applicant,onCopy:function(){p(!0),setTimeout((function(){p(!1)}),2e3)},children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"center",children:[(0,r.jsx)(F,{align:"center",children:(0,k.Z)(n.applicant,5,5)}),(0,r.jsx)(U,{})]})})]})})}),n.sharesRequested&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)(l.Z,{variant:"body2",gutterBottom:!0,children:"Shares Requested"}),(0,r.jsx)(l.Z,{variant:"body1-bold",children:new Intl.NumberFormat("de-DE").format(n.sharesRequested)})]})})}),n.lootRequested&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)(l.Z,{variant:"body2",gutterBottom:!0,children:"Loot Requested"}),(0,r.jsx)(l.Z,{variant:"body1-bold",children:new Intl.NumberFormat("de-DE").format(n.lootRequested)})]})})}),n.paymentRequested&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)(l.Z,{variant:"body2",gutterBottom:!0,children:"Payment Requested"}),(0,r.jsx)(l.Z,{variant:"body1-bold",children:new Intl.NumberFormat("de-DE").format(n.paymentRequested)})]})})}),n.tributeOffered&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)(l.Z,{variant:"body2",gutterBottom:!0,children:"Tribute to DAO"}),(0,r.jsxs)(l.Z,{variant:"body1-bold",children:[(0,P.v)(n.tributeOffered)," ",n.tributeTokenSymbol]})]})})}),(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"body2",align:"center",gutterBottom:!0,children:"Tribute ERC20"}),(0,r.jsx)(v.CopyToClipboard,{text:n.tributeToken,onCopy:function(){j(!0),setTimeout((function(){j(!1)}),2e3)},children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"center",children:[(0,r.jsx)(F,{align:"center",children:(0,k.Z)(n.tributeToken,5,5)}),(0,r.jsx)(U,{})]})})]})})}),Number(n.paymentRequested)>0&&(0,r.jsx)(a.Z,{sx:{width:{xs:"48%",xl:"30%"}},mb:2,mx:"1%",children:(0,r.jsx)(d.Z,{variant:"gradientOutline",width:"100%",height:"100px",children:(0,r.jsxs)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,r.jsx)(l.Z,{variant:"body2",gutterBottom:!0,children:"Payment Requested"}),(0,r.jsxs)(l.Z,{variant:"body1-bold",children:[n.paymentRequested," ",n.paymentTokenSymbol]})]})})}),(0,r.jsx)(y.Z,{open:i||u||h||Z,children:(0,r.jsx)(G,{severity:"success",sx:{width:"100%"},children:"Address copied!"})})]})})]})},_=t(6110),K=t(28520),L=t.n(K),W=t(25617),M=t(20468),Q=t(77228),H=t(63449),X=t(27472);function $(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}var ee,ne=(ee=L().mark((function e(n,t,r,i,o){var s,a,c,l,u,d;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=X.networks[i].address,a=n.getSigner(),e.next=4,(0,H.Y)(a,i);case 4:return c=e.sent,e.next=7,(0,H.c)(a,i);case 7:return l=e.sent,e.next=10,c.approve(s,o);case 10:return e.next=12,l.sponsorProposal(t);case 12:return u=e.sent,e.next=15,u.wait();case 15:return d=e.sent,e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,r){var i=ee.apply(e,n);function o(e){$(i,t,r,o,s,"next",e)}function s(e){$(i,t,r,o,s,"throw",e)}o(void 0)}))}),te=t(1915),re=t(79221),ie=t(35278),oe=t(5080),se=t(46366),ae=t(94360);function ce(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}function le(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){ce(o,r,i,s,a,"next",e)}function a(e){ce(o,r,i,s,a,"throw",e)}s(void 0)}))}}var ue=function(e){var n=e.proposal,t=(0,W.I0)(),i=(0,W.v9)(ie.oI),s=(0,W.v9)(ie.t5),c=(0,W.v9)(oe.Tz),u=(0,W.v9)(oe.Qb),p=(0,W.v9)(oe.FU),x=(0,W.v9)(ae.b4),h=(0,W.v9)(ae.e1),f=(0,o.useState)(te.Z.IDLE),v=f[0],b=f[1],Z=u&&v!==te.Z.SUCCESS&&"number"===typeof p&&p>0,j=u&&c===n.proposer&&!n.cancelled&&!n.sponsored,m=le(L().mark((function e(){var r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h){e.next=3;break}throw new Error("proposalDeposit from indexer undefined");case 3:return t((0,se.Tf)(te.Z.PROCESSING)),t((0,se.A_)(!0)),e.next=7,ne(i,n.proposalId,c,s,h);case 7:(r=e.sent).blockNumber&&(t((0,se.Tf)(te.Z.SUCCESS)),t((0,se.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(r.blockNumber+1))),b(te.Z.SUCCESS)),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),t((0,se.Tf)(te.Z.ERROR)),e.t0.code&&t((0,se.PJ)((0,re.GK)(e.t0))),b(te.Z.ERROR);case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),g=le(L().mark((function e(){var r,o,a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t((0,se.Tf)(te.Z.PROCESSING)),t((0,se.A_)(!0)),r=i.getSigner(),e.next=6,(0,H.c)(r,s);case 6:return o=e.sent,e.next=9,o.cancelProposal(n.proposalId);case 9:return a=e.sent,e.next=12,a.wait();case 12:(c=e.sent).blockNumber&&(t((0,se.Tf)(te.Z.SUCCESS)),t((0,se.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(c.blockNumber+1)))),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),t((0,se.Tf)(te.Z.ERROR)),e.t0.code&&t((0,se.PJ)((0,re.GK)(e.t0)));case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return(0,r.jsxs)(a.Z,{children:[v!==te.Z.SUCCESS&&(0,r.jsx)(d.Z,{children:(0,r.jsxs)(l.Z,{align:"center",p:1,children:["This proposal has not been sponsored yet. It can be sponsored only by DAO member.",(0,r.jsx)("br",{}),"Amount required to sponsor: ",h?(0,P.v)(h):" - "," pCKB.",(0,r.jsx)("br",{}),"It will be returned to sponsor except processing reward (",x?(0,P.v)(x):" - "," pCKB)."]})}),v===te.Z.SUCCESS&&(0,r.jsx)(d.Z,{variant:"gradientOutline",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"You have successfully sponsored this proposal!"})}),!u&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(M.Z,{})}),Z&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(Q.Z,{variant:"gradientOutline",onClick:m,children:"Sponsor Proposal"})}),j&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(Q.Z,{variant:"gradientOutline",onClick:g,children:"Cancel Proposal"})})]})},de=t(11941),pe=t.n(de),xe=function(e){var n=e.time,t=e.position,i=void 0===t?"flex-end":t,s=+new Date(n)-+new Date/1e3,c=(0,o.useState)(s),u=c[0],d=c[1];(0,o.useEffect)((function(){if(u<=0&&d(0),u>0){var e=setInterval((function(){return d(u-1)}),1e3);return function(){return clearInterval(e)}}return function(){}}),[u]);var p=(0,x.sX)(u),h=p.hours,f=p.minutes,v=p.seconds;return(0,r.jsx)(a.Z,{display:"flex",justifyContent:i,alignItems:"center",width:"100%",children:(0,r.jsx)(l.Z,{align:"center",children:(0,r.jsxs)("b",{children:[h," h ",f," m ",parseInt(v,10)," s"]})})})};function he(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}var fe=["Voting period has not started. Please wait."],ve=function(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){he(o,r,i,s,a,"next",e)}function a(e){he(o,r,i,s,a,"throw",e)}s(void 0)}))}}(L().mark((function e(n,t,r,i){var o,s,a,c,l,u;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.getSigner(),e.next=3,(0,H.c)(o,i);case 3:if(s=e.sent){e.next=6;break}throw new Error("submitProposalVote !dao");case 6:return e.next=8,s.getCurrentPeriod();case 8:return a=e.sent,e.next=11,s.proposals(t);case 11:if(c=e.sent,l=c.startingPeriod,a.gte(l)){e.next=15;break}throw new Error(fe[0]);case 15:return e.next=17,s.submitVote(t,r);case 17:return u=e.sent,e.abrupt("return",u.wait());case 19:case"end":return e.stop()}}),e)})));function be(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}function Ze(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){be(o,r,i,s,a,"next",e)}function a(e){be(o,r,i,s,a,"throw",e)}s(void 0)}))}}var je=function(e){var n=e.proposalIndex,t=e.votingPeriodStarts,i=e.votingPeriodEnds,s=(0,W.I0)(),c=(0,W.v9)(ie.oI),u=(0,W.v9)(ie.t5),p=(0,W.v9)(oe.Tz),x=(0,W.v9)(oe.Qb),h=(0,W.v9)(oe.FU),f=(0,o.useState)(null),v=f[0],b=f[1],Z=(0,o.useState)(!1),j=Z[0],m=Z[1],g=(0,o.useMemo)((function(){return pe().unix(parseInt(t,10)).isBefore()}),[t]);function w(){return y.apply(this,arguments)}function y(){return(y=Ze(L().mark((function e(){var t,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&"string"===typeof n&&""!==n&&u){e.next=3;break}return b(null),e.abrupt("return");case 3:return e.next=5,(0,H.c)(c,u);case 5:if(t=e.sent){e.next=10;break}return console.error("useCheckIfVoted::dao is falsy",{chainId:u,provider:c}),b(null),e.abrupt("return");case 10:return e.next=12,t.getMemberProposalVote(p,n);case 12:r=e.sent,b("number"===typeof r?1===r||2===r:null);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,o.useEffect)((function(){w()}),[p,n,c,u]);var k=Ze(L().mark((function e(t){var r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s((0,se.Tf)(te.Z.PROCESSING)),s((0,se.A_)(!0)),e.prev=2,e.next=5,ve(c,n,t,u);case 5:(r=e.sent).blockNumber&&(m(!0),s((0,se.Tf)(te.Z.SUCCESS)),s((0,se.PJ)("Your transaction has been sent. Transaction hash: ".concat(r.transactionHash))),w()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),fe.includes(null===e.t0||void 0===e.t0?void 0:e.t0.message)?(s((0,se.Tf)(te.Z.ERROR)),s((0,se.PJ)(e.t0.message))):e.t0.code?(s((0,se.Tf)(te.Z.ERROR)),s((0,se.PJ)((0,re.GK)(e.t0)))):(s((0,se.Tf)(te.Z.ERROR)),s((0,se.PJ)("Unknown error."))),m(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return g?(0,r.jsxs)(a.Z,{children:[!x&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",children:(0,r.jsx)(M.Z,{})}),x&&!j&&!1===v&&"number"===typeof h&&h>0&&(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",children:[(0,r.jsx)(a.Z,{width:"48%",children:(0,r.jsx)(Q.Z,{variant:"agreeVariant",onClick:function(){return k(1)},children:"Yes"})}),(0,r.jsx)(a.Z,{width:"48%",children:(0,r.jsx)(Q.Z,{variant:"disagreeVariant",onClick:function(){return k(2)},children:"No"})})]}),x&&!j&&!0===v&&(0,r.jsx)(d.Z,{variant:"errorBox",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"You have already voted!"})}),j&&(0,r.jsx)(d.Z,{variant:"gradientOutline",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"You have successfully voted!"})}),(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",width:"100%",pb:2,mt:3,children:[(0,r.jsx)(l.Z,{width:"100%",children:"Voting Ends In:"}),(0,r.jsx)(xe,{time:Number(i)})]})]}):(0,r.jsxs)(a.Z,{children:[(0,r.jsx)("b",{children:"Voting period has not started yet."})," It will begin at:"," ",pe().unix(parseInt(t,10)).format(),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]})},me=t(4909),ge=function(e){var n=e.votingPeriodEnds,t=e.gracePeriodEnds,i=(new Date).getTime()/1e3;return(0,r.jsx)(a.Z,{children:i>Number(n)&&i<Number(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"gradientOutline",children:(0,r.jsxs)(l.Z,{align:"center",p:1,children:["Proposal is in Grace Period.",(0,r.jsx)(me.Z,{children:(0,r.jsx)(l.Z,{variant:"body2",children:"Voting is over, and the Proposal is set to pass or fail depending on the votes cast during Voting. Members who voted No, and have no other pending Yes votes, can ragequit during this period."})})]})}),(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",width:"100%",mt:3,mb:2,children:[(0,r.jsx)(l.Z,{width:"100%",children:"Grace Period Ends In:"}),(0,r.jsx)(xe,{time:Number(t)})]})]})})};function we(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}var ye=function(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){we(o,r,i,s,a,"next",e)}function a(e){we(o,r,i,s,a,"throw",e)}s(void 0)}))}}(L().mark((function e(n,t,r){var i,o,s,a;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getSigner(),e.next=3,(0,H.c)(i,r);case 3:return o=e.sent,e.next=6,o.processProposal(t);case 6:return s=e.sent,e.next=9,s.wait();case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));function ke(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}var Pe=function(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){ke(o,r,i,s,a,"next",e)}function a(e){ke(o,r,i,s,a,"throw",e)}s(void 0)}))}}(L().mark((function e(n,t,r){var i,o,s,a;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getSigner(),e.next=3,(0,H.c)(i,r);case 3:return o=e.sent,e.next=6,o.processGuildKickProposal(t);case 6:return s=e.sent,e.next=9,s.wait();case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),Se=t(15990);function Ce(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}function Ee(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){Ce(o,r,i,s,a,"next",e)}function a(e){Ce(o,r,i,s,a,"throw",e)}s(void 0)}))}}var Re,Oe=function(e){var n=e.votingPeriodEnds,t=e.gracePeriodEnds,i=e.guildkick,s=e.proposalIndex,c=(0,W.I0)(),u=(0,W.v9)(ie.oI),p=(0,W.v9)(ie.t5),x=(0,W.v9)(oe.Qb),h=(0,o.useState)(Se.Z.IDLE),f=h[0],v=h[1],b=(new Date).getTime()/1e3,Z=Ee(L().mark((function e(){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((0,se.Tf)(te.Z.PROCESSING)),c((0,se.A_)(!0)),e.prev=2,e.next=5,ye(u,s,p);case 5:(n=e.sent).blockNumber&&(c((0,se.Tf)(te.Z.SUCCESS)),c((0,se.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(n.blockNumber+1)))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.code&&(c((0,se.Tf)(te.Z.ERROR)),c((0,se.PJ)((0,re.GK)(e.t0)))),v(Se.Z.ERROR),c((0,se.Tf)(te.Z.ERROR));case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),j=Ee(L().mark((function e(){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c((0,se.Tf)(te.Z.PROCESSING)),c((0,se.A_)(!0)),e.prev=2,e.next=5,Pe(u,s,p);case 5:(n=e.sent).blockNumber&&(c((0,se.Tf)(te.Z.SUCCESS)),c((0,se.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(n.blockNumber+1)))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.code&&(c((0,se.Tf)(te.Z.ERROR)),c((0,se.PJ)((0,re.GK)(e.t0)))),v(Se.Z.ERROR),c((0,se.Tf)(te.Z.ERROR));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return(0,r.jsx)(a.Z,{children:(0,r.jsx)(a.Z,{children:b>Number(n)&&b>Number(t)&&(0,r.jsxs)(r.Fragment,{children:[f===Se.Z.IDLE&&(0,r.jsx)(d.Z,{children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"To finish the whole process, proposal needs to be processed."})}),f===Se.Z.ERROR&&(0,r.jsx)(a.Z,{mt:1,children:(0,r.jsx)(d.Z,{variant:"errorBox",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"Proposal is not ready to be processed by blockchain network or it is been proceeding right now."})})}),f===Se.Z.SUCCESS&&(0,r.jsx)(d.Z,{variant:"gradientOutline",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"Proposal is been proceeding."})}),!x&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(M.Z,{})}),x&&f!==Se.Z.SUCCESS&&!1===i&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(Q.Z,{variant:"gradientOutline",onClick:Z,children:"Process Proposal"})}),x&&f!==Se.Z.SUCCESS&&!0===i&&(0,r.jsx)(a.Z,{maxWidth:"200px",mx:"auto",mt:2,children:(0,r.jsx)(Q.Z,{variant:"gradientOutline",onClick:j,children:"Process Guild Kick"})})]})})})},Ie=function(e){var n=e.didPass;return(0,r.jsxs)(r.Fragment,{children:[!0===n&&(0,r.jsx)(d.Z,{variant:"successBox",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"Proposal has been approved and processed."})}),!1===n&&(0,r.jsx)(d.Z,{variant:"errorBox",children:(0,r.jsx)(l.Z,{align:"center",p:1,children:"Proposal has been rejected and processed."})})]})},Te=t(99245),Ne=t(11496),Ve=t(88441),De=t(28962);function Ge(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var qe,Ae=(0,Ne.ZP)(Ve.Z)((function(e){var n=e.theme;return Ge(Re={height:5,borderRadius:5},"&.".concat(De.Z.colorPrimary),{backgroundColor:n.palette.colors.main6}),Ge(Re,"& .".concat(De.Z.bar),{borderRadius:5,backgroundColor:n.palette.colors.col2}),Re})),ze=(0,Ne.ZP)(Ve.Z)((function(e){var n=e.theme;return Ge(qe={height:5,borderRadius:5},"&.".concat(De.Z.colorPrimary),{backgroundColor:n.palette.colors.main6}),Ge(qe,"& .".concat(De.Z.bar),{borderRadius:5,backgroundColor:n.palette.colors.col4}),qe})),Fe=function(e){var n=e.main,t=e.all,i=e.type;return(0,r.jsxs)(a.Z,{children:["agree"===i&&(0,r.jsx)(Ae,{variant:"determinate",value:n/t*100}),"disagree"===i&&(0,r.jsx)(ze,{variant:"determinate",value:n/t*100})]})},Ue=function(e){var n=e.yesVotes,t=e.noVotes;return(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(l.Z,{variant:"subtitle2-bold",paragraph:!0,children:["Votes:"," "]}),n+t>0&&(0,r.jsxs)(a.Z,{width:"100%",pb:2,children:[(0,r.jsxs)(l.Z,{children:["Yes: ",n," ( ",n/(n+t)*100,"% )"]}),(0,r.jsx)(a.Z,{mt:1,mb:2,children:(0,r.jsx)(Fe,{type:"agree",main:n,all:n+t})}),(0,r.jsxs)(l.Z,{children:["No: ",t," ( ",t/(n+t)*100,"%)"]}),(0,r.jsx)(a.Z,{mt:1,mb:2,children:(0,r.jsx)(Fe,{type:"disagree",main:t,all:n+t})})]}),n+t===0&&(0,r.jsxs)(a.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,r.jsx)(Te.Z,{}),(0,r.jsx)(l.Z,{ml:1,children:"No votes"})]})]})};function Be(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Ye(){var e=Be(["\n  margin-top: 10px;\n  background-color: transparent;\n  box-shadow: none;\n  border-top: none;\n  &:before {\n    display: none;\n  }\n"]);return Ye=function(){return e},e}function Je(){var e=Be(["\n  padding: 0;\n"]);return Je=function(){return e},e}function _e(){var e=Be(["\n  color: ",";\n  font-weight: 500;\n"]);return _e=function(){return e},e}function Ke(){var e=Be(["\n  color: ",";\n  font-weight: 500;\n"]);return Ke=function(){return e},e}function Le(){var e=Be(["\n  font-weight: 500;\n  margin-right: 10px;\n  background: ",";\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n"]);return Le=function(){return e},e}function We(){var e=Be(["\n  color: ",";\n"]);return We=function(){return e},e}var Me=(0,s.Z)(b.Z)(Ye()),Qe=(0,s.Z)(Z.Z)(Je()),He=(0,s.Z)(l.Z)(_e(),(function(e){return e.theme.palette.colors.col2})),Xe=(0,s.Z)(l.Z)(Ke(),(function(e){return e.theme.palette.colors.col4})),$e=(0,s.Z)(l.Z)(Le(),(function(e){return e.theme.palette.gradients.grad2})),en=(0,s.Z)(g.Z)(We(),(function(e){return e.theme.palette.text.primary})),nn=function(e){var n=e.proposal;return(0,r.jsxs)(Me,{children:[n.cancelled&&(0,r.jsx)(a.Z,{children:"Cancelled"}),!n.cancelled&&(0,r.jsx)(Qe,{expandIcon:(0,r.jsx)(en,{}),"aria-controls":"vote-accordion",id:"panel1a-header",children:(0,r.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,r.jsx)(l.Z,{variant:"subtitle2-bold",children:"Vote Section"}),n.proposalStatus===_.Z.COLLECTING_FUNDS&&(0,r.jsx)($e,{children:"Collecting Funds"}),n.proposalStatus===_.Z.VOTING&&(0,r.jsx)($e,{children:"Voting"}),n.proposalStatus===_.Z.GRACE_PERIOD&&(0,r.jsx)($e,{children:"Grace Period"}),n.proposalStatus===_.Z.PROCEEDING&&(0,r.jsx)($e,{children:"Proceeding"}),n.proposalStatus===_.Z.FINISHED&&(0,r.jsxs)(a.Z,{display:"flex",children:[!1===n.didPass&&(0,r.jsx)(Xe,{mr:1.5,children:"Rejected"}),!0===n.didPass&&(0,r.jsx)(He,{mr:1.5,children:"Approved"})]})]})}),(0,r.jsxs)(j.Z,{children:[n.proposalStatus===_.Z.COLLECTING_FUNDS&&!n.cancelled&&(0,r.jsx)(ue,{proposal:n}),n.proposalStatus===_.Z.VOTING&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(je,{proposalIndex:n.proposalIndex,votingPeriodStarts:n.votingPeriodStarts,votingPeriodEnds:n.votingPeriodEnds}),(0,r.jsx)(Ue,{yesVotes:n.yesVotes,noVotes:n.noVotes})]}),n.proposalStatus===_.Z.GRACE_PERIOD&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge,{votingPeriodEnds:n.votingPeriodEnds,gracePeriodEnds:n.gracePeriodEnds}),(0,r.jsx)(Ue,{yesVotes:n.yesVotes,noVotes:n.noVotes})]}),n.proposalStatus===_.Z.PROCEEDING&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Oe,{votingPeriodEnds:n.votingPeriodEnds,gracePeriodEnds:n.gracePeriodEnds,guildkick:n.guildkick,proposalIndex:n.proposalIndex}),(0,r.jsx)(a.Z,{mt:2,children:(0,r.jsx)(Ue,{yesVotes:n.yesVotes,noVotes:n.noVotes})})]}),n.proposalStatus===_.Z.FINISHED&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ie,{didPass:n.didPass}),(0,r.jsx)(a.Z,{mt:2,children:(0,r.jsx)(Ue,{yesVotes:n.yesVotes,noVotes:n.noVotes})})]})]})]})};function tn(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function rn(){var e=tn(["\n  cursor: pointer;\n  margin-right: 10px;\n  font-size: 20px;\n  "," {\n    font-size: 20px;\n  }\n"]);return rn=function(){return e},e}function on(){var e=tn(["\n  color: #2ea5e8;\n  cursor: pointer;\n  font-size: 20px;\n  "," {\n    font-size: 20px;\n  }\n"]);return on=function(){return e},e}function sn(){var e=tn(["\n  color: ",";\n  font-weight: 500;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n"]);return sn=function(){return e},e}function an(){var e=tn(["\n  font-size: 12px;\n"]);return an=function(){return e},e}function cn(){var e=tn(["\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n"]);return cn=function(){return e},e}(0,s.Z)(c.Z)(rn(),(function(e){return e.theme.breakpoints.down("sm")})),(0,s.Z)(u.Z)(on(),(function(e){return e.theme.breakpoints.down("sm")}));var ln=(0,s.Z)(l.Z)(sn(),(function(e){return e.theme.palette.colors.main7})),un=(0,s.Z)(l.Z)(an()),dn=(0,s.Z)(l.Z)(cn()),pn=function(e){var n=e.proposal,t=e.mbProps,s=(0,i.useRouter)(),c=(0,o.useState)(""),u=c[0],v=c[1],b=(0,o.useState)(""),Z=b[0],j=b[1];return(0,o.useEffect)((function(){var e=(0,f.Z)(n.details);v(e.title),j(e.description)}),[null===n||void 0===n?void 0:n.details]),(0,r.jsx)(a.Z,{mb:t,children:(0,r.jsx)(d.Z,{variant:"greyShadow",children:(0,r.jsxs)(a.Z,{p:3,width:"100%",children:[(0,r.jsx)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(un,{align:"right",paragraph:!0,children:(0,x.ZC)(n.createdAt)})}),(0,r.jsx)(a.Z,{pb:4,children:(0,r.jsx)(p.Z,{internal:!0,href:"".concat(h.QY.PROPOSALS,"/").concat(n.id),children:(0,r.jsx)(ln,{variant:"h3",children:u})})}),s.pathname.includes("proposals")?(0,r.jsx)(l.Z,{variant:"subtitle2",paragraph:!0,children:Z}):(0,r.jsx)(dn,{variant:"subtitle2",paragraph:!0,children:Z}),(0,r.jsx)(J,{proposal:n}),(0,r.jsx)(nn,{proposal:n})]})})})}},68910:function(e,n,t){var r=t(85893),i=t(92912),o=t(87357),s=t(15861),a=t(52380),c=t(31520),l=t(4410),u=t(5337),d=t(96561),p=t(2766);function x(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function h(){var e=x(["\n  color: ",";\n  font-weight: 500;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n"]);return h=function(){return e},e}function f(){var e=x(["\n  color: ",";\n"]);return f=function(){return e},e}function v(){var e=x(["\n  color: ",";\n"]);return v=function(){return e},e}function b(){var e=x(["\n  font-size: 12px;\n"]);return b=function(){return e},e}var Z=(0,i.Z)(s.Z)(h(),(function(e){return e.theme.palette.colors.main7})),j=(0,i.Z)(s.Z)(f(),(function(e){return e.theme.palette.colors.col2})),m=(0,i.Z)(s.Z)(v(),(function(e){return e.theme.palette.colors.col4})),g=(0,i.Z)(s.Z)(b());n.Z=function(e){var n=e.vote;return(0,r.jsx)(o.Z,{mb:3,width:"100%",children:(0,r.jsx)(a.Z,{variant:"greyShadow",children:(0,r.jsxs)(o.Z,{p:3,sx:{width:"-webkit-fill-available"},children:[(0,r.jsx)(g,{align:"right",paragraph:!0,children:(0,u.ZC)(n.createdAt)}),(0,r.jsx)(c.Z,{internal:!0,href:"".concat(d.QY.PROPOSALS,"/").concat(n.proposal.id),children:(0,r.jsx)(Z,{variant:"h6",paragraph:!0,children:function(e){if(e.includes("title",2))return(0,p.Z)(e).title}(n.proposal.details)})}),(0,r.jsxs)(o.Z,{display:"flex",alignItems:"center",width:"100%",children:[(0,r.jsxs)(o.Z,{width:"60%",children:[(0,r.jsx)(s.Z,{variant:"body1-bold",children:"User address:"}),(0,r.jsx)(s.Z,{children:(0,l.Z)(n.memberAddress)})]}),(0,r.jsxs)(o.Z,{width:"40%",children:[(0,r.jsx)(s.Z,{variant:"body1-bold",children:"Voted on:"}),1===n.uintVote&&(0,r.jsx)(j,{children:"Agree"}),2===n.uintVote&&(0,r.jsx)(m,{children:"Disagree"})]})]})]})})})}},2766:function(e,n,t){function r(e){var n=e;n.includes("\n")&&(n=n.replace(/\n/g,"\\n"));try{var t=JSON.parse(n);return{title:t.title,description:t.description}}catch(r){return{title:"",description:"Can't parse proposal details. Please read it in block explorer."}}}t.d(n,{Z:function(){return r}})},5337:function(e,n,t){t.d(n,{sX:function(){return i},ZC:function(){return o}});var r=t(70722),i=function(e){var n=e,t=Math.floor(n/3600);n-=3600*t;var r=Math.floor(n/60)%60,i=(n-=60*r)%60;return{hours:t.toString().padStart(2,"0"),minutes:r.toString().padStart(2,"0"),seconds:i.toString().padStart(2,"0")}},o=function(e){if(!e)return null;var n=new Date(1e3*Number(e)-6e4*(new Date).getTimezoneOffset()),t="Europe/Berlin",i=(0,r.utcToZonedTime)(n,t);return(0,r.format)(i,"dd/MM/yyyy hh:mm aa (z)",{timeZone:t})}}}]);