(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{53093:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return t(67095)}])},67095:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Q}});var n=t(85893),i=(t(67294),t(25617)),o=t(87357),s=t(15861),a=t(78418),l=t(52380),d=t(27240),u=t(35278),c=function(){var e=(0,i.I0)(),r=(0,i.v9)(u.uq),t=function(r){e((0,u.k5)(r))};return(0,n.jsxs)(o.Z,{sx:{mb:{xs:0,md:3},mt:{xs:1.5,md:3}},children:[(0,n.jsx)(l.Z,{variant:r===d.Z.NORMAL?"gradientOutline":null,children:(0,n.jsxs)(o.Z,{width:"100%",height:"100%",p:3,sx:{cursor:"pointer"},onClick:function(){return t(d.Z.NORMAL)},children:[(0,n.jsx)(s.Z,{variant:"h6-bold",align:"center",paragraph:!0,children:"Create standard proposal"}),(0,n.jsx)(s.Z,{align:"center",children:"Tributing capital, requesting new shares"})]})}),(0,n.jsx)(o.Z,{my:2,children:(0,n.jsx)(l.Z,{variant:r===d.Z.WHITELIST_TOKEN?"gradientOutline":null,children:(0,n.jsxs)(o.Z,{width:"100%",height:"100%",p:3,sx:{cursor:"pointer"},onClick:function(){return t(d.Z.WHITELIST_TOKEN)},children:[(0,n.jsx)(s.Z,{variant:"h6-bold",align:"center",paragraph:!0,children:"Whitelist token proposal"}),(0,n.jsx)(s.Z,{align:"center",children:"Create whitelist token proposal"})]})})}),(0,n.jsx)(o.Z,{my:2,children:(0,n.jsx)(l.Z,{variant:r===d.Z.KICK?"gradientOutline":null,children:(0,n.jsxs)(o.Z,{width:"100%",height:"100%",p:3,sx:{cursor:"pointer"},onClick:function(){return t(d.Z.KICK)},children:[(0,n.jsx)(s.Z,{variant:"h6-bold",align:"center",paragraph:!0,children:"Guild kick"}),(0,n.jsx)(s.Z,{align:"center",children:"Request to forcibly remove a malicious member through a vote"})]})})})]})},h=t(28520),p=t.n(h),m=t(82580),v=t(20468),f=t(77228),x=t(33522),b=t(1915),Z=t(63449);function g(e,r,t,n,i,o,s){try{var a=e[o](s),l=a.value}catch(d){return void t(d)}a.done?r(l):Promise.resolve(l).then(n,i)}var k,j=(k=p().mark((function e(r,t,n,i){var o,s,a,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.getSigner(),e.next=3,(0,Z.c)(o,i);case 3:return s=e.sent,e.next=6,s.submitGuildKickProposal(t,'{"title": "'.concat(n.title,'", "description": "').concat(n.description,'", "link": "').concat(n.link,'"}'));case 6:return a=e.sent,e.next=9,a.wait();case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,n){var i=k.apply(e,r);function o(e){g(i,t,n,o,s,"next",e)}function s(e){g(i,t,n,o,s,"throw",e)}o(void 0)}))}),w=t(89081),C=t(74231),y=C.Ry({title:C.Z_().min(3,"Title must be at least 3 characters").required("Title is required"),description:C.Z_().min(3,"Description must be at least 3 characters").required("Description is required"),memberToKick:C.Z_().required("Member address is required")}),P=t(79221),T=t(5080),q=t(35676),R=t(46366);function O(e,r,t,n,i,o,s){try{var a=e[o](s),l=a.value}catch(d){return void t(d)}a.done?r(l):Promise.resolve(l).then(n,i)}var S={title:"",description:"",link:"test.com",memberToKick:""},W=function(){var e=(0,i.I0)(),r=(0,i.v9)(u.oI),t=(0,i.v9)(u.t5),a=((0,i.v9)(q.io),(0,i.v9)(T.Qb)),l=(0,w.Z)("md"),d=function(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function s(e){O(o,n,i,s,a,"next",e)}function a(e){O(o,n,i,s,a,"throw",e)}s(void 0)}))}}(p().mark((function n(i){var o,s;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e((0,R.Tf)(b.Z.PROCESSING)),e((0,R.A_)(!0)),o=i.link.replace(/(^\w+:|^)\/\//,""),n.next=6,j(r,i.memberToKick,{title:i.title,description:i.description,link:o},t);case 6:(s=n.sent).blockNumber&&(e((0,R.Tf)(b.Z.SUCCESS)),e((0,R.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(s.blockNumber+1)))),s.code&&(e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(s)))),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0),e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(n.t0)));case 16:case"end":return n.stop()}}),n,null,[[0,11]])})));return(0,n.jsx)(o.Z,{width:"100%",children:(0,n.jsxs)(o.Z,{maxWidth:"500px",mx:"auto",pt:3,children:[l&&(0,n.jsx)(s.Z,{variant:"body2",mb:3,children:"Press question mark to display tooltip."}),(0,n.jsx)(m.J9,{validationSchema:y,initialValues:S,validateOnChange:!0,onSubmit:d,children:function(e){return(0,n.jsx)(m.l0,{children:(0,n.jsxs)(o.Z,{width:"100%",children:[(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Title",inputProps:{id:"title",value:e.values.title,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.title})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Description",tootltip:"Anything you believe is relevant to your proposal. The shorter the description the better, and the important piece here is the WHAT you are asking for and WHY.",inputProps:{id:"description",value:e.values.description,onChange:e.handleChange,multiline:!0,rows:3},formControlProps:{fullWidth:!0},error:e.errors.description})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Link",tootltip:"Whatever information gives us the best context to review your proposal and make an informed decision.",inputProps:{id:"link",value:e.values.link,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.link})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Member",tootltip:"A proposal to kick out a member of the DAO. Converts any Shares they may have into Loot, thereby removing voting power. Warning once a member is guildkicked, they become jailed and cannot be added as a member ever again.",inputProps:{id:"memberToKick",value:e.values.memberToKick,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.memberToKick})}),(0,n.jsxs)(o.Z,{children:[!a&&(0,n.jsx)(v.Z,{}),a&&(0,n.jsx)(f.Z,{variant:"gradientOutline",type:"submit",children:"Send request"})]})]})})}})]})})},K=t(4909),_=t(2593),E=t(8058),N=t(27472);function A(e,r,t,n,i,o,s){try{var a=e[o](s),l=a.value}catch(d){return void t(d)}a.done?r(l):Promise.resolve(l).then(n,i)}var I=function(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function s(e){A(o,n,i,s,a,"next",e)}function a(e){A(o,n,i,s,a,"throw",e)}s(void 0)}))}}(p().mark((function e(r,t,n,i,o,s,a,l,d){var u,c,h,m,v,f,x,b,g,k,j;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=_.O$.from(i),c=_.O$.from(o),h=_.O$.from(a),m=E.networks[d].address,v=N.networks[d].address,f=r.getSigner(),e.next=8,(0,Z.Y)(f,d);case 8:return x=e.sent,e.next=11,(0,Z.c)(f,d);case 11:return b=e.sent,e.next=14,x.allowance(t,v);case 14:return g=e.sent,e.next=17,x.approve(v,s.sub(g));case 17:return e.next=19,b.submitProposal(n,u,c,s,m,h,m,JSON.stringify(l));case 19:return k=e.sent,e.next=22,k.wait();case 22:return j=e.sent,e.abrupt("return",j);case 24:case"end":return e.stop()}}),e)}))),J=C.Ry({title:C.Z_().min(3,"Title must be at least 3 characters").required("Title is required"),description:C.Z_().min(3,"Description must be at least 3 characters").required("Description is required"),link:C.Z_().required("Link is required"),tributeOffered:C.Rx().integer().min(0).required("You must specify a tribute amount for considering your proposal."),sharesRequested:C.Rx().integer().min(0).required("You have to specify how many shares you are requesting."),lootRequested:C.Rx().integer().min(0).required("You have to specify how much loot you are requesting.")}),D=t(62792);function L(e,r,t,n,i,o,s){try{var a=e[o](s),l=a.value}catch(d){return void t(d)}a.done?r(l):Promise.resolve(l).then(n,i)}var G={title:"",description:"",link:"",tributeOffered:0,sharesRequested:0,lootRequested:0},Y=function(){var e=(0,i.I0)(),r=(0,i.v9)(u.oI),t=(0,i.v9)(u.t5),a=(0,i.v9)(T.Tz),l=(0,i.v9)(T.Qb),d=(0,i.v9)(T.Sd),c=(0,w.Z)("md"),h=function(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function s(e){L(o,n,i,s,a,"next",e)}function a(e){L(o,n,i,s,a,"throw",e)}s(void 0)}))}}(p().mark((function n(i){var o,s,l,u,c,h,m,v;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e((0,R.Tf)(b.Z.PROCESSING)),e((0,R.A_)(!0)),o=i.link.replace(/(^\w+:|^)\/\//,""),s=a,l=a,u=i.tributeOffered,c=i.sharesRequested,h=i.lootRequested,m=0,!(null===d||void 0===d?void 0:d.lt(i.tributeOffered))){n.next=12;break}e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)("You have not enough pCKB")),n.next=17;break;case 12:return n.next=14,I(r,s,l,c,h,(0,D.b)(u),m,{title:i.title,description:i.description,link:o},t);case 14:(v=n.sent).blockNumber&&(e((0,R.Tf)(b.Z.SUCCESS)),e((0,R.PJ)("Your request has been processed by blockchain network and will be displayed with the block number ".concat(v.blockNumber+1)))),v.code&&(e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(v))));case 17:n.next=24;break;case 19:n.prev=19,n.t0=n.catch(0),console.log(n.t0),e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(n.t0)));case 24:case"end":return n.stop()}}),n,null,[[0,19]])})));return(0,n.jsx)(o.Z,{width:"100%",children:(0,n.jsxs)(o.Z,{maxWidth:"500px",mx:"auto",pt:3,children:[c&&(0,n.jsx)(s.Z,{variant:"body2",mb:3,children:"Press question mark to display tooltip."}),(0,n.jsx)(m.J9,{validationSchema:J,initialValues:G,validateOnChange:!0,onSubmit:h,children:function(e){return(0,n.jsx)(m.l0,{children:(0,n.jsxs)(o.Z,{width:"100%",children:[(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Title",inputProps:{id:"title",value:e.values.title,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.title})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Description",tootltip:"Anything you believe is relevant to your proposal. The shorter the description the better, and the important piece here is the WHAT you are asking for and WHY.",inputProps:{id:"description",value:e.values.description,onChange:e.handleChange,multiline:!0,rows:3},formControlProps:{fullWidth:!0},error:e.errors.description})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Link",tootltip:"Whatever information gives us the best context to review your proposal and make an informed decision.",inputProps:{id:"link",value:e.values.link,onChange:e.handleChange,placeholder:"https://"},formControlProps:{fullWidth:!0},error:e.errors.link})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Tribute Offered",tootltip:"The amount of pCKB you are committing to deposit to the DAO bank.",inputProps:{id:"tributeOffered",placeholder:"e.g. 10",value:e.values.tributeOffered,onChange:e.handleChange,type:"number"},formControlProps:{fullWidth:!0},error:e.errors.tributeOffered})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Shares Requested",tootltip:"The amount of requested shares for your tribute. The current recommended convention is 1 pCKB : 1 voting share ratio.",inputProps:{id:"sharesRequested",placeholder:"e.g. 10",value:e.values.sharesRequested,onChange:e.handleChange,type:"number"},formControlProps:{fullWidth:!0},error:e.errors.sharesRequested})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Loot Requested",tootltip:"Non-voting shares. The current recommended convention is 1 pCKB : 1 loot ratio.",inputProps:{id:"lootRequested",placeholder:"e.g. 10",value:e.values.lootRequested,onChange:e.handleChange,type:"number"},formControlProps:{fullWidth:!0},error:e.errors.lootRequested})}),(0,n.jsx)(s.Z,{variant:"subtitle1-bold",paragraph:!0,children:"Summary:"}),(0,n.jsxs)(o.Z,{display:"flex",width:"100%",mb:2,children:[(0,n.jsx)(s.Z,{children:"Tribute :"}),(0,n.jsxs)(s.Z,{variant:"body1-bold",mx:1,children:[new Intl.NumberFormat("en-US").format(isNaN(e.values.tributeOffered)?0:e.values.tributeOffered)," ","pCKB"]}),(0,n.jsx)(K.Z,{children:(0,n.jsx)(s.Z,{variant:"body2",children:"The amount of pCKB you are committing to deposit to the DAO bank."})})]}),(0,n.jsxs)(o.Z,{children:[!l&&(0,n.jsx)(v.Z,{}),l&&(0,n.jsx)(f.Z,{variant:"gradientOutline",type:"submit",children:"Send request"})]})]})})}})]})})},H=C.Ry({title:C.Z_().min(3,"Title must be at least 3 characters").required("Title is required"),description:C.Z_().min(3,"Description must be at least 3 characters").required("Description is required"),link:C.Z_(),tokenAddress:C.Z_().required("Token address is required")});function B(e,r,t,n,i,o,s){try{var a=e[o](s),l=a.value}catch(d){return void t(d)}a.done?r(l):Promise.resolve(l).then(n,i)}var M={title:"",description:"",link:"",tokenAddress:""},U=function(){var e=(0,i.I0)(),r=(0,i.v9)(u.oI),t=(0,i.v9)(u.t5),a=(0,i.v9)(T.Qb),l=(0,w.Z)("md"),d=function(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function s(e){B(o,n,i,s,a,"next",e)}function a(e){B(o,n,i,s,a,"throw",e)}s(void 0)}))}}(p().mark((function n(i){var o,s,a,l,d,u,c,h;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e((0,R.Tf)(b.Z.PROCESSING)),e((0,R.A_)(!0)),o=i.tokenAddress,s=i.description,a=i.link,l=i.title,d=r.getSigner(),n.next=7,(0,Z.c)(d,t);case 7:return u=n.sent,n.next=10,u.submitWhitelistProposal(o,JSON.stringify({title:l,description:s,link:a}));case 10:return c=n.sent,n.next=13,c.wait();case 13:(h=n.sent).blockNumber&&(e((0,R.Tf)(b.Z.SUCCESS)),e((0,R.PJ)("Your request has been processed by blockchain network."))),h.code&&(e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(h)))),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(0),console.log(n.t0),e((0,R.Tf)(b.Z.ERROR)),e((0,R.PJ)((0,P.GK)(n.t0)));case 23:case"end":return n.stop()}}),n,null,[[0,18]])})));return(0,n.jsx)(o.Z,{width:"100%",children:(0,n.jsxs)(o.Z,{maxWidth:"500px",mx:"auto",pt:3,children:[l&&(0,n.jsx)(s.Z,{variant:"body2",mb:3,children:"Press question mark to display tooltip."}),(0,n.jsx)(m.J9,{validationSchema:H,initialValues:M,validateOnChange:!0,onSubmit:d,children:function(e){return(0,n.jsx)(m.l0,{children:(0,n.jsxs)(o.Z,{width:"100%",children:[(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Title",inputProps:{id:"title",value:e.values.title,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.title})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Description",tootltip:"Anything you believe is relevant to your proposal. The shorter the description the better, and the important piece here is the WHAT you are asking for and WHY.",inputProps:{id:"description",value:e.values.description,onChange:e.handleChange,multiline:!0,rows:3},formControlProps:{fullWidth:!0},error:e.errors.description})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Link",tootltip:"Whatever information gives us the best context to review your proposal and make an informed decision.",inputProps:{id:"link",value:e.values.link,onChange:e.handleChange,placeholder:"https://"},formControlProps:{fullWidth:!0},error:e.errors.link})}),(0,n.jsx)(o.Z,{width:"100%",mb:2,children:(0,n.jsx)(x.Z,{label:"Token address (ERC20)",inputProps:{id:"tokenAddress",value:e.values.tokenAddress,onChange:e.handleChange},formControlProps:{fullWidth:!0},error:e.errors.tokenAddress})}),(0,n.jsxs)(o.Z,{children:[!a&&(0,n.jsx)(v.Z,{}),a&&(0,n.jsx)(f.Z,{variant:"gradientOutline",type:"submit",children:"Send request"})]})]})})}})]})})},Q=function(){var e=(0,i.v9)(u.uq);return(0,n.jsx)(a.Z,{children:(0,n.jsxs)(o.Z,{mt:4,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{md:"space-between",xl:"center"}},width:"100%",children:[(0,n.jsx)(s.Z,{variant:"h3-bold",mt:1,mb:3,sx:{display:{xs:"block",md:"none"},textAlign:{xs:"center",md:"left"}},children:"Create new proposal"}),(0,n.jsx)(o.Z,{sx:{width:{xs:"100%",md:"45%",lg:"40%"},pl:{xs:0,lg:4}},children:(0,n.jsx)(c,{})}),(0,n.jsxs)(o.Z,{sx:{width:{xs:"100%",md:"50%",lg:"55%"}},children:[e===d.Z.NORMAL&&(0,n.jsx)(Y,{}),e===d.Z.WHITELIST_TOKEN&&(0,n.jsx)(U,{}),e===d.Z.KICK&&(0,n.jsx)(W,{})]})]})})}}},function(e){e.O(0,[57,993,774,888,179],(function(){return r=53093,e(e.s=r);var r}));var r=e.O();_N_E=r}]);